import{L as V,u as c,Z as D,H as x,m as N,c as _,a as r,b as t,g as w,F as B,p as F,r as i,o as f,e as P,t as u,n as h,w as A}from"./app--AXdFNzx.js";import{P as z}from"./Pagination-Uchoye79.js";import{S as j}from"./sweetalert2.all-0vlIJAXP.js";import{B as C,a as I}from"./BsModalButton-HLM53q8B.js";import{B as T}from"./Input-k7Da387n.js";import{B as E}from"./Select-SwYCKsJd.js";import{B as H}from"./Button-7mSypOfa.js";import{B as U}from"./ValidationErrors-H8oC0H6u.js";import{U as Y}from"./UserMaster-aSRlfKmN.js";import{_ as O}from"./_plugin-vue_export-helper-x3n3nnut.js";function g(e){const a=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&a==="[object Date]"?new e.constructor(+e):typeof e=="number"||a==="[object Number]"||typeof e=="string"||a==="[object String]"?new Date(e):new Date(NaN)}function y(e,a){return e instanceof Date?new e.constructor(a):new Date(a)}function K(e,a){const s=g(e);if(isNaN(a))return y(e,NaN);if(!a)return s;const n=s.getDate(),l=y(e,s.getTime());l.setMonth(s.getMonth()+a+1,0);const d=l.getDate();return n>=d?l:(s.setFullYear(l.getFullYear(),l.getMonth(),n),s)}function Z(e){return g(e).getMonth()}function q(e){return g(e).getFullYear()}const G={name:"Index",layout:Y,components:{Pagination:z,Link:V,usePage:c,BsModal:C,BsModalButton:I,BsInput:T,BsSelect:E,BsButton:H,BreezeValidationErrors:U,VueDatePicker:D,Head:x},setup(){const e=[{label:"Leave",value:"leave"},{label:"Sick Leave",value:"sick-leave"}],a=N({employee_id:null,type:null,date_time:null}),s=new Date,n=K(new Date(q(new Date),Z(new Date)),1);function l(){return c().props.value.attendance_logs.data}function d(){return c().props.value.attendance_logs.links}function m(){a.post(route("user.leaves.new"),{onSuccess:b=>{j.fire("Success","new attendance log added","success"),a.reset("employee_id","type","date_time","name")}})}function p(){return c().props.value.employees}return{attendancesData:l,attendancesLink:d,addAttendanceLogFormSubmit:m,attendanceTypes:e,newLogData:a,employeesList:p,VueDatePicker:D,minDate:s,maxDate:n}}},J={class:"row"},Q={class:"col-lg-12"},R={class:"dashboard-settings margin-top-40 margin-bottom-30"},W={class:"header-wrap d-flex justify-content-between"},X=t("h2",{class:"dashboards-title margin-bottom-40"},"All Leaves",-1),$={class:"btn-wrapper"},ee={class:"table-wrap table-responsive"},te={class:"table table-light table-secondary"},ae=t("thead",null,[t("th",null,"ID"),t("th",null,"Type"),t("th",null,"Status"),t("th",null,"Date")],-1),ne={class:"single-info-input margin-top-30"},oe=t("label",{class:"info-title"},"Date Time",-1);function se(e,a,s,n,l,d){const m=i("Head"),p=i("BsModalButton"),b=i("Pagination"),v=i("BreezeValidationErrors"),L=i("BsSelect"),k=i("VueDatePicker"),S=i("BsButton"),M=i("BsModal");return f(),_(B,null,[r(m,{title:"All Leaves"}),t("div",J,[t("div",Q,[t("div",R,[t("div",W,[X,t("div",$,[r(p,{target:"addnewcategory","button-class":"btn btn-info m-1"},{default:w(()=>[P("Add New Leave")]),_:1})])]),t("div",ee,[t("table",te,[ae,t("tbody",null,[(f(!0),_(B,null,F(n.attendancesData(),o=>(f(),_("tr",{key:o.id},[t("td",null,u(o.id),1),t("td",null,[t("span",{class:h(["alert text-capitalize",o.type==="C/In"?"alert-success":"alert-danger"])},u(o.type.replace("-"," ")),3)]),t("td",null,[t("span",{class:h(["alert text-capitalize",o.status===1?"alert-success":"alert-danger"])},u(o.status===1?"Approved":"pending"),3)]),t("td",null,u(e.readableDateFormat(o.date_time)),1)]))),128))])])]),r(b,{links:n.attendancesLink()},null,8,["links"])])])]),r(M,{"modal-title":"Add New Attendance Log","modal-id":"addnewcategory","modal-size":"modal-md"},{default:w(()=>[r(v,{class:"mb-4"}),t("form",{onSubmit:a[2]||(a[2]=A(()=>{},["prevent"]))},[r(L,{title:"Status",options:n.attendanceTypes,modelValue:n.newLogData.type,"onUpdate:modelValue":a[0]||(a[0]=o=>n.newLogData.type=o)},null,8,["options","modelValue"]),t("div",ne,[oe,r(k,{"start-date":new Date,"disabled-week-days":[5],modelValue:n.newLogData.date_time,"onUpdate:modelValue":a[1]||(a[1]=o=>n.newLogData.date_time=o),"min-date":n.minDate,"max-date":n.maxDate},null,8,["start-date","modelValue","min-date","max-date"])]),r(S,{"button-text":"Submit","button-type":"submit",onClick:n.addAttendanceLogFormSubmit,disabled:n.newLogData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const ge=O(G,[["render",se]]);export{ge as default};

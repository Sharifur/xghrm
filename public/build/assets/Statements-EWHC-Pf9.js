import{A as y}from"./AdminMaster-jmqLm_sX.js";import{P as V}from"./Pagination-Uchoye79.js";import{L as x,m,c as g,b as t,F as b,p as F,a as l,g as d,r as i,o as f,t as o,w as L}from"./app--AXdFNzx.js";import{a as U,B as A}from"./BsModalButton-HLM53q8B.js";import{B as P}from"./ValidationErrors-H8oC0H6u.js";import{F as I}from"./FlashMsg-CHEwolz9.js";import{B as T}from"./Input-k7Da387n.js";import{B as z}from"./Select-SwYCKsJd.js";import{B as N}from"./Button-7mSypOfa.js";import{s as Y}from"./vue3-datepicker.esm-ZaZjHLdk.js";import{M as O}from"./MediaUploader-gFd-i8bQ.js";import{S as v}from"./sweetalert2.all-0vlIJAXP.js";import{_ as j}from"./_plugin-vue_export-helper-x3n3nnut.js";const X=[{label:"Personal",value:0},{label:"Codecanyon",value:1},{label:"Themeforest",value:2},{label:"Clients",value:3}],q=[{label:"Xgenious",value:"xgenious"},{label:"bytesed",value:"bytesed"}],G={name:"Statements",layout:y,components:{Pagination:V,Link:x,BsModalButton:U,BsModal:A,BreezeValidationErrors:P,FlashMsg:I,BsSelect:z,BsButton:N,BsInput:T,Datepicker:Y,MediaUploader:O},data(){return{statementsData:m({title:"",from:0,month:new Date,personal_earning:"",office_earning:"",statement:"",en_username:"xgenious",percentage:null}),viewEarningData:{office_earning:0,personal_earning:0,total_earning:0},options:X,enUser:q,caldata:m({id:null})}},methods:{earningLists(){return this.$page.props.statements.data},earningListsLinks(){return this.$page.props.statements.links},getEarningMonth(e){const n=new Date(e).toLocaleDateString("en-US",{month:"long"}),u=new Date(e).getFullYear();return n+" "+u},viewEarning(e){axios.get(route("admin.earning.calculate",e.id)).then(n=>{Object.keys(n.data).length>1?(this.viewEarningData.office_earning=n.data.office_earning.toFixed(2),this.viewEarningData.personal_earning=n.data.personal_earning.toFixed(2),this.viewEarningData.total_earning=n.data.total_earning.toFixed(2)):v.fire("Error!","no data found","warning")}).catch(n=>{v.fire("Error!",n.message,"warning")})},deleteItem(e){this.$swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(n=>{const u=m({id:e.id});n.isConfirmed&&u.post(route("admin.earning.delete"),{onFinish:()=>{this.$swal.fire("Deleted!","Statement deleted.","success")}})})},editStatement(e){this.statementsData=m({title:e.title,from:e.from,month:new Date(e.month),personal_earning:e.personal_earning,office_earning:e.office_earning,statement:e.statement,en_username:e.en_username,percentage:e.percentage,id:e.id}),this.$page.props.flashMsg.type=void 0,this.$page.props.flashMsg.msg=void 0,this.$page.props.errors={}},viewStatement(e){this.statementsData=m({title:e.title,from:e.from,month:new Date(e.month),personal_earning:e.personal_earning,office_earning:e.office_earning,statement:e.statement,en_username:e.en_username,percentage:e.percentage,id:e.id}),this.$page.props.flashMsg.type=void 0,this.$page.props.flashMsg.msg=void 0,this.$page.props.errors={}},isPersonalOrClients(){return[0,3].includes(parseInt(this.statementsData.from))},updateStatement(){this.statementsData.post(route("admin.earning.update"))},getFormName(e){let n="Clients";return e===0?n="Personal":e===1?n="Codecanyon":e===2&&(n="Themeforest"),n}}},H={class:"row"},J={class:"col-lg-12"},K={class:"dashboard-settings margin-top-40"},Q=t("div",{class:"header-wrap d-flex justify-content-between"},[t("h2",{class:"dashboards-title margin-bottom-40"},"All Monthly Statements")],-1),R={class:"table-responsive"},W={class:"table table-stripped"},Z=t("thead",null,[t("th",null,"Id"),t("th",null,"Title"),t("th",null,"Account"),t("th",null,"Month"),t("th",null,"Action")],-1),$=t("i",{class:"fas fa-trash"},null,-1),tt=t("i",{class:"fas fa-calculator"},null,-1),et=t("i",{class:"fas fa-pencil-alt"},null,-1),nt=t("i",{class:"fas fa-eye"},null,-1),at={class:"table-responsive"},st={class:"table table-striped"},lt=t("td",null,"Title",-1),ot=t("td",null,"Account",-1),it=t("td",null,"Month",-1),rt=t("td",null,"Percentage",-1),dt=t("td",null,"From",-1),mt={class:"table-responsive"},ut={class:"table table-striped"},ct=t("td",null,"Office Earning (Approx)",-1),pt=t("td",null,"Personal Earning (Approx)",-1),_t=t("td",null,"Total Earning (Approx)",-1),gt={class:"form-group"},ft=t("label",null,"Month",-1),ht={class:"single-info-input margin-top-30"},bt=t("small",null,"select only csv file",-1);function vt(e,n,u,Dt,a,r){const D=i("Link"),c=i("BsModalButton"),B=i("Pagination"),p=i("BsModal"),w=i("BreezeValidationErrors"),M=i("FlashMsg"),S=i("BsInput"),h=i("BsSelect"),E=i("datepicker"),k=i("MediaUploader"),C=i("BsButton");return f(),g(b,null,[t("div",H,[t("div",J,[t("div",K,[Q,t("div",R,[t("table",W,[Z,t("tbody",null,[(f(!0),g(b,null,F(r.earningLists(),s=>(f(),g("tr",null,[t("td",null,o(s.id),1),t("td",null,o(s.title),1),t("td",null,o(s.en_username),1),t("td",null,o(r.getEarningMonth(s.month)),1),t("td",null,[l(D,{as:"button",class:"btn btn-danger m-1",onClick:_=>r.deleteItem(s)},{default:d(()=>[$]),_:2},1032,["onClick"]),l(c,{target:"viewEarning","button-class":"btn btn-secondary m-1",onClick:_=>r.viewEarning(s)},{default:d(()=>[tt]),_:2},1032,["onClick"]),l(c,{target:"editStatement","button-class":"btn btn-info m-1",onClick:_=>r.editStatement(s)},{default:d(()=>[et]),_:2},1032,["onClick"]),l(c,{target:"viewStatement","button-class":"btn btn-primary m-1",onClick:_=>r.viewStatement(s)},{default:d(()=>[nt]),_:2},1032,["onClick"])])]))),256))])])]),l(B,{links:r.earningListsLinks()},null,8,["links"])])])]),l(p,{"modal-title":"Statement Details","modal-id":"viewStatement","modal-size":"modal-md"},{default:d(()=>[t("div",at,[t("table",st,[t("tbody",null,[t("tr",null,[lt,t("td",null,o(a.statementsData.title),1)]),t("tr",null,[ot,t("td",null,o(a.statementsData.en_username),1)]),t("tr",null,[it,t("td",null,o(r.getEarningMonth(a.statementsData.month)),1)]),t("tr",null,[rt,t("td",null,o(a.statementsData.percentage)+"%",1)]),t("tr",null,[dt,t("td",null,o(r.getFormName(a.statementsData.from)),1)])])])])]),_:1}),l(p,{"modal-title":"Earning Details","modal-id":"viewEarning","modal-size":"modal-md"},{default:d(()=>[t("div",mt,[t("table",ut,[t("tbody",null,[t("tr",null,[ct,t("td",null,o(a.viewEarningData.office_earning),1)]),t("tr",null,[pt,t("td",null,o(a.viewEarningData.personal_earning),1)]),t("tr",null,[_t,t("td",null,o(a.viewEarningData.total_earning),1)])])])])]),_:1}),l(p,{"modal-title":"Update Statement","modal-id":"editStatement","modal-size":"modal-md"},{default:d(()=>[l(w,{class:"mb-4"}),l(M,{class:"mb-4"}),t("form",{onSubmit:n[5]||(n[5]=L(()=>{},["prevent"]))},[l(S,{title:"Title",modelValue:a.statementsData.title,"onUpdate:modelValue":n[0]||(n[0]=s=>a.statementsData.title=s)},null,8,["modelValue"]),l(h,{title:"From",options:a.options,modelValue:a.statementsData.from,"onUpdate:modelValue":n[1]||(n[1]=s=>a.statementsData.from=s)},null,8,["options","modelValue"]),l(h,{title:"Envato Username",options:a.enUser,modelValue:a.statementsData.en_username,"onUpdate:modelValue":n[2]||(n[2]=s=>a.statementsData.en_username=s)},null,8,["options","modelValue"]),t("div",gt,[ft,l(E,{modelValue:a.statementsData.month,"onUpdate:modelValue":n[3]||(n[3]=s=>a.statementsData.month=s)},null,8,["modelValue"])]),t("div",ht,[l(k,{"button-text":"Upload File",modelValue:a.statementsData.statement,"onUpdate:modelValue":n[4]||(n[4]=s=>a.statementsData.statement=s)},null,8,["modelValue"]),bt]),l(C,{"button-text":"Save Changes","button-type":"submit",onClick:r.updateStatement},null,8,["onClick"])],32)]),_:1})],64)}const At=j(G,[["render",vt]]);export{At as default};

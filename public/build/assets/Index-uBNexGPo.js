import{L as V,u as c,K as D,H as x,m as N,c as _,a as r,b as t,g as w,F as h,p as F,r as i,o as f,e as A,t as u,n as y,w as P}from"./app-UUZCODpM.js";import{P as z}from"./Pagination-Gux-Pf_Q.js";import{S as I}from"./sweetalert2.all-slebRwNb.js";import{B as j,a as T}from"./BsModalButton-TOoiUMtU.js";import{I as C}from"./Input-G5JjSfuq.js";import{S as H}from"./Select-T8bYViea.js";import{B as E}from"./Button-UPJdeFFj.js";import{B as U}from"./ValidationErrors-7Sd8wF6a.js";import{U as Y}from"./UserMaster-7sfQXhKl.js";import{_ as O}from"./_plugin-vue_export-helper-x3n3nnut.js";function b(e){const o=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&o==="[object Date]"?new e.constructor(+e):typeof e=="number"||o==="[object Number]"||typeof e=="string"||o==="[object String]"?new Date(e):new Date(NaN)}function B(e,o){return e instanceof Date?new e.constructor(o):new Date(o)}function K(e,o){const s=b(e);if(isNaN(o))return B(e,NaN);if(!o)return s;const a=s.getDate(),l=B(e,s.getTime());l.setMonth(s.getMonth()+o+1,0);const d=l.getDate();return a>=d?l:(s.setFullYear(l.getFullYear(),l.getMonth(),a),s)}function W(e){return b(e).getMonth()}function q(e){return b(e).getFullYear()}const G={name:"Index",layout:Y,components:{Pagination:z,Link:V,usePage:c,BsModal:j,BsModalButton:T,BsInput:C,BsSelect:H,BsButton:E,BreezeValidationErrors:U,VueDatePicker:D,Head:x},setup(){const e=[{label:"Leave",value:"leave"},{label:"Sick Leave",value:"sick-leave"},{label:"Work From Home",value:"work-from-home"}],o=N({employee_id:null,type:null,date_time:null}),s=new Date,a=K(new Date(q(new Date),W(new Date)),1);function l(){return c().props.value.attendance_logs.data}function d(){return c().props.value.attendance_logs.links}function m(){o.post(route("user.leaves.new"),{onSuccess:g=>{I.fire("Success","new attendance log added","success"),o.reset("employee_id","type","date_time","name")}})}function p(){return c().props.value.employees}return{attendancesData:l,attendancesLink:d,addAttendanceLogFormSubmit:m,attendanceTypes:e,newLogData:o,employeesList:p,VueDatePicker:D,minDate:s,maxDate:a}}},J={class:"row"},Q={class:"col-lg-12"},R={class:"dashboard-settings margin-top-40 margin-bottom-30"},X={class:"header-wrap d-flex justify-content-between"},Z=t("h2",{class:"dashboards-title margin-bottom-40"},"All Leaves",-1),$={class:"btn-wrapper"},ee={class:"table-wrap table-responsive"},te={class:"table table-light table-secondary"},oe=t("thead",null,[t("th",null,"ID"),t("th",null,"Type"),t("th",null,"Status"),t("th",null,"Date")],-1),ae={class:"single-info-input margin-top-30"},ne=t("label",{class:"info-title"},"Date Time",-1);function se(e,o,s,a,l,d){const m=i("Head"),p=i("BsModalButton"),g=i("Pagination"),v=i("BreezeValidationErrors"),k=i("BsSelect"),L=i("VueDatePicker"),S=i("BsButton"),M=i("BsModal");return f(),_(h,null,[r(m,{title:"All Leaves"}),t("div",J,[t("div",Q,[t("div",R,[t("div",X,[Z,t("div",$,[r(p,{target:"addnewcategory","button-class":"btn btn-info m-1"},{default:w(()=>[A("Add New Leave")]),_:1})])]),t("div",ee,[t("table",te,[oe,t("tbody",null,[(f(!0),_(h,null,F(a.attendancesData(),n=>(f(),_("tr",{key:n.id},[t("td",null,u(n.id),1),t("td",null,[t("span",{class:y(["alert text-capitalize",n.type])},u(n.type.replaceAll("-"," ")),3)]),t("td",null,[t("span",{class:y(["alert text-capitalize",n.status===1?"alert-success":"alert-danger"])},u(n.status===1?"Approved":"pending"),3)]),t("td",null,u(e.readableDateFormat(n.date_time)),1)]))),128))])])]),r(g,{links:a.attendancesLink()},null,8,["links"])])])]),r(M,{"modal-title":"Add New Attendance Log","modal-id":"addnewcategory","modal-size":"modal-md"},{default:w(()=>[r(v,{class:"mb-4"}),t("form",{onSubmit:o[2]||(o[2]=P(()=>{},["prevent"]))},[r(k,{title:"Status",options:a.attendanceTypes,modelValue:a.newLogData.type,"onUpdate:modelValue":o[0]||(o[0]=n=>a.newLogData.type=n)},null,8,["options","modelValue"]),t("div",ae,[ne,r(L,{"start-date":new Date,"disabled-week-days":[5],modelValue:a.newLogData.date_time,"onUpdate:modelValue":o[1]||(o[1]=n=>a.newLogData.date_time=n),"min-date":a.minDate,"max-date":a.maxDate},null,8,["start-date","modelValue","min-date","max-date"])]),r(S,{"button-text":"Submit","button-type":"submit",onClick:a.addAttendanceLogFormSubmit,disabled:a.newLogData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const be=O(G,[["render",se]]);export{be as default};

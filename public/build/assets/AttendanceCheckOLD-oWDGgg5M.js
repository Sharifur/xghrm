import{L as S,H as x,l,u as A,m as H,c as D,a as i,b as e,t as s,g as b,w as F,e as o,h as N,F as L,x as O,r as m,o as y,p as W,n as M}from"./app-4SIRjX_-.js";import{A as U}from"./AdminMaster-F3W19dqQ.js";import{S as j}from"./Select-giA3afjH.js";import{B as z}from"./Button-kPmoh_j1.js";import{s as I}from"./vue3-datepicker.esm-WsfnQH3X.js";import{B as P}from"./ValidationErrors-D8g6Egbk.js";import{S as V}from"./sweetalert2.all-jdneIRbX.js";import{_ as T}from"./_plugin-vue_export-helper-x3n3nnut.js";const G={name:"AttendanceCheck",layout:U,components:{BsSelect:j,BsButton:z,Datepicker:I,ValidationErrors:P,Link:S,Head:x},setup(){const c=l(0),n=l(0),C=l(0),t=l(0),g=l(0),k=l(0),h=l(0),r=l(!1),_=l([]),p=A().props.value.allEmployees,f=H({employee_id:p.id,startDate:new Date,endDate:new Date});function w(){O.post(route("admin.employee.attendance.post"),{...f}).then(a=>{if(Object.keys(a.data.logs).length>1){let E=a.data.logs,u=[];E.forEach((v,B)=>{u.push({key:B,customData:{title:`${v.type}: ${new Date(v.date_time).toLocaleTimeString("en-US",{timeZone:"Asia/Dhaka"})} `,class:v.type},dates:new Date(v.date_time)})}),_.value=u,r.value=!0,c.value=a.data.holidayCount,n.value=a.data.leaveCount,C.value=a.data.inCount,t.value=a.data.outCount,g.value=a.data.sickLeaveCount,k.value=a.data.paidLeaveCount,h.value=a.data.workFormHome}else V.fire("Error!","NO Data found for selected Dates","warning")}).catch(a=>{V.fire("Error!",a.message,"warning")})}new Date().getMonth(),new Date().getFullYear();function d(){return{masks:{weekdays:"WWW"},attributes:_.value}}return{employeeData:f,getAttendanceDetails:w,employeeDetails:p,CalendarData:d,attendanceShow:r,CalendarAttributes:_,holidayCount:c,leaveCount:n,inCount:C,outCount:t,sickLeaveCount:g,paidLeaveCount:k,workFormHome:h}}},X={class:"row"},Y={class:"col-lg-12"},Z={class:"dashboard-settings margin-top-40"},q={class:"header-wrap d-flex justify-content-between"},J={class:"dashboards-title"},K={class:"btn-wrp"},Q={class:"edit-profile"},R={class:"profile-info-dashboard"},$={class:"dashboard-profile-flex"},ee={class:"dashboard-address-details"},te={class:"single-dashboard-input"},ae={class:"single-info-input margin-top-30"},se=e("label",{class:"info-title"}," Start Date ",-1),oe={class:"single-dashboard-input"},ne={class:"single-info-input margin-top-30"},le=e("label",{class:"info-title"}," End Date",-1),ie={class:"btn-wrapper margin-top-35"},de={key:0,class:"cleardar-wrapper"},ce={class:"head-rapw margin-top-40"},re=e("h4",null,"Color Explanation",-1),me={class:"color-explanation"},_e={class:"holiday"},pe={class:"badge"},ue={class:"leave"},he={class:"badge"},fe={class:"C/In"},ve={class:"badge"},De={class:"C/Out"},be={class:"badge"},ye={class:"sick-leave"},Ce={class:"badge"},ge={class:"paid-leave"},ke={class:"badge"},we={class:"paid-leave"},Ee={class:"badge"},Le={class:"date-box-wrapper"},Ve={class:"day-label"},Be={class:"custom-data-wrapper"};function Se(c,n,C,t,g,k){const h=m("Head"),r=m("Link"),_=m("ValidationErrors"),p=m("Datepicker"),f=m("BsButton"),w=m("Calendar");return y(),D(L,null,[i(h,{title:"Employee Attendance Check - Xgenious"}),e("div",X,[e("div",Y,[e("div",Z,[e("div",q,[e("h2",J,s(t.employeeDetails.name)+" Attendance Check",1),e("div",K,[i(r,{class:"btn btn-info m-1",href:c.route("admin.employee.all")},{default:b(()=>[o("All Employees")]),_:1},8,["href"]),i(r,{class:"btn btn-secondary m-1",href:c.route("admin.employee.edit",t.employeeDetails.id)},{default:b(()=>[o("Edit Employee Details")]),_:1},8,["href"]),i(r,{class:"btn btn-primary m-1",href:c.route("admin.employee.view",t.employeeDetails.id)},{default:b(()=>[o("View Employee Details")]),_:1},8,["href"])])]),e("div",Q,[e("div",R,[i(_),e("div",$,[e("div",ee,[e("form",{onSubmit:n[2]||(n[2]=F(()=>{},["prevent"]))},[e("div",te,[e("div",ae,[se,i(p,{modelValue:t.employeeData.startDate,"onUpdate:modelValue":n[0]||(n[0]=d=>t.employeeData.startDate=d)},null,8,["modelValue"])])]),e("div",oe,[e("div",ne,[le,i(p,{modelValue:t.employeeData.endDate,"onUpdate:modelValue":n[1]||(n[1]=d=>t.employeeData.endDate=d)},null,8,["modelValue"])])]),e("div",ie,[i(f,{"button-text":"Get Details",onClick:t.getAttendanceDetails,classes:"cmn-btn btn-bg-1"},null,8,["onClick"])])],32)])])])]),t.attendanceShow?(y(),D("div",de,[e("div",ce,[re,e("ul",me,[e("li",_e,[o("Holiday"),e("span",pe,s(t.holidayCount),1)]),e("li",ue,[o("leave"),e("span",he,s(t.leaveCount),1)]),e("li",fe,[o("C/In"),e("span",ve,s(t.inCount),1)]),e("li",De,[o("C/Out"),e("span",be,s(t.outCount),1)]),e("li",ye,[o("Sick Leave"),e("span",Ce,s(t.sickLeaveCount),1)]),e("li",ge,[o("Paid Leave"),e("span",ke,s(t.paidLeaveCount),1)]),e("li",we,[o("Work From Home"),e("span",Ee,s(t.workFormHome),1)])])]),i(w,{class:"custom-calendar-outer-wrap",masks:t.CalendarData().masks,attributes:t.CalendarData().attributes,"disable-page-swipe":"","is-expanded":""},{"day-content":b(({day:d,attributes:a})=>[e("div",Le,[e("span",Ve,s(d.day),1),e("div",Be,[(y(!0),D(L,null,W(a,({key:E,customData:u})=>(y(),D("p",{key:E,class:M(["data-item",u.class])},s(u.title),3))),128))])])]),_:1},8,["masks","attributes"])])):N("",!0)])])])],64)}const Ue=T(G,[["render",Se]]);export{Ue as default};

import{A as G}from"./AdminMaster-DauEAptr.js";import{H as j,r as z,c,o as u,a as R,b as a,d as M,h as w,f as p,e as d,A as B,t as i,F as N,p as Y,n as b,$ as W,w as Q,i as _,l as v,B as J,y as g,C as K}from"./app-msVezWLg.js";import{S as k}from"./sweetalert2.esm.all-acGi8jXx.js";import{_ as X}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={layout:G,name:"Budgets",components:{Head:j},props:{budgets:Array},setup(C){const t=v("current"),x=v(!1),s=v(null),f=v(!1),r=v([...C.budgets||[]]),l=J({name:"",description:"",allocated_amount:0,icon:"fas fa-chart-pie",notes:"",auto_forecast:1}),o=g(()=>r.value.reduce((e,n)=>e+n.allocated_amount,0)),h=g(()=>r.value.reduce((e,n)=>e+n.used_amount,0)),q=g(()=>r.value.reduce((e,n)=>e+(n.forecast_next_quarter||0),0)),P=g(()=>r.value.filter(e=>e.used_amount/e.allocated_amount*100>=80).length),A=g(()=>{const e=new Date,y=(Math.floor(e.getMonth()/3)+1)*3,H=new Date(e.getFullYear(),y,0)-e;return Math.ceil(H/(1e3*60*60*24))}),m=e=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(e||0),T=e=>{const n=e.used_amount/e.allocated_amount*100;return n>=100?"budget-over-limit":n>=80?"budget-near-limit":""},D=e=>{const n=e.used_amount/e.allocated_amount*100;return n>=100?"bg-danger":n>=80?"bg-warning":n>=60?"bg-info":"bg-success"},V=e=>{const n=e.used_amount/e.allocated_amount*100;return n>=100?"bg-danger":n>=80?"bg-warning":"bg-success"},F=e=>{const n=e.used_amount/e.allocated_amount*100;return n>=100?"Over Budget":n>=80?"Near Limit":"On Track"},E=()=>{l.name="",l.description="",l.allocated_amount=0,l.icon="fas fa-chart-pie",l.notes="",l.auto_forecast=1},U=e=>{s.value=e,l.name=e.name,l.description=e.description,l.allocated_amount=e.allocated_amount,l.icon=e.icon,l.notes=e.notes,l.auto_forecast=e.auto_forecast},S=()=>{x.value=!1,s.value=null,E()},I=async()=>{f.value=!0;try{const e={...l,id:s.value?s.value.id:Date.now(),used_amount:s.value?s.value.used_amount:0,remaining_amount:l.allocated_amount-(s.value?s.value.used_amount:0),forecast_next_quarter:l.allocated_amount*1.1};if(s.value){const n=r.value.findIndex(y=>y.id===s.value.id);r.value[n]=e}else r.value.push(e);S(),k.fire({title:"Success!",text:`Budget ${s.value?"updated":"created"} successfully`,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0})}catch(e){console.error("Save failed:",e),k.fire({title:"Error!",text:"Failed to save budget",icon:"error",confirmButtonColor:"#e74a3b"})}finally{f.value=!1}},L=e=>{k.fire({title:e.name+" Details",html:`
                    <div class="text-left">
                        <p><strong>Allocated:</strong> ৳${m(e.allocated_amount)}</p>
                        <p><strong>Used:</strong> ৳${m(e.used_amount)}</p>
                        <p><strong>Remaining:</strong> ৳${m(e.remaining_amount)}</p>
                        ${e.forecast_next_quarter?`<p><strong>Next Quarter Forecast:</strong> ৳${m(e.forecast_next_quarter)}</p>`:""}
                        <p><strong>Status:</strong> ${F(e)}</p>
                        ${e.description?`<p><strong>Description:</strong> ${e.description}</p>`:""}
                    </div>
                `,confirmButtonColor:"#007bff"})},O=()=>{console.log("Period changed to:",t.value)};return K(()=>{r.value.length===0&&(r.value=[{id:1,name:"Technology & Software",description:"Hosting, domains, software subscriptions, development tools",allocated_amount:15e3,used_amount:8500,remaining_amount:6500,icon:"fas fa-laptop",forecast_next_quarter:16500,auto_forecast:1},{id:2,name:"Marketing & Advertising",description:"Google Ads, Facebook Ads, content creation, networking",allocated_amount:2e4,used_amount:16800,remaining_amount:3200,icon:"fas fa-bullhorn",forecast_next_quarter:25e3,auto_forecast:1},{id:3,name:"Office & Operations",description:"Electricity, internet, phone, office supplies",allocated_amount:12e3,used_amount:5400,remaining_amount:6600,icon:"fas fa-building",forecast_next_quarter:13200,auto_forecast:1}])}),{selectedPeriod:t,showCreateBudget:x,editingBudget:s,saving:f,budgets:r,budgetForm:l,totalBudget:o,currentQuarterSpent:h,forecastNextQuarter:q,nearLimitCount:P,daysLeftInQuarter:A,formatNumber:m,getBudgetCardClass:T,getProgressBarClass:D,getStatusBadgeClass:V,getBudgetStatus:F,editBudget:U,closeModal:S,saveBudget:I,viewBudgetDetails:L,updatePeriod:O}}},$={class:"row"},aa={class:"col-lg-12"},ta={class:"dashboard-settings margin-top-40"},sa={class:"card mb-4"},ea={class:"card-header d-flex justify-content-between align-items-center"},oa={class:"d-flex gap-2"},na={class:"card-body"},la={class:"row"},ia={class:"col-md-4 text-end"},ra={class:"budget-summary"},da={class:"total-budget"},ca={class:"h5 mb-0 text-primary"},ua={class:"row mb-4"},ma={class:"col-md-3"},ba={class:"stat-card"},va={class:"stat-content"},ga={class:"stat-value"},fa={class:"col-md-3"},pa={class:"stat-card"},_a={class:"stat-content"},xa={class:"stat-value"},ha={class:"col-md-3"},ya={class:"stat-card"},wa={class:"stat-content"},Ba={class:"stat-value"},ka={class:"col-md-3"},Ca={class:"stat-card"},Fa={class:"stat-content"},Sa={class:"stat-value"},Ma={class:"row"},Na={class:"budget-header"},Qa={class:"budget-icon"},qa={class:"budget-actions"},Pa=["onClick"],Aa=["onClick"],Ta={class:"budget-content"},Da={class:"budget-description"},Va={class:"budget-progress mb-3"},Ea={class:"d-flex justify-content-between mb-1"},Ua={class:"progress"},Ia={class:"budget-details"},La={class:"budget-amounts"},Oa={class:"amount-row"},Ha={class:"value"},Ga={class:"amount-row"},ja={key:0,class:"amount-row"},za={class:"value text-info"},Ra={class:"budget-status mt-2"},Ya={key:0,class:"col-12"},Wa={class:"modal-header"},Ja={class:"modal-body"},Ka={class:"row"},Xa={class:"col-md-6 mb-3"},Za={class:"col-md-6 mb-3"},$a={class:"row"},at={class:"col-md-6 mb-3"},tt={class:"col-md-6 mb-3"},st={class:"mb-3"},et={class:"mb-3"},ot={class:"d-flex justify-content-end gap-2"},nt=["disabled"];function lt(C,t,x,s,f,r){const l=z("Head");return u(),c(N,null,[R(l,{title:"Budget Management & Forecasting"}),a("div",$,[a("div",aa,[a("div",ta,[a("div",sa,[a("div",ea,[t[16]||(t[16]=a("h4",{class:"mb-0"},[a("i",{class:"fas fa-chart-pie me-2"}),p(" Budget Management & Forecasting ")],-1)),a("div",oa,[d(a("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.selectedPeriod=o),onChange:t[1]||(t[1]=(...o)=>s.updatePeriod&&s.updatePeriod(...o)),class:"form-select form-select-sm",style:{width:"180px"}},t[14]||(t[14]=[a("option",{value:"current"},"Current Quarter",-1),a("option",{value:"next"},"Next Quarter",-1),a("option",{value:"annual"},"Annual View",-1)]),544),[[B,s.selectedPeriod]]),a("button",{onClick:t[2]||(t[2]=o=>s.showCreateBudget=!0),class:"btn btn-primary"},t[15]||(t[15]=[a("i",{class:"fas fa-plus"},null,-1),p(" Create Budget ")]))])]),a("div",na,[a("div",la,[t[18]||(t[18]=a("div",{class:"col-md-8"},[a("p",{class:"text-muted mb-0"}," Plan and track your business expenses across different categories with quarterly forecasting. Monitor spending patterns and predict future financial needs based on historical data. ")],-1)),a("div",ia,[a("div",ra,[a("div",da,[t[17]||(t[17]=a("small",{class:"text-muted"},"Total Budget",-1)),a("div",ca,"৳"+i(s.formatNumber(s.totalBudget)),1)])])])])])]),t[43]||(t[43]=M('<div class="card mb-4 entrepreneur-guide" data-v-ab9b0c90><div class="card-header bg-warning-light" data-v-ab9b0c90><h6 class="text-warning mb-0" data-v-ab9b0c90><i class="fas fa-lightbulb me-2" data-v-ab9b0c90></i> Solo Entrepreneur Budget &amp; Forecasting Guide </h6></div><div class="card-body" data-v-ab9b0c90><div class="row" data-v-ab9b0c90><div class="col-md-6" data-v-ab9b0c90><h6 class="text-primary mb-3" data-v-ab9b0c90><i class="fas fa-question-circle me-2" data-v-ab9b0c90></i> What is Budget Management? </h6><p class="mb-3 text-muted" data-v-ab9b0c90> Budget management helps you <strong data-v-ab9b0c90>plan and control spending</strong> by setting limits for different business categories and tracking actual expenses against those limits. </p><ul class="list-unstyled mb-4" data-v-ab9b0c90><li class="mb-2" data-v-ab9b0c90><i class="fas fa-check text-success me-2" data-v-ab9b0c90></i><strong data-v-ab9b0c90>Plan Ahead:</strong> Set spending limits for each category </li><li class="mb-2" data-v-ab9b0c90><i class="fas fa-check text-success me-2" data-v-ab9b0c90></i><strong data-v-ab9b0c90>Track Progress:</strong> Monitor actual vs budgeted amounts </li><li class="mb-2" data-v-ab9b0c90><i class="fas fa-check text-success me-2" data-v-ab9b0c90></i><strong data-v-ab9b0c90>Forecast Future:</strong> Predict next quarter&#39;s needs </li><li class="mb-2" data-v-ab9b0c90><i class="fas fa-check text-success me-2" data-v-ab9b0c90></i><strong data-v-ab9b0c90>Stay on Track:</strong> Get alerts when nearing limits </li></ul><h6 class="text-primary mb-3" data-v-ab9b0c90><i class="fas fa-crystal-ball me-2" data-v-ab9b0c90></i> Quarterly Forecasting Benefits </h6><ul class="list-unstyled" data-v-ab9b0c90><li class="mb-2" data-v-ab9b0c90><i class="fas fa-arrow-right text-info me-2" data-v-ab9b0c90></i> Plan for seasonal business changes </li><li class="mb-2" data-v-ab9b0c90><i class="fas fa-arrow-right text-info me-2" data-v-ab9b0c90></i> Prepare for equipment upgrades </li><li class="mb-2" data-v-ab9b0c90><i class="fas fa-arrow-right text-info me-2" data-v-ab9b0c90></i> Budget for marketing campaigns </li><li class="mb-2" data-v-ab9b0c90><i class="fas fa-arrow-right text-info me-2" data-v-ab9b0c90></i> Ensure adequate cash flow </li></ul></div><div class="col-md-6" data-v-ab9b0c90><h6 class="text-primary mb-3" data-v-ab9b0c90><i class="fas fa-user-tie me-2" data-v-ab9b0c90></i> Solo Business Budget Categories </h6><div class="budget-categories" data-v-ab9b0c90><div class="category-example mb-3" data-v-ab9b0c90><strong class="text-success d-block mb-2" data-v-ab9b0c90><i class="fas fa-laptop me-2" data-v-ab9b0c90></i>Technology &amp; Software </strong><small class="text-muted d-block" data-v-ab9b0c90> Hosting, domains, Adobe CC, Figma Pro, development tools, equipment repairs </small><div class="example-amounts mt-1" data-v-ab9b0c90><span class="badge bg-light text-dark" data-v-ab9b0c90>Q1: ৳15,000</span><span class="badge bg-light text-dark" data-v-ab9b0c90>Q2: ৳8,000</span></div></div><div class="category-example mb-3" data-v-ab9b0c90><strong class="text-info d-block mb-2" data-v-ab9b0c90><i class="fas fa-bullhorn me-2" data-v-ab9b0c90></i>Marketing &amp; Growth </strong><small class="text-muted d-block" data-v-ab9b0c90> Google Ads, Facebook Ads, content creation, networking events, conferences </small><div class="example-amounts mt-1" data-v-ab9b0c90><span class="badge bg-light text-dark" data-v-ab9b0c90>Q1: ৳20,000</span><span class="badge bg-light text-dark" data-v-ab9b0c90>Q2: ৳25,000</span></div></div><div class="category-example mb-3" data-v-ab9b0c90><strong class="text-warning d-block mb-2" data-v-ab9b0c90><i class="fas fa-building me-2" data-v-ab9b0c90></i>Operations &amp; Office </strong><small class="text-muted d-block" data-v-ab9b0c90> Electricity, internet, phone, office supplies, co-working space </small><div class="example-amounts mt-1" data-v-ab9b0c90><span class="badge bg-light text-dark" data-v-ab9b0c90>Q1: ৳12,000</span><span class="badge bg-light text-dark" data-v-ab9b0c90>Q2: ৳12,000</span></div></div></div><div class="alert alert-warning mt-3" data-v-ab9b0c90><strong data-v-ab9b0c90><i class="fas fa-star me-2" data-v-ab9b0c90></i>Pro Forecasting Tips: </strong><ul class="mb-0 mt-2" data-v-ab9b0c90><li data-v-ab9b0c90>Review last 6 months to predict next quarter</li><li data-v-ab9b0c90>Add 10-20% buffer for unexpected expenses</li><li data-v-ab9b0c90>Plan for seasonal changes in your business</li><li data-v-ab9b0c90>Set aside money for annual software renewals</li></ul></div></div></div></div></div>',1)),a("div",ua,[a("div",ma,[a("div",ba,[t[20]||(t[20]=a("div",{class:"stat-icon bg-primary"},[a("i",{class:"fas fa-wallet"})],-1)),a("div",va,[a("div",ga,"৳"+i(s.formatNumber(s.currentQuarterSpent)),1),t[19]||(t[19]=a("div",{class:"stat-label"},"Current Quarter Spent",-1))])])]),a("div",fa,[a("div",pa,[t[22]||(t[22]=a("div",{class:"stat-icon bg-success"},[a("i",{class:"fas fa-chart-line"})],-1)),a("div",_a,[a("div",xa,"৳"+i(s.formatNumber(s.forecastNextQuarter)),1),t[21]||(t[21]=a("div",{class:"stat-label"},"Next Quarter Forecast",-1))])])]),a("div",ha,[a("div",ya,[t[24]||(t[24]=a("div",{class:"stat-icon bg-warning"},[a("i",{class:"fas fa-exclamation-triangle"})],-1)),a("div",wa,[a("div",Ba,i(s.nearLimitCount),1),t[23]||(t[23]=a("div",{class:"stat-label"},"Budgets Near Limit",-1))])])]),a("div",ka,[a("div",Ca,[t[26]||(t[26]=a("div",{class:"stat-icon bg-info"},[a("i",{class:"fas fa-calendar-alt"})],-1)),a("div",Fa,[a("div",Sa,i(s.daysLeftInQuarter),1),t[25]||(t[25]=a("div",{class:"stat-label"},"Days Left in Quarter",-1))])])])]),a("div",Ma,[(u(!0),c(N,null,Y(s.budgets,o=>(u(),c("div",{key:o.id,class:"col-lg-6 col-xl-4 mb-4"},[a("div",{class:b(["budget-card",s.getBudgetCardClass(o)])},[a("div",Na,[a("div",Qa,[a("i",{class:b(o.icon||"fas fa-chart-pie")},null,2)]),a("div",qa,[a("button",{onClick:h=>s.editBudget(o),class:"btn btn-sm btn-outline-primary"},t[27]||(t[27]=[a("i",{class:"fas fa-edit"},null,-1)]),8,Pa),a("button",{onClick:h=>s.viewBudgetDetails(o),class:"btn btn-sm btn-outline-info"},t[28]||(t[28]=[a("i",{class:"fas fa-chart-bar"},null,-1)]),8,Aa)])]),a("div",Ta,[a("h6",null,i(o.name),1),a("p",Da,i(o.description||"No description"),1),a("div",Va,[a("div",Ea,[a("small",null,"Used: ৳"+i(s.formatNumber(o.used_amount)),1),a("small",null,i(Math.round(o.used_amount/o.allocated_amount*100))+"%",1)]),a("div",Ua,[a("div",{class:b(["progress-bar",s.getProgressBarClass(o)]),style:W(`width: ${Math.min(o.used_amount/o.allocated_amount*100,100)}%`)},null,6)])]),a("div",Ia,[a("div",La,[a("div",Oa,[t[29]||(t[29]=a("span",{class:"label"},"Allocated:",-1)),a("span",Ha,"৳"+i(s.formatNumber(o.allocated_amount)),1)]),a("div",Ga,[t[30]||(t[30]=a("span",{class:"label"},"Remaining:",-1)),a("span",{class:b(["value",o.remaining_amount<0?"text-danger":"text-success"])}," ৳"+i(s.formatNumber(o.remaining_amount)),3)]),o.forecast_next_quarter?(u(),c("div",ja,[t[31]||(t[31]=a("span",{class:"label"},"Next Quarter Forecast:",-1)),a("span",za,"৳"+i(s.formatNumber(o.forecast_next_quarter)),1)])):w("",!0)])]),a("div",Ra,[a("span",{class:b(["badge",s.getStatusBadgeClass(o)])},i(s.getBudgetStatus(o)),3)])])],2)]))),128)),s.budgets.length===0?(u(),c("div",Ya,t[32]||(t[32]=[a("div",{class:"text-center py-5"},[a("i",{class:"fas fa-chart-pie text-muted mb-3",style:{"font-size":"4rem"}}),a("h5",{class:"text-muted"},"No Budgets Created"),a("p",{class:"text-muted"},'Click "Create Budget" to set up your first budget category with forecasting.')],-1)]))):w("",!0)]),s.showCreateBudget||s.editingBudget?(u(),c("div",{key:0,class:"modal-overlay",onClick:t[13]||(t[13]=(...o)=>s.closeModal&&s.closeModal(...o))},[a("div",{class:"modal-content large-modal",onClick:t[12]||(t[12]=Q(()=>{},["stop"]))},[a("div",Wa,[a("h5",null,i(s.editingBudget?"Edit":"Create")+" Budget",1),a("button",{onClick:t[3]||(t[3]=(...o)=>s.closeModal&&s.closeModal(...o)),class:"btn-close"},"×")]),a("div",Ja,[a("form",{onSubmit:t[11]||(t[11]=Q((...o)=>s.saveBudget&&s.saveBudget(...o),["prevent"]))},[a("div",Ka,[a("div",Xa,[t[33]||(t[33]=a("label",{class:"form-label"},"Budget Name *",-1)),d(a("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>s.budgetForm.name=o),type:"text",class:"form-control",required:"",placeholder:"e.g., Technology & Software"},null,512),[[_,s.budgetForm.name]])]),a("div",Za,[t[34]||(t[34]=a("label",{class:"form-label"},"Quarterly Amount (BDT) *",-1)),d(a("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>s.budgetForm.allocated_amount=o),type:"number",class:"form-control",step:"0.01",min:"0",required:"",placeholder:"15000.00"},null,512),[[_,s.budgetForm.allocated_amount,void 0,{number:!0}]])])]),a("div",$a,[a("div",at,[t[36]||(t[36]=a("label",{class:"form-label"},"Category Icon",-1)),d(a("select",{"onUpdate:modelValue":t[6]||(t[6]=o=>s.budgetForm.icon=o),class:"form-select"},t[35]||(t[35]=[M('<option value="fas fa-chart-pie" data-v-ab9b0c90>Chart Pie (Default)</option><option value="fas fa-laptop" data-v-ab9b0c90>Technology &amp; Software</option><option value="fas fa-bullhorn" data-v-ab9b0c90>Marketing &amp; Advertising</option><option value="fas fa-building" data-v-ab9b0c90>Office &amp; Operations</option><option value="fas fa-car" data-v-ab9b0c90>Travel &amp; Transportation</option><option value="fas fa-graduation-cap" data-v-ab9b0c90>Education &amp; Training</option><option value="fas fa-handshake" data-v-ab9b0c90>Professional Services</option><option value="fas fa-shield-alt" data-v-ab9b0c90>Insurance &amp; Legal</option><option value="fas fa-cogs" data-v-ab9b0c90>Equipment &amp; Maintenance</option><option value="fas fa-users" data-v-ab9b0c90>Outsourcing &amp; Contractors</option>',10)]),512),[[B,s.budgetForm.icon]])]),a("div",tt,[t[38]||(t[38]=a("label",{class:"form-label"},"Auto-Forecast Next Quarter",-1)),d(a("select",{"onUpdate:modelValue":t[7]||(t[7]=o=>s.budgetForm.auto_forecast=o),class:"form-select"},t[37]||(t[37]=[a("option",{value:"1"},"Yes - Based on current usage",-1),a("option",{value:"0"},"No - Manual planning only",-1)]),512),[[B,s.budgetForm.auto_forecast]])])]),a("div",st,[t[39]||(t[39]=a("label",{class:"form-label"},"Description",-1)),d(a("textarea",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.budgetForm.description=o),class:"form-control",rows:"3",placeholder:"What expenses will this budget cover?"},null,512),[[_,s.budgetForm.description]])]),a("div",et,[t[40]||(t[40]=a("label",{class:"form-label"},"Budget Notes",-1)),d(a("textarea",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.budgetForm.notes=o),class:"form-control",rows:"2",placeholder:"Internal notes about this budget category"},null,512),[[_,s.budgetForm.notes]])]),t[42]||(t[42]=a("div",{class:"alert alert-info"},[a("h6",null,[a("i",{class:"fas fa-crystal-ball me-2"}),p("Forecasting Information")]),a("p",{class:"mb-0"},"The system will analyze your historical spending in this category and automatically suggest budget amounts for next quarter. You can always adjust these suggestions manually.")],-1)),a("div",ot,[a("button",{type:"button",onClick:t[10]||(t[10]=(...o)=>s.closeModal&&s.closeModal(...o)),class:"btn btn-secondary"}," Cancel "),a("button",{type:"submit",class:"btn btn-primary",disabled:s.saving},[t[41]||(t[41]=a("i",{class:"fas fa-save"},null,-1)),p(" "+i(s.saving?"Saving...":"Save Budget"),1)],8,nt)])],32)])])])):w("",!0)])])])],64)}const mt=X(Z,[["render",lt],["__scopeId","data-v-ab9b0c90"]]);export{mt as default};

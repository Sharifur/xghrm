import{A as V}from"./AdminMaster-F3W19dqQ.js";import{K as x,L as I,u as d,H as P,m as p,c as h,a,b as e,t as i,g as f,F as D,p as T,r as l,o as L,e as F,n as M,d as z,s as E,w as H}from"./app-4SIRjX_-.js";import{P as N}from"./Pagination-xRw6b4Wn.js";import{S as c}from"./sweetalert2.all-jdneIRbX.js";import{B as Y,a as U}from"./BsModalButton-lYNjOSpS.js";import{I as O}from"./Input-IwUZEHaE.js";import{S as A}from"./Select-giA3afjH.js";import{B as K}from"./Button-kPmoh_j1.js";import{B as j}from"./ValidationErrors-D8g6Egbk.js";import{s as W}from"./vue3-datepicker.esm-WsfnQH3X.js";import{_ as Z}from"./_plugin-vue_export-helper-x3n3nnut.js";const q={name:"Index",layout:V,components:{VueDatePicker:x,Select:A,Pagination:N,Link:I,usePage:d,BsModal:Y,BsModalButton:U,BsInput:O,BsSelect:A,BsButton:K,BreezeValidationErrors:j,Datepicker:W,Head:P},setup(){const _=[{label:"Pending",value:0},{label:"Approved",value:1}],n=[{label:"C/In",value:"C/In"},{label:"C/Out",value:"C/Out"},{label:"Leave",value:"leave"},{label:"Sick Leave",value:"sick-leave"},{label:"Paid Leave",value:"paid-leave"},{label:"Holiday",value:"holiday"},{label:"Work From Home",value:"work-from-home"}],g=p({filter:null}),t=p({employee_id:null,type:null,date_time:null}),k=d().props.value.page_type;function C(){g.get(route("admin.employee.attendance.logs"))}function b(){return d().props.value.attendance_logs.data}function v(){return d().props.value.attendance_logs.links}function m(s){c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&p({id:s.id}).post(route("admin.employee.attendance.logs.delete"),{onSuccess:()=>{c.fire("Deleted","item removed from system","warning")}})})}function y(s){c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Approve it!"}).then(r=>{r.isConfirmed&&p({id:s}).post(route("admin.employee.attendance.logs.approve"),{onSuccess:()=>{}})})}function B(){t.post(route("admin.employee.attendance.log.add"),{onSuccess:s=>{c.fire("Success","new attendance log added","success"),t.reset("employee_id","type","date_time","name")}})}function u(){return d().props.value.employees}function w(){c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&(axios.post(route("admin.employee.attendance.logs.approve.pending")),window.location.reload())})}return{attendancesData:b,attendancesLink:v,deleteItem:m,addAttendanceLogFormSubmit:B,attendanceTypes:n,newLogData:t,employeesList:u,filterOptions:_,applyFilter:C,filterData:g,page_type:k,submitApproveData:y,approveAllLogs:w}}},G={class:"row"},J={class:"col-lg-12"},Q={class:"dashboard-settings margin-top-40 margin-bottom-30"},R={class:"header-wrap d-flex justify-content-between"},X={class:"dashboards-title margin-bottom-40"},$={class:"btn-wrapper"},ee={class:"table-wrap table-responsive mt-5"},te={class:"table table-light"},oe=e("thead",null,[e("th",null,"ID"),e("th",null,"Employee Name"),e("th",null,"Type"),e("th",null,"Date"),e("th",null,"Time "),e("th",null,"Actions")],-1),ne=e("i",{class:"fas fa-check"},null,-1),ae=e("i",{class:"fas fa-trash"},null,-1),le={class:"single-info-input margin-top-30"},se=e("label",{class:"info-title"},"Date Time",-1);function ie(_,n,g,t,k,C){const b=l("Head"),v=l("BsModalButton"),m=l("Link"),y=l("Pagination"),B=l("BreezeValidationErrors"),u=l("BsSelect"),w=l("VueDatePicker"),s=l("BsButton"),r=l("BsModal");return L(),h(D,null,[a(b,{title:"All Attendance Logs"}),e("div",G,[e("div",J,[e("div",Q,[e("div",R,[e("h2",X,"All "+i(t.page_type)+" Attendance Logs",1),e("div",$,[e("button",{onClick:n[0]||(n[0]=(...o)=>t.approveAllLogs&&t.approveAllLogs(...o)),class:"btn btn-danger"},"Approve All Pending Log"),a(v,{target:"addnewcategory","button-class":"btn btn-info m-1"},{default:f(()=>[F("Add New Log")]),_:1})])]),e("div",ee,[e("table",te,[oe,e("tbody",null,[(L(!0),h(D,null,T(t.attendancesData(),o=>(L(),h("tr",{key:o.id},[e("td",null,i(o.id),1),e("td",null,i(o.name),1),e("td",null,[e("span",{class:M(["alert text-capitalize",o.type==="C/In"?"alert-success":"alert-danger"])},i(o.type.replace("-"," ")),3),z(a(m,{onClick:S=>t.submitApproveData(o.id),class:"btn btn-success m-2"},{default:f(()=>[ne]),_:2},1032,["onClick"]),[[E,o.status===0]])]),e("td",null,i(_.readableDateFormat(o.date_time)),1),e("td",null,i(new Date(o.date_time).toLocaleTimeString("en-US",{timeZone:"Asia/Dhaka"})),1),e("td",null,[a(m,{onClick:S=>t.deleteItem(o),class:"btn btn-danger m-2"},{default:f(()=>[ae]),_:2},1032,["onClick"])])]))),128))])])]),a(y,{links:t.attendancesLink()},null,8,["links"])])])]),a(r,{"modal-title":"Add New Attendance Log","modal-id":"addnewcategory","modal-size":"modal-md"},{default:f(()=>[a(B,{class:"mb-4"}),e("form",{onSubmit:n[4]||(n[4]=H(()=>{},["prevent"]))},[a(u,{title:"Employee",options:t.employeesList(),modelValue:t.newLogData.employee_id,"onUpdate:modelValue":n[1]||(n[1]=o=>t.newLogData.employee_id=o)},null,8,["options","modelValue"]),a(u,{title:"Status",options:t.attendanceTypes,modelValue:t.newLogData.type,"onUpdate:modelValue":n[2]||(n[2]=o=>t.newLogData.type=o)},null,8,["options","modelValue"]),e("div",le,[se,a(w,{modelValue:t.newLogData.date_time,"onUpdate:modelValue":n[3]||(n[3]=o=>t.newLogData.date_time=o)},null,8,["modelValue"])]),a(s,{"button-text":"Submit","button-type":"submit",onClick:t.addAttendanceLogFormSubmit,disabled:t.newLogData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const ye=Z(q,[["render",ie]]);export{ye as default};

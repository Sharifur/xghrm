import{A as w}from"./AdminMaster-kp-HkNmh.js";import{H as I,L as P,u as W,l as u,m as U,c as d,a as m,b as s,g as T,w as O,F as g,p as S,e as i,t as l,r as y,o as p,h as F}from"./app-NMZH-3Gf.js";import{B as H}from"./Button-dMU1l4IO.js";import{B as R}from"./Input--3e-HiE7.js";import{S as G}from"./Select-4yHcRvsE.js";import{B as J}from"./Textarea-0oeVlPfj.js";import{s as j}from"./vue3-datepicker.esm-gtpJu_BA.js";import"./sweetalert2.all-co24XUOH.js";import{h as X}from"./html2pdf-7tV3Gwdw.js";import{_ as Y}from"./_plugin-vue_export-helper-x3n3nnut.js";const q={layout:w,components:{Button:H,Input:R,Select:G,Textarea:J,Head:I,Datepicker:j,Link:P},setup(){const f=W().props.value.all_employee,o=u({name:"Name",salary:0,category:"Designation",designation:"Designation"}),C=u(0),e=u(0),E=u(0),b=u(0),D=u(0),h=u(0),v=u(0),x=u(0),a=U({employee_id:null,month:null,extraEarningFields:[{description:null,amount:0}],extraDeductionFields:[{description:null,amount:0}]});function k(){a.extraEarningFields.push({description:null,amount:0})}function t(){a.extraDeductionFields.push({description:null,amount:0})}function r(c){a.extraEarningFields.length>1&&a.extraEarningFields.splice(a.extraEarningFields.indexOf(c),1)}function L(c){a.extraDeductionFields.length>1&&a.extraDeductionFields.splice(a.extraDeductionFields.indexOf(c),1)}function A(){let c=o.value.name+"-"+V(a.month)+"-salary-slip.pdf";X(document.getElementById("element-to-convert"),{margin:1,filename:c}),axios.post(route("admin.employee.salary.slip.create"),a)}function M(){axios.post(route("admin.employee.details",a.employee_id),{month:a.month}).then(c=>{a.extraEarningFields=[{description:null,amount:0}],a.extraDeductionFields=[{description:null,amount:0}];let n=c.data,_=c.data.details;o.value={name:_.name,salary:_.salary,category:_.designation,designation:_.designation},C.value=n.attenadnceCount,e.value=n.holidayCount,E.value=n.leaveCount,b.value=n.sickLeaveCount,D.value=n.paidLeaveCount,a.extraEarningFields.push({description:`${n.attenadnceCount} Days Lunch`,amount:parseInt(n.attenadnceCount)*35});const N=n.leaveCount>2?2:n.leaveCount;a.extraDeductionFields.push({description:`${N} Days Sick Leave`,amount:0}),n.leaveCount>2&&a.extraDeductionFields.push({description:`${n.leaveCount-2} Days Leave`,amount:_.salary/24*(n.leaveCount-2)}),n.AdvanceSalary>0&&a.extraDeductionFields.push({description:"Advance Salary",amount:n.AdvanceSalary}),B()})}function V(c){let n=["January","February","March","April","May","June","July","August","September","October","November","December"];return c!=null?n[new Date(c).getMonth()]:""}function B(){let c=0;a.extraEarningFields.map(_=>{_.amount>0&&(c+=parseFloat(_.amount))});let n=0;a.extraDeductionFields.map(_=>{_.amount>0&&(n+=parseFloat(_.amount))}),h.value=c>0?parseFloat(c):0,v.value=n>0?parseFloat(n):0,o.salary!=="undefined"&&(h.value+=parseFloat(o.value.salary)),x.value=parseFloat(h.value)-parseFloat(v.value)}return{employeeList:f,salarySlipData:a,addMoreEarningField:k,addMoreDeductionField:t,removeEarningField:r,removeDeductionField:L,exportToPDF:A,selectedEmployee:o,changeEmployeeSelect:M,holidayCount:e,leaveCount:E,sickLeaveCount:b,paidLeaveCount:D,attenadnceCount:C,getSelectedMonthName:V,grossEarning:h,grossDeduction:v,payableAmount:x,calculateSalary:B}}},z={class:"row"},K={class:"col-lg-12"},Q={class:"header-wrap d-flex justify-content-between"},Z=s("h2",{class:"dashboards-title margin-bottom-40"},"Create Salary Slip",-1),$={class:"btn-wrp"},ss={class:"row"},es={class:"col-lg-4"},ts={class:"single-info-input margin-top-30"},as=s("label",{class:"info-title"},"Salary Month",-1),os=s("span",{class:"info-text"},"Select Month First",-1),ns={class:"repeaterFieldWarp"},ls=s("h4",{class:"repeater-title"},"Extra Earning Fields",-1),is={class:"repeater-inner-wrap"},rs={class:"actionButtonWrap"},cs=s("i",{class:"fas fa-plus"},null,-1),ds=[cs],ps=["onClick"],_s=s("i",{class:"fas fa-times"},null,-1),us=[_s],ms={class:"repeaterFieldWarp"},hs=s("h4",{class:"repeater-title"},"Extra Deduction Fields",-1),ys={class:"repeater-inner-wrap"},vs={class:"actionButtonWrap"},gs=s("i",{class:"fas fa-plus"},null,-1),fs=[gs],Ds=["onClick"],xs=s("i",{class:"fas fa-times"},null,-1),Ss=[xs],Fs={class:"col-lg-8"},Cs={class:"head-raw margin-top-40 margin-left-60"},Es=s("h4",null,"Color Explanation",-1),bs={class:"color-explanation"},ks={class:"bg-success"},Vs={class:"badge"},Bs={class:"holiday"},Ls={class:"badge"},As={class:"leave"},Ms={class:"badge"},Ns={class:"sick-leave"},ws={class:"badge"},Is={class:"paid-leave"},Ps={class:"badge"},Ws={id:"element-to-convert"},Us={class:"salarySlipPdfOuterWrapper"},Ts={class:"headerPart"},Os={class:"subjectWarp"},Hs={class:"period"},Rs={class:"employeeInfoWrap"},Gs=s("strong",null,"Name: ",-1),Js=s("strong",null,"Department:",-1),js={class:"tableWithCalculation table-responsive"},Xs={class:"salary-sheet"},Ys={class:"salary-sheet-flex"},qs={class:"salary-sheet-item"},zs={class:"salary-sheet-contents"},Ks={class:"salary-sheet-contents-list"},Qs=s("li",{class:"salary-sheet-list salary-sheet-head"},[s("span",{class:"list-title left"},"EARNINGS"),i(),s("span",{class:"list-title list-para right"}," PER MONTH ")],-1),Zs={class:"salary-sheet-list"},$s=s("span",{class:"list-para left"},"Basic Salary",-1),se={class:"list-para right"},ee={key:0,class:"list-para left"},te={key:1,class:"list-para right"},ae={class:"salary-sheet-item"},oe={class:"salary-sheet-contents"},ne={class:"salary-sheet-contents-list"},le=s("li",{class:"salary-sheet-list salary-sheet-head"},[s("span",{class:"list-title left"},"DEDUCTIONS"),i(),s("span",{class:"list-title list-para right"}," PER MONTH ")],-1),ie={key:0,class:"list-para left"},re={key:1,class:"list-para right"},ce={class:"salary-sheet-gross"},de={class:"salary-sheet-gross-item"},pe={class:"gross-list"},_e=s("span",{class:"gross-para left"},"Gross Earnings(A)",-1),ue={class:"gross-para right"},me={class:"salary-sheet-gross-item"},he={class:"gross-list"},ye=s("span",{class:"gross-para left"},"Gross Deductions(B)",-1),ve={class:"gross-para right"},ge={class:"salary-sheet-gross"},fe={class:"salary-sheet-gross-item"},De={class:"gross-list"},xe=s("span",{class:"gross-para left"},"Net Salary Payable(A-B)",-1),Se={class:"gross-para right"},Fe={class:"salary-sheet-gross"},Ce={class:"salary-sheet-gross-item"},Ee={class:"gross-list"},be=s("span",{class:"gross-para left"},"Net Salary Payable(in words)",-1),ke={class:"gross-para right"},Ve={class:"footerPartWrapper"},Be=s("div",{class:"signature"},[s("span",{class:"signature"},"Signature"),s("h2",null,"Sharifur Rahman"),s("span",{class:"designation"},"Ceo - Xgenious")],-1),Le={class:"signature"},Ae=s("span",{class:"signature"},"Signature",-1),Me={class:"designation"},Ne={class:"btn-wrapper margin-left-60"};function we(f,o,C,e,E,b){const D=y("Head"),h=y("Link"),v=y("Datepicker"),x=y("Select"),a=y("Input"),k=y("Button");return p(),d(g,null,[m(D,{title:"Create Salary Slip"}),s("div",z,[s("div",K,[s("div",Q,[Z,s("div",$,[m(h,{class:"btn btn-info m-1",href:f.route("admin.employee.salary.slip")},{default:T(()=>[i("All Salary Slip")]),_:1},8,["href"])])])]),s("div",ss,[s("div",es,[s("form",{onSubmit:o[7]||(o[7]=O(()=>{},["prevent"]))},[s("div",ts,[as,m(v,{modelValue:e.salarySlipData.month,"onUpdate:modelValue":o[0]||(o[0]=t=>e.salarySlipData.month=t)},null,8,["modelValue"]),os]),m(x,{title:"Employee",onChange:o[1]||(o[1]=t=>e.changeEmployeeSelect()),modelValue:e.salarySlipData.employee_id,"onUpdate:modelValue":o[2]||(o[2]=t=>e.salarySlipData.employee_id=t),options:e.employeeList},null,8,["modelValue","options"]),s("div",ns,[ls,s("div",is,[(p(!0),d(g,null,S(e.salarySlipData.extraEarningFields,t=>(p(),d("div",{class:"individualItemWrapper",key:t.index},[m(a,{type:"text",title:"Description",modelValue:t.description,"onUpdate:modelValue":r=>t.description=r},null,8,["modelValue","onUpdate:modelValue"]),m(a,{type:"number",min:"0",onInput:o[3]||(o[3]=r=>e.calculateSalary()),title:"Amount",modelValue:t.amount,"onUpdate:modelValue":r=>t.amount=r},null,8,["modelValue","onUpdate:modelValue"]),s("div",rs,[s("span",{class:"addMore",onClick:o[4]||(o[4]=r=>e.addMoreEarningField())},ds),s("span",{class:"removeItem",onClick:r=>e.removeEarningField(t)},us,8,ps)])]))),128))])]),s("div",ms,[hs,s("div",ys,[(p(!0),d(g,null,S(e.salarySlipData.extraDeductionFields,t=>(p(),d("div",{class:"individualItemWrapper",key:t.index},[m(a,{type:"text",title:"Description",modelValue:t.description,"onUpdate:modelValue":r=>t.description=r},null,8,["modelValue","onUpdate:modelValue"]),m(a,{type:"number",min:"0",onInput:o[5]||(o[5]=r=>e.calculateSalary()),title:"Amount",modelValue:t.amount,"onUpdate:modelValue":r=>t.amount=r},null,8,["modelValue","onUpdate:modelValue"]),s("div",vs,[s("span",{class:"addMore",onClick:o[6]||(o[6]=r=>e.addMoreDeductionField())},fs),s("span",{class:"removeItem",onClick:r=>e.removeDeductionField(t)},Ss,8,Ds)])]))),128))])])],32)]),s("div",Fs,[s("div",Cs,[Es,s("ul",bs,[s("li",ks,[i("Attendance "),s("span",Vs,l(e.attenadnceCount),1)]),s("li",Bs,[i("Holiday "),s("span",Ls,l(e.holidayCount),1)]),s("li",As,[i("leave"),s("span",Ms,l(e.leaveCount),1)]),s("li",Ns,[i("Sick Leave "),s("span",ws,l(e.sickLeaveCount),1)]),s("li",Is,[i("Paid Leave "),s("span",Ps,l(e.paidLeaveCount),1)])])]),s("div",Ws,[s("div",Us,[s("div",Ts,[s("div",Os,[s("p",null,[i("Payslip for the month of "),s("span",Hs,l(e.getSelectedMonthName(e.salarySlipData.month)),1),i(" "+l(new Date().getFullYear()),1)])])]),s("div",Rs,[s("h3",null,[Gs,i(" "+l(e.selectedEmployee.name),1)]),s("h4",null,[Js,i(" "+l(e.selectedEmployee.category),1)])]),s("div",js,[s("div",Xs,[s("div",Ys,[s("div",qs,[s("div",zs,[s("ul",Ks,[Qs,s("li",Zs,[$s,i(),s("span",se,l(parseFloat(e.selectedEmployee.salary).toFixed(2)),1)]),(p(!0),d(g,null,S(e.salarySlipData.extraEarningFields,t=>(p(),d("li",{class:"salary-sheet-list",key:t.index},[t.description!==null?(p(),d("span",ee,l(t.description),1)):F("",!0),t.description!==null?(p(),d("span",te,l(t.amount>0?parseFloat(t.amount).toFixed(2):0),1)):F("",!0)]))),128))])])]),s("div",ae,[s("div",oe,[s("ul",ne,[le,(p(!0),d(g,null,S(e.salarySlipData.extraDeductionFields,t=>(p(),d("li",{class:"salary-sheet-list",key:t.index},[t.description!==null?(p(),d("span",ie,l(t.description),1)):F("",!0),t.description!==null?(p(),d("span",re,l(t.amount>0?parseFloat(t.amount).toFixed(2):0),1)):F("",!0)]))),128))])])])]),s("div",ce,[s("div",de,[s("div",pe,[_e,i(),s("span",ue,l(parseFloat(e.grossEarning).toFixed(2)),1)])]),s("div",me,[s("div",he,[ye,i(),s("span",ve,l(parseFloat(e.grossDeduction).toFixed(2)),1)])])]),s("div",ge,[s("div",fe,[s("div",De,[xe,i(),s("span",Se,l(parseFloat(e.payableAmount).toFixed(2)),1)])])]),s("div",Fe,[s("div",Ce,[s("div",Ee,[be,i(),s("span",ke,l(f.numberToWord(e.payableAmount))+" Tk Only",1)])])])])]),s("div",Ve,[Be,s("div",Le,[Ae,s("h2",null,l(e.selectedEmployee.name),1),s("span",Me,l(e.selectedEmployee.designation),1)])])])]),s("div",Ne,[m(k,{type:"button",onClick:e.exportToPDF,"button-text":"Save and Download PDF"},null,8,["onClick"])])])])])],64)}const je=Y(q,[["render",we]]);export{je as default};

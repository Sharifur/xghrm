import{A as P}from"./AdminMaster-DH1wrE0a.js";import{K as I,L as B,H as W,r as g,c as p,o as u,a as c,b as s,g as U,f as i,w as T,F as f,p as S,t as n,h as F,u as O,l as y,m as H}from"./app-CsNfPVfU.js";import{B as R}from"./Button-CeNki_TU.js";import{I as G}from"./Input-bIAeSuA-.js";import{S as J}from"./Select-NHh-DEWl.js";import{T as j}from"./Textarea-CW7tfl49.js";import{s as K}from"./vue3-datepicker.esm-fsVyI85d.js";import"./sweetalert2.esm.all-Y6IUEg8t.js";import{h as X}from"./html2pdf-D8h-NGCK.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={layout:P,components:{Button:R,Input:G,Select:J,Textarea:j,Head:W,Datepicker:K,Link:B,VueDatePicker:I},setup(){const h=O().props.value.all_employee,e=y({name:"Name",salary:0,category:"Designation",designation:"Designation"}),C=y(0),t=y(0),E=y(0),b=y(0),D=y(0),v=y(0),_=y(0),x=y(0),o=H({employee_id:null,month:null,extraEarningFields:[{description:null,amount:0}],extraDeductionFields:[{description:null,amount:0}]});function k(){o.extraEarningFields.push({description:null,amount:0})}function a(){o.extraDeductionFields.push({description:null,amount:0})}function r(d){o.extraEarningFields.length>1&&o.extraEarningFields.splice(o.extraEarningFields.indexOf(d),1)}function A(d){o.extraDeductionFields.length>1&&o.extraDeductionFields.splice(o.extraDeductionFields.indexOf(d),1)}function M(){let d=e.value.name+"-"+V(o.month)+"-salary-slip.pdf";X(document.getElementById("element-to-convert"),{margin:1,filename:d}),axios.post(route("admin.employee.salary.slip.create"),o)}function N(){axios.post(route("admin.employee.details",o.employee_id),{month:o.month}).then(d=>{o.extraEarningFields=[{description:null,amount:0}],o.extraDeductionFields=[{description:null,amount:0}];let l=d.data,m=d.data.details;e.value={name:m.name,salary:m.salary,category:m.designation,designation:m.designation},C.value=l.attenadnceCount,t.value=l.holidayCount,E.value=l.leaveCount,b.value=l.sickLeaveCount,D.value=l.paidLeaveCount,o.extraEarningFields.push({description:`${l.attenadnceCount} Days Lunch`,amount:parseInt(l.attenadnceCount)*50});const w=l.leaveCount>2?2:l.leaveCount;o.extraDeductionFields.push({description:`${w} Days Sick Leave`,amount:0}),l.leaveCount>2&&o.extraDeductionFields.push({description:`${l.leaveCount-2} Days Leave`,amount:m.salary/24*(l.leaveCount-2)}),l.AdvanceSalary>0&&o.extraDeductionFields.push({description:"Advance Salary",amount:l.AdvanceSalary}),L()})}function V(d){let l=["January","February","March","April","May","June","July","August","September","October","November","December"];return d!=null?l[new Date(d).getMonth()]:""}function L(){let d=0;o.extraEarningFields.map(m=>{m.amount>0&&(d+=parseFloat(m.amount))});let l=0;o.extraDeductionFields.map(m=>{m.amount>0&&(l+=parseFloat(m.amount))}),v.value=d>0?parseFloat(d):0,_.value=l>0?parseFloat(l):0,e.salary!=="undefined"&&(v.value+=parseFloat(e.value.salary)),x.value=parseFloat(v.value)-parseFloat(_.value)}return{employeeList:h,salarySlipData:o,addMoreEarningField:k,addMoreDeductionField:a,removeEarningField:r,removeDeductionField:A,exportToPDF:M,selectedEmployee:e,changeEmployeeSelect:N,holidayCount:t,leaveCount:E,sickLeaveCount:b,paidLeaveCount:D,attenadnceCount:C,getSelectedMonthName:V,grossEarning:v,grossDeduction:_,payableAmount:x,calculateSalary:L}}},z={class:"row"},Q={class:"col-lg-12"},Z={class:"header-wrap d-flex justify-content-between"},$={class:"btn-wrp"},ss={class:"row"},es={class:"col-lg-4"},ts={class:"single-info-input margin-top-30"},as={class:"repeaterFieldWarp"},os={class:"repeater-inner-wrap"},ls={class:"actionButtonWrap"},ns=["onClick"],is={class:"repeaterFieldWarp"},rs={class:"repeater-inner-wrap"},ds={class:"actionButtonWrap"},ps=["onClick"],us={class:"col-lg-8"},ms={class:"head-raw margin-top-40 margin-left-60"},cs={class:"color-explanation"},ys={class:"bg-success"},vs={class:"badge"},gs={class:"holiday"},_s={class:"badge"},fs={class:"leave"},hs={class:"badge"},Ds={class:"sick-leave"},xs={class:"badge"},Ss={class:"paid-leave"},Fs={class:"badge"},Cs={id:"element-to-convert"},Es={class:"salarySlipPdfOuterWrapper"},bs={class:"headerPart"},ks={class:"subjectWarp"},Vs={class:"period"},Ls={class:"employeeInfoWrap"},As={class:"tableWithCalculation table-responsive"},Ms={class:"salary-sheet"},Ns={class:"salary-sheet-flex"},ws={class:"salary-sheet-item"},Ps={class:"salary-sheet-contents"},Is={class:"salary-sheet-contents-list"},Bs={class:"salary-sheet-list"},Ws={class:"list-para right"},Us={key:0,class:"list-para left"},Ts={key:1,class:"list-para right"},Os={class:"salary-sheet-item"},Hs={class:"salary-sheet-contents"},Rs={class:"salary-sheet-contents-list"},Gs={key:0,class:"list-para left"},Js={key:1,class:"list-para right"},js={class:"salary-sheet-gross"},Ks={class:"salary-sheet-gross-item"},Xs={class:"gross-list"},Ys={class:"gross-para right"},qs={class:"salary-sheet-gross-item"},zs={class:"gross-list"},Qs={class:"gross-para right"},Zs={class:"salary-sheet-gross"},$s={class:"salary-sheet-gross-item"},se={class:"gross-list"},ee={class:"gross-para right"},te={class:"salary-sheet-gross"},ae={class:"salary-sheet-gross-item"},oe={class:"gross-list"},le={class:"gross-para right"},ne={class:"footerPartWrapper"},ie={class:"signature"},re={class:"designation"},de={class:"btn-wrapper margin-left-60"};function pe(h,e,C,t,E,b){const D=g("Head"),v=g("Link"),_=g("VueDatePicker"),x=g("Select"),o=g("Input"),k=g("Button");return u(),p(f,null,[c(D,{title:"Create Salary Slip"}),s("div",z,[s("div",Q,[s("div",Z,[e[9]||(e[9]=s("h2",{class:"dashboards-title margin-bottom-40"},"Create Salary Slip",-1)),s("div",$,[c(v,{class:"btn btn-info m-1",href:h.route("admin.employee.salary.slip")},{default:U(()=>[...e[8]||(e[8]=[i("All Salary Slip",-1)])]),_:1},8,["href"])])])]),s("div",ss,[s("div",es,[s("form",{onSubmit:e[7]||(e[7]=T(()=>{},["prevent"]))},[s("div",ts,[e[10]||(e[10]=s("label",{class:"info-title"},"Salary Month",-1)),c(_,{modelValue:t.salarySlipData.month,"onUpdate:modelValue":e[0]||(e[0]=a=>t.salarySlipData.month=a)},null,8,["modelValue"]),e[11]||(e[11]=s("span",{class:"info-text"},"Select Month First",-1))]),c(x,{title:"Employee",onChange:e[1]||(e[1]=a=>t.changeEmployeeSelect()),modelValue:t.salarySlipData.employee_id,"onUpdate:modelValue":e[2]||(e[2]=a=>t.salarySlipData.employee_id=a),options:t.employeeList},null,8,["modelValue","options"]),s("div",as,[e[14]||(e[14]=s("h4",{class:"repeater-title"},"Extra Earning Fields",-1)),s("div",os,[(u(!0),p(f,null,S(t.salarySlipData.extraEarningFields,a=>(u(),p("div",{class:"individualItemWrapper",key:a.index},[c(o,{type:"text",title:"Description",modelValue:a.description,"onUpdate:modelValue":r=>a.description=r},null,8,["modelValue","onUpdate:modelValue"]),c(o,{type:"number",min:"0",onInput:e[3]||(e[3]=r=>t.calculateSalary()),title:"Amount",modelValue:a.amount,"onUpdate:modelValue":r=>a.amount=r},null,8,["modelValue","onUpdate:modelValue"]),s("div",ls,[s("span",{class:"addMore",onClick:e[4]||(e[4]=r=>t.addMoreEarningField())},[...e[12]||(e[12]=[s("i",{class:"fas fa-plus"},null,-1)])]),s("span",{class:"removeItem",onClick:r=>t.removeEarningField(a)},[...e[13]||(e[13]=[s("i",{class:"fas fa-times"},null,-1)])],8,ns)])]))),128))])]),s("div",is,[e[17]||(e[17]=s("h4",{class:"repeater-title"},"Extra Deduction Fields",-1)),s("div",rs,[(u(!0),p(f,null,S(t.salarySlipData.extraDeductionFields,a=>(u(),p("div",{class:"individualItemWrapper",key:a.index},[c(o,{type:"text",title:"Description",modelValue:a.description,"onUpdate:modelValue":r=>a.description=r},null,8,["modelValue","onUpdate:modelValue"]),c(o,{type:"number",min:"0",onInput:e[5]||(e[5]=r=>t.calculateSalary()),title:"Amount",modelValue:a.amount,"onUpdate:modelValue":r=>a.amount=r},null,8,["modelValue","onUpdate:modelValue"]),s("div",ds,[s("span",{class:"addMore",onClick:e[6]||(e[6]=r=>t.addMoreDeductionField())},[...e[15]||(e[15]=[s("i",{class:"fas fa-plus"},null,-1)])]),s("span",{class:"removeItem",onClick:r=>t.removeDeductionField(a)},[...e[16]||(e[16]=[s("i",{class:"fas fa-times"},null,-1)])],8,ps)])]))),128))])])],32)]),s("div",us,[s("div",ms,[e[23]||(e[23]=s("h4",null,"Color Explanation",-1)),s("ul",cs,[s("li",ys,[e[18]||(e[18]=i("Attendance ",-1)),s("span",vs,n(t.attenadnceCount),1)]),s("li",gs,[e[19]||(e[19]=i("Holiday ",-1)),s("span",_s,n(t.holidayCount),1)]),s("li",fs,[e[20]||(e[20]=i("leave",-1)),s("span",hs,n(t.leaveCount),1)]),s("li",Ds,[e[21]||(e[21]=i("Sick Leave ",-1)),s("span",xs,n(t.sickLeaveCount),1)]),s("li",Ss,[e[22]||(e[22]=i("Paid Leave ",-1)),s("span",Fs,n(t.paidLeaveCount),1)])])]),s("div",Cs,[s("div",Es,[s("div",bs,[s("div",ks,[s("p",null,[e[24]||(e[24]=i("Payslip for the month of ",-1)),s("span",Vs,n(t.getSelectedMonthName(t.salarySlipData.month)),1),i(" "+n(new Date().getFullYear()),1)])])]),s("div",Ls,[s("h3",null,[e[25]||(e[25]=s("strong",null,"Name: ",-1)),i(" "+n(t.selectedEmployee.name),1)]),s("h4",null,[e[26]||(e[26]=s("strong",null,"Department:",-1)),i(" "+n(t.selectedEmployee.category),1)])]),s("div",As,[s("div",Ms,[s("div",Ns,[s("div",ws,[s("div",Ps,[s("ul",Is,[e[29]||(e[29]=s("li",{class:"salary-sheet-list salary-sheet-head"},[s("span",{class:"list-title left"},"EARNINGS"),i(),s("span",{class:"list-title list-para right"}," PER MONTH ")],-1)),s("li",Bs,[e[27]||(e[27]=s("span",{class:"list-para left"},"Basic Salary",-1)),e[28]||(e[28]=i()),s("span",Ws,n(parseFloat(t.selectedEmployee.salary).toFixed(2)),1)]),(u(!0),p(f,null,S(t.salarySlipData.extraEarningFields,a=>(u(),p("li",{class:"salary-sheet-list",key:a.index},[a.description!==null?(u(),p("span",Us,n(a.description),1)):F("",!0),a.description!==null?(u(),p("span",Ts,n(a.amount>0?parseFloat(a.amount).toFixed(2):0),1)):F("",!0)]))),128))])])]),s("div",Os,[s("div",Hs,[s("ul",Rs,[e[30]||(e[30]=s("li",{class:"salary-sheet-list salary-sheet-head"},[s("span",{class:"list-title left"},"DEDUCTIONS"),i(),s("span",{class:"list-title list-para right"}," PER MONTH ")],-1)),(u(!0),p(f,null,S(t.salarySlipData.extraDeductionFields,a=>(u(),p("li",{class:"salary-sheet-list",key:a.index},[a.description!==null?(u(),p("span",Gs,n(a.description),1)):F("",!0),a.description!==null?(u(),p("span",Js,n(a.amount>0?parseFloat(a.amount).toFixed(2):0),1)):F("",!0)]))),128))])])])]),s("div",js,[s("div",Ks,[s("div",Xs,[e[31]||(e[31]=s("span",{class:"gross-para left"},"Gross Earnings(A)",-1)),e[32]||(e[32]=i()),s("span",Ys,n(parseFloat(t.grossEarning).toFixed(2)),1)])]),s("div",qs,[s("div",zs,[e[33]||(e[33]=s("span",{class:"gross-para left"},"Gross Deductions(B)",-1)),e[34]||(e[34]=i()),s("span",Qs,n(parseFloat(t.grossDeduction).toFixed(2)),1)])])]),s("div",Zs,[s("div",$s,[s("div",se,[e[35]||(e[35]=s("span",{class:"gross-para left"},"Net Salary Payable(A-B)",-1)),e[36]||(e[36]=i()),s("span",ee,n(parseFloat(t.payableAmount).toFixed(2)),1)])])]),s("div",te,[s("div",ae,[s("div",oe,[e[37]||(e[37]=s("span",{class:"gross-para left"},"Net Salary Payable(in words)",-1)),e[38]||(e[38]=i()),s("span",le,n(h.numberToWord(t.payableAmount))+" Tk Only",1)])])])])]),s("div",ne,[e[40]||(e[40]=s("div",{class:"signature"},[s("span",{class:"signature"},"Signature"),s("h2",null,"Sharifur Rahman"),s("span",{class:"designation"},"Ceo - Xgenious")],-1)),s("div",ie,[e[39]||(e[39]=s("span",{class:"signature"},"Signature",-1)),s("h2",null,n(t.selectedEmployee.name),1),s("span",re,n(t.selectedEmployee.designation),1)])])])]),s("div",de,[c(k,{type:"button",onClick:t.exportToPDF,"button-text":"Save and Download PDF"},null,8,["onClick"])])])])])],64)}const xe=Y(q,[["render",pe]]);export{xe as default};

import{L as V,u as c,Z as D,H as x,m as N,c as _,a as r,b as t,g as w,F as h,p as F,r as i,o as f,e as A,t as u,n as B,w as P}from"./app-epR7_ZJT.js";import{P as z}from"./Pagination-Vb3eupCL.js";import{S as j}from"./sweetalert2.all-Ocq-q7Tl.js";import{B as T,a as C}from"./BsModalButton-3qrIlVuN.js";import{B as H}from"./Input-K_weuUQS.js";import{B as I}from"./Select-Z6Gvsj9q.js";import{B as E}from"./Button-gCH1OFSl.js";import{B as U}from"./ValidationErrors-WpsZwU4v.js";import{U as Y}from"./UserMaster--hs5tJlI.js";import{_ as O}from"./_plugin-vue_export-helper-x3n3nnut.js";function b(e){const a=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&a==="[object Date]"?new e.constructor(+e):typeof e=="number"||a==="[object Number]"||typeof e=="string"||a==="[object String]"?new Date(e):new Date(NaN)}function y(e,a){return e instanceof Date?new e.constructor(a):new Date(a)}function K(e,a){const s=b(e);if(isNaN(a))return y(e,NaN);if(!a)return s;const o=s.getDate(),l=y(e,s.getTime());l.setMonth(s.getMonth()+a+1,0);const d=l.getDate();return o>=d?l:(s.setFullYear(l.getFullYear(),l.getMonth(),o),s)}function W(e){return b(e).getMonth()}function Z(e){return b(e).getFullYear()}const q={name:"Index",layout:Y,components:{Pagination:z,Link:V,usePage:c,BsModal:T,BsModalButton:C,BsInput:H,BsSelect:I,BsButton:E,BreezeValidationErrors:U,VueDatePicker:D,Head:x},setup(){const e=[{label:"Leave",value:"leave"},{label:"Sick Leave",value:"sick-leave"},{label:"Work From Home",value:"work-from-home"}],a=N({employee_id:null,type:null,date_time:null}),s=new Date,o=K(new Date(Z(new Date),W(new Date)),1);function l(){return c().props.value.attendance_logs.data}function d(){return c().props.value.attendance_logs.links}function m(){a.post(route("user.leaves.new"),{onSuccess:g=>{j.fire("Success","new attendance log added","success"),a.reset("employee_id","type","date_time","name")}})}function p(){return c().props.value.employees}return{attendancesData:l,attendancesLink:d,addAttendanceLogFormSubmit:m,attendanceTypes:e,newLogData:a,employeesList:p,VueDatePicker:D,minDate:s,maxDate:o}}},G={class:"row"},J={class:"col-lg-12"},Q={class:"dashboard-settings margin-top-40 margin-bottom-30"},R={class:"header-wrap d-flex justify-content-between"},X=t("h2",{class:"dashboards-title margin-bottom-40"},"All Leaves",-1),$={class:"btn-wrapper"},ee={class:"table-wrap table-responsive"},te={class:"table table-light table-secondary"},ae=t("thead",null,[t("th",null,"ID"),t("th",null,"Type"),t("th",null,"Status"),t("th",null,"Date")],-1),oe={class:"single-info-input margin-top-30"},ne=t("label",{class:"info-title"},"Date Time",-1);function se(e,a,s,o,l,d){const m=i("Head"),p=i("BsModalButton"),g=i("Pagination"),v=i("BreezeValidationErrors"),k=i("BsSelect"),L=i("VueDatePicker"),S=i("BsButton"),M=i("BsModal");return f(),_(h,null,[r(m,{title:"All Leaves"}),t("div",G,[t("div",J,[t("div",Q,[t("div",R,[X,t("div",$,[r(p,{target:"addnewcategory","button-class":"btn btn-info m-1"},{default:w(()=>[A("Add New Leave")]),_:1})])]),t("div",ee,[t("table",te,[ae,t("tbody",null,[(f(!0),_(h,null,F(o.attendancesData(),n=>(f(),_("tr",{key:n.id},[t("td",null,u(n.id),1),t("td",null,[t("span",{class:B(["alert text-capitalize",n.type])},u(n.type.replaceAll("-"," ")),3)]),t("td",null,[t("span",{class:B(["alert text-capitalize",n.status===1?"alert-success":"alert-danger"])},u(n.status===1?"Approved":"pending"),3)]),t("td",null,u(e.readableDateFormat(n.date_time)),1)]))),128))])])]),r(g,{links:o.attendancesLink()},null,8,["links"])])])]),r(M,{"modal-title":"Add New Attendance Log","modal-id":"addnewcategory","modal-size":"modal-md"},{default:w(()=>[r(v,{class:"mb-4"}),t("form",{onSubmit:a[2]||(a[2]=P(()=>{},["prevent"]))},[r(k,{title:"Status",options:o.attendanceTypes,modelValue:o.newLogData.type,"onUpdate:modelValue":a[0]||(a[0]=n=>o.newLogData.type=n)},null,8,["options","modelValue"]),t("div",oe,[ne,r(L,{"start-date":new Date,"disabled-week-days":[5],modelValue:o.newLogData.date_time,"onUpdate:modelValue":a[1]||(a[1]=n=>o.newLogData.date_time=n),"min-date":o.minDate,"max-date":o.maxDate},null,8,["start-date","modelValue","min-date","max-date"])]),r(S,{"button-text":"Submit","button-type":"submit",onClick:o.addAttendanceLogFormSubmit,disabled:o.newLogData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const be=O(q,[["render",se]]);export{be as default};

import{A as z}from"./AdminMaster-VukeA10o.js";import{c as b,o as f,b as l,t as y,k as O,n as L,H as j,L as H,r as s,a as n,g as i,f as d,F as h,p as J,e as M,s as N,q as R,h as Y,w as A,l as q,m as g,u as I}from"./app-D-NtkN6p.js";import{P as W}from"./Pagination-DI_GvDMZ.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{S as c}from"./sweetalert2.esm.all-acGi8jXx.js";import{a as G,B as K}from"./BsModalButton-D-ITvZ6y.js";import{V as Q}from"./ValidationErrors-hOEnAWst.js";import{I as X}from"./Input-BGJSQ9n_.js";import{B as Z}from"./Button-BIhpkzd_.js";import{S as $}from"./Select-BpV6nHuv.js";import{M as ee}from"./MediaUploader-Bc2QIzLb.js";import{T as oe}from"./Textarea-C1KLq9Bq.js";import{s as te}from"./vue3-datepicker.esm-CalNZR_H.js";const ne={name:"DropdownButtons",props:{title:String},data(){return{dropdownStatus:!1}},methods:{toggleClass(){this.dropdownStatus=!this.dropdownStatus}}},le=["aria-expanded"];function ae(m,o,u,t,v,E){return f(),b("div",{class:L(["dropdown",v.dropdownStatus?"show":""])},[l("button",{class:"btn btn-secondary dropdown-toggle",onClick:o[0]||(o[0]=(..._)=>E.toggleClass&&E.toggleClass(..._)),type:"button","aria-expanded":v.dropdownStatus},y(u.title),9,le),l("div",{class:L(["dropdown-menu",v.dropdownStatus?"show":""])},[O(m.$slots,"default")],2)],2)}const se=F(ne,[["render",ae]]),ie={name:"AllUsers",layout:z,components:{Pagination:W,Link:H,DropdownButtons:se,BsModalButton:K,BsModal:G,BreezeValidationErrors:Q,BsInput:X,BsButton:Z,BsSelect:$,MediaUploader:ee,BsTextarea:oe,Datepicker:te,Head:j},setup(){const m=[{label:"New",value:"new"},{label:"Existing",value:"existing"}],o=q(!1),u=g({id:null,password:null,password_confirmation:null}),t=g({userId:null,employee_type:"new",existing_employee_id:null,catId:null,status:null,dateOfBirth:new Date,joinDate:new Date,address:null,emergencyNumber:null,personalInfo:null,imageId:null});function v(){return I().props.value.users.data}function E(){return I().props.value.users.links}function _(e){c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(a=>{g({id:e.id}).post(route("admin.users.delete"),{onSuccess:()=>{c.fire("Deleted!!","your won't able to revert it","error")}})})}function r(e){u.id=e.id,u.reset("password","password_confirmation")}function D(e){g({id:e.id,email_verified_at:e.email_verified_at}).post(route("admin.users.disable.mail.verify"),{onSuccess:()=>{c.fire("Success!!","Settings Changed","warning")}})}function U(e){const a=g({id:e.id,banned:e.banned});let V=e.banned===0?"Banned":"Unbanned";a.post(route("admin.users.ban.user"),{onSuccess:()=>{c.fire("success",V+" user successfully","warning")}})}function x(){t.post(route("admin.users.make.employee"),{onSuccess:e=>{c.fire("success","converted to employee","success")},onError:e=>{}})}function B(e){t.userId=e.id}function p(){u.post(route("admin.users.change.password"),{onSuccess:()=>{c.fire("Success!!","Password Changed","success")}})}function T(e){g({id:e.id}).post(route("admin.users.resend.verify.mail"),{onSuccess:V=>{c.fire("Success!!","verify mail send","success")},onError:V=>{console.log(V)}})}function C(e){o.value=e!=="new"}function w(){return I().props.value.category}function k(){return I().props.value.employees}const S=[{label:"Working",value:1},{label:"Left Job",value:0}];function P(e){var a;return(a=e==null?void 0:e.employee)!=null&&a.id?route("admin.employee.view",e==null?void 0:e.employee.id):null}return{employeeType:m,employeesList:k,isExistingEmployee:o,statusOption:S,catList:w,usersList:v,usersListLinks:E,deleteItem:_,changePassword:r,disableEmailVerify:D,sendVerifyMail:T,banUser:U,changePasswordData:u,convertToEmployeeData:t,changePasswordFormSubmit:p,convertToEmployeeFormSubmit:x,convertToEmployee:B,employeeTypeChange:C,employeeRoute:P}}},de={class:"row"},re={class:"col-lg-12"},me={class:"dashboard-settings margin-top-40"},ue={class:"header-wrap d-flex justify-content-between"},pe={class:"btn-wrp"},ce={class:"table-responsive"},fe={class:"table table-stripped"},ye={class:"fas fa-check-circle text-success"},ve={key:0,class:"newemployee"},we={class:"single-dashboard-input"},ge={class:"single-info-input margin-top-30"},be={class:"single-dashboard-input"},Ee={class:"single-info-input margin-top-30"},_e={key:1,class:"oldemployee"};function Ve(m,o,u,t,v,E){const _=s("Head"),r=s("Link"),D=s("BsModalButton"),U=s("DropdownButtons"),x=s("Pagination"),B=s("BreezeValidationErrors"),p=s("BsInput"),T=s("BsButton"),C=s("BsModal"),w=s("BsSelect"),k=s("Datepicker"),S=s("BsTextarea"),P=s("MediaUploader");return f(),b(h,null,[n(_,{title:"All Users"}),l("div",de,[l("div",re,[l("div",me,[l("div",ue,[o[18]||(o[18]=l("h2",{class:"dashboards-title margin-bottom-40"},"All Users",-1)),l("div",pe,[n(r,{href:m.route("admin.users.new"),class:"btn btn-secondary"},{default:i(()=>o[17]||(o[17]=[d("Add New")])),_:1,__:[17]},8,["href"])])]),l("div",ce,[l("table",fe,[o[26]||(o[26]=l("thead",null,[l("th",null,"Id"),l("th",null,"Name"),l("th",null,"Email"),l("th",null,"Action")],-1)),l("tbody",null,[(f(!0),b(h,null,J(t.usersList(),e=>(f(),b("tr",null,[l("td",null,y(e.id),1),l("td",null,[d(y(e.name)+" ( "+y(e.username)+" ) ",1),M(n(r,{href:t.employeeRoute(e)},{default:i(()=>o[19]||(o[19]=[l("i",{class:"fas fa-briefcase btn-success text-white btn btn-sm",title:"An Employee"},null,-1)])),_:2,__:[19]},1032,["href"]),[[N,e==null?void 0:e.employee]])]),l("td",null,[d(y(e.email)+" ",1),M(l("i",ye,null,512),[[N,e.email_verified_at!=null]])]),l("td",null,[n(U,{title:"Actions"},{default:i(()=>[n(r,{class:"dropdown-item",href:m.route("admin.users.view",e.id)},{default:i(()=>o[20]||(o[20]=[d("View")])),_:2,__:[20]},1032,["href"]),n(r,{class:"dropdown-item",onClick:a=>t.deleteItem(e)},{default:i(()=>o[21]||(o[21]=[d("Delete")])),_:2,__:[21]},1032,["onClick"]),n(r,{class:"dropdown-item",href:m.route("admin.users.edit",e.id)},{default:i(()=>o[22]||(o[22]=[d("Edit")])),_:2,__:[22]},1032,["href"]),n(r,{class:"dropdown-item",onClick:a=>t.banUser(e)},{default:i(()=>[d(y(e.banned===0?"Ban":"Unban")+" user ",1)]),_:2},1032,["onClick"]),n(r,{class:"dropdown-item",onClick:a=>t.sendVerifyMail(e)},{default:i(()=>o[23]||(o[23]=[d("Send Verify Mail")])),_:2,__:[23]},1032,["onClick"]),n(r,{class:"dropdown-item",onClick:a=>t.disableEmailVerify(e)},{default:i(()=>[d(y(e.email_verified_at==null?"Disable":"Enable")+" Email Verify ",1)]),_:2},1032,["onClick"]),n(D,{target:"addnewcategory","button-class":"dropdown-item",onClick:a=>t.changePassword(e)},{default:i(()=>o[24]||(o[24]=[d("Change Password ")])),_:2,__:[24]},1032,["onClick"]),e!=null&&e.employee?Y("",!0):(f(),R(D,{key:0,target:"convertToEmployee","button-class":"dropdown-item",onClick:a=>t.convertToEmployee(e)},{default:i(()=>o[25]||(o[25]=[d("Convert To Employee ")])),_:2,__:[25]},1032,["onClick"]))]),_:2},1024)])]))),256))])])]),n(x,{links:t.usersListLinks()},null,8,["links"])])])]),n(C,{"modal-title":"Change Password","modal-id":"addnewcategory","modal-size":"modal-md"},{default:i(()=>[n(B,{class:"mb-4"}),l("form",{onSubmit:o[2]||(o[2]=A(()=>{},["prevent"]))},[n(p,{title:"Password",type:"password",modelValue:t.changePasswordData.password,"onUpdate:modelValue":o[0]||(o[0]=e=>t.changePasswordData.password=e)},null,8,["modelValue"]),n(p,{title:"Confirm Password",type:"password",modelValue:t.changePasswordData.password_confirmation,"onUpdate:modelValue":o[1]||(o[1]=e=>t.changePasswordData.password_confirmation=e)},null,8,["modelValue"]),n(T,{"button-text":"Save Changes","button-type":"submit",onClick:t.changePasswordFormSubmit,disabled:t.changePasswordData.processing},null,8,["onClick","disabled"])],32)]),_:1}),n(C,{"modal-title":"Convert To Employee","modal-id":"convertToEmployee","modal-size":"modal-md"},{default:i(()=>[n(B,{class:"mb-4"}),l("form",{onSubmit:o[16]||(o[16]=A(()=>{},["prevent"]))},[n(w,{title:"Employee Type",onChange:o[3]||(o[3]=e=>t.employeeTypeChange(e.target.value)),options:t.employeeType,modelValue:t.convertToEmployeeData.employee_type,"onUpdate:modelValue":o[4]||(o[4]=e=>t.convertToEmployeeData.employee_type=e)},null,8,["options","modelValue"]),t.isExistingEmployee?(f(),b("div",_e,[n(w,{title:"Existing Employees",options:t.employeesList(),modelValue:t.convertToEmployeeData.existing_employee_id,"onUpdate:modelValue":o[15]||(o[15]=e=>t.convertToEmployeeData.existing_employee_id=e)},null,8,["options","modelValue"])])):(f(),b("div",ve,[n(w,{title:"Category*",options:t.catList(),modelValue:t.convertToEmployeeData.catId,"onUpdate:modelValue":o[5]||(o[5]=e=>t.convertToEmployeeData.catId=e)},null,8,["options","modelValue"]),n(w,{title:"Status*",options:t.statusOption,modelValue:t.convertToEmployeeData.status,"onUpdate:modelValue":o[6]||(o[6]=e=>t.convertToEmployeeData.status=e)},null,8,["options","modelValue"]),n(p,{type:"number",title:"Salary*",modelValue:t.convertToEmployeeData.salary,"onUpdate:modelValue":o[7]||(o[7]=e=>t.convertToEmployeeData.salary=e)},null,8,["modelValue"]),l("div",we,[l("div",ge,[o[27]||(o[27]=l("label",{class:"info-title"}," Date Of Birth* ",-1)),n(k,{modelValue:t.convertToEmployeeData.dateOfBirth,"onUpdate:modelValue":o[8]||(o[8]=e=>t.convertToEmployeeData.dateOfBirth=e)},null,8,["modelValue"])])]),l("div",be,[l("div",Ee,[o[28]||(o[28]=l("label",{class:"info-title"}," Join Date* ",-1)),n(k,{modelValue:t.convertToEmployeeData.joinDate,"onUpdate:modelValue":o[9]||(o[9]=e=>t.convertToEmployeeData.joinDate=e)},null,8,["modelValue"])])]),n(S,{title:"Address",modelValue:t.convertToEmployeeData.address,"onUpdate:modelValue":o[10]||(o[10]=e=>t.convertToEmployeeData.address=e)},null,8,["modelValue"]),n(p,{type:"text",title:"Emergency Number*",modelValue:t.convertToEmployeeData.att_id,"onUpdate:modelValue":o[11]||(o[11]=e=>t.convertToEmployeeData.att_id=e)},null,8,["modelValue"]),n(p,{type:"number",title:"Emergency Number*",modelValue:t.convertToEmployeeData.emergencyNumber,"onUpdate:modelValue":o[12]||(o[12]=e=>t.convertToEmployeeData.emergencyNumber=e)},null,8,["modelValue"]),n(S,{title:"Personal Information (NID/Passport Info)",modelValue:t.convertToEmployeeData.personalInfo,"onUpdate:modelValue":o[13]||(o[13]=e=>t.convertToEmployeeData.personalInfo=e)},null,8,["modelValue"]),n(P,{modelValue:t.convertToEmployeeData.imageId,"onUpdate:modelValue":o[14]||(o[14]=e=>t.convertToEmployeeData.imageId=e)},null,8,["modelValue"])])),n(T,{"button-text":"Save Changes","button-type":"submit",onClick:t.convertToEmployeeFormSubmit,disabled:t.convertToEmployeeData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const Ne=F(ie,[["render",Ve]]);export{Ne as default};

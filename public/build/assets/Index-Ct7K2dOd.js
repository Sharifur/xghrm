import{A as C}from"./AdminMaster-DAOKSNgl.js";import{K as x,H as A,u as i,L as I,r as l,c,o as p,a,b as e,g as f,f as P,F as v,p as h,t as d,n as M,w as E,m as w}from"./app-D5e4lDaM.js";import{P as z}from"./Pagination-CRyZCiHA.js";import{S as g}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{B as F,a as N}from"./BsModalButton-CMaJHnMY.js";import{I as T}from"./Input-COvnO4va.js";import{S as H}from"./Select-BzywdgIJ.js";import{B as U}from"./Button-IgJV3IAp.js";import{V as K}from"./ValidationErrors-DkhBCGEt.js";import{s as Y}from"./vue3-datepicker.esm-B2CX1hw2.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={name:"Index",layout:C,components:{Pagination:z,Link:I,usePage:i,BsModal:N,BsModalButton:F,BsInput:T,BsSelect:H,BsButton:U,BreezeValidationErrors:K,Datepicker:Y,Head:A,VueDatePicker:x},setup(){const r=[{label:"Leave",value:"leave"},{label:"Sick Leave",value:"sick-leave"},{label:"Paid Leave",value:"paid-leave"}],t=w({employee_id:null,type:null,date_time:null});function _(){return i().props.value.attendance_logs.data}function o(){return i().props.value.attendance_logs.links}function b(s){g.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(u=>{u.isConfirmed&&w({id:s.id}).post(route("admin.employee.attendance.logs.delete"),{onSuccess:()=>{g.fire("Deleted","item removed from system","warning")}})})}function B(){t.post(route("admin.employee.attendance.log.add"),{onSuccess:s=>{g.fire("Success","new attendance log added","success"),t.reset("employee_id","type","date_time","name")}})}function m(){return i().props.value.employees}return{attendancesData:_,attendancesLink:o,deleteItem:b,addAttendanceLogFormSubmit:B,attendanceTypes:r,newLogData:t,employeesList:m}}},G={class:"row"},J={class:"col-lg-12"},O={class:"dashboard-settings margin-top-40 margin-bottom-30"},Q={class:"header-wrap d-flex justify-content-between"},R={class:"btn-wrapper"},W={class:"table-wrap table-responsive"},X={class:"table table-light"},Z={class:"single-info-input margin-top-30"};function $(r,t,_,o,b,B){const m=l("Head"),s=l("BsModalButton"),u=l("Link"),L=l("Pagination"),k=l("BreezeValidationErrors"),y=l("BsSelect"),D=l("VueDatePicker"),V=l("BsButton"),S=l("BsModal");return p(),c(v,null,[a(m,{title:"All Leaves"}),e("div",G,[e("div",J,[e("div",O,[e("div",Q,[t[5]||(t[5]=e("h2",{class:"dashboards-title margin-bottom-40"},"All Leaves",-1)),e("div",R,[a(s,{target:"addnewcategory","button-class":"btn btn-info m-1"},{default:f(()=>[...t[4]||(t[4]=[P("Add New Leave",-1)])]),_:1})])]),e("div",W,[e("table",X,[t[7]||(t[7]=e("thead",null,[e("th",null,"ID"),e("th",null,"Employee Name"),e("th",null,"Type"),e("th",null,"Date"),e("th",null,"Actions")],-1)),e("tbody",null,[(p(!0),c(v,null,h(o.attendancesData(),n=>(p(),c("tr",{key:n.id},[e("td",null,d(n.id),1),e("td",null,d(n.name),1),e("td",null,[e("span",{class:M(["alert text-capitalize",n.type==="C/In"?"alert-success":"alert-danger"])},d(n.type.replace("-"," ")),3)]),e("td",null,d(r.readableDateFormat(n.date_time)),1),e("td",null,[a(u,{onClick:ee=>o.deleteItem(n),class:"btn btn-danger m-2"},{default:f(()=>[...t[6]||(t[6]=[e("i",{class:"fas fa-trash"},null,-1)])]),_:2},1032,["onClick"])])]))),128))])])]),a(L,{links:o.attendancesLink()},null,8,["links"])])])]),a(S,{"modal-title":"Add New Attendance Log","modal-id":"addnewcategory","modal-size":"modal-md"},{default:f(()=>[a(k,{class:"mb-4"}),e("form",{onSubmit:t[3]||(t[3]=E(()=>{},["prevent"]))},[a(y,{title:"Employee",options:o.employeesList(),modelValue:o.newLogData.employee_id,"onUpdate:modelValue":t[0]||(t[0]=n=>o.newLogData.employee_id=n)},null,8,["options","modelValue"]),a(y,{title:"Status",options:o.attendanceTypes,modelValue:o.newLogData.type,"onUpdate:modelValue":t[1]||(t[1]=n=>o.newLogData.type=n)},null,8,["options","modelValue"]),e("div",Z,[t[8]||(t[8]=e("label",{class:"info-title"},"Date Time",-1)),a(D,{modelValue:o.newLogData.date_time,"onUpdate:modelValue":t[2]||(t[2]=n=>o.newLogData.date_time=n)},null,8,["modelValue"])]),a(V,{"button-text":"Submit","button-type":"submit",onClick:o.addAttendanceLogFormSubmit,disabled:o.newLogData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const ce=j(q,[["render",$]]);export{ce as default};

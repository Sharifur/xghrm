import{A as x}from"./AdminMaster-PRCD0Qwx.js";import{L as V,u as d,H as T,m as p,c as h,a,b as e,t as i,g as f,F as A,p as I,r as l,o as L,e as F,n as M,d as P,s as z,w as E}from"./app-epR7_ZJT.js";import{P as H}from"./Pagination-Vb3eupCL.js";import{S as c}from"./sweetalert2.all-Ocq-q7Tl.js";import{B as N,a as Y}from"./BsModalButton-3qrIlVuN.js";import{B as U}from"./Input-K_weuUQS.js";import{B as D}from"./Select-Z6Gvsj9q.js";import{B as O}from"./Button-gCH1OFSl.js";import{B as j}from"./ValidationErrors-WpsZwU4v.js";import{s as W}from"./vue3-datepicker.esm-2T0pJYf6.js";import{_ as Z}from"./_plugin-vue_export-helper-x3n3nnut.js";const q={name:"Index",layout:x,components:{Select:D,Pagination:H,Link:V,usePage:d,BsModal:N,BsModalButton:Y,BsInput:U,BsSelect:D,BsButton:O,BreezeValidationErrors:j,Datepicker:W,Head:T},setup(){const _=[{label:"Pending",value:0},{label:"Approved",value:1}],n=[{label:"C/In",value:"C/In"},{label:"C/Out",value:"C/Out"},{label:"Leave",value:"leave"},{label:"Sick Leave",value:"sick-leave"},{label:"Paid Leave",value:"paid-leave"},{label:"Holiday",value:"holiday"},{label:"Work From Home",value:"work-from-home"}],g=p({filter:null}),t=p({employee_id:null,type:null,date_time:null}),k=d().props.value.page_type;function C(){g.get(route("admin.employee.attendance.logs"))}function b(){return d().props.value.attendance_logs.data}function v(){return d().props.value.attendance_logs.links}function m(s){c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(r=>{r.isConfirmed&&p({id:s.id}).post(route("admin.employee.attendance.logs.delete"),{onSuccess:()=>{c.fire("Deleted","item removed from system","warning")}})})}function B(s){c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Approve it!"}).then(r=>{r.isConfirmed&&p({id:s}).post(route("admin.employee.attendance.logs.approve"),{onSuccess:()=>{}})})}function y(){t.post(route("admin.employee.attendance.log.add"),{onSuccess:s=>{c.fire("Success","new attendance log added","success"),t.reset("employee_id","type","date_time","name")}})}function u(){return d().props.value.employees}function w(){c.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(s=>{s.isConfirmed&&(axios.post(route("admin.employee.attendance.logs.approve.pending")),window.location.reload())})}return{attendancesData:b,attendancesLink:v,deleteItem:m,addAttendanceLogFormSubmit:y,attendanceTypes:n,newLogData:t,employeesList:u,filterOptions:_,applyFilter:C,filterData:g,page_type:k,submitApproveData:B,approveAllLogs:w}}},G={class:"row"},J={class:"col-lg-12"},K={class:"dashboard-settings margin-top-40 margin-bottom-30"},Q={class:"header-wrap d-flex justify-content-between"},R={class:"dashboards-title margin-bottom-40"},X={class:"btn-wrapper"},$={class:"table-wrap table-responsive mt-5"},ee={class:"table table-light"},te=e("thead",null,[e("th",null,"ID"),e("th",null,"Employee Name"),e("th",null,"Type"),e("th",null,"Date"),e("th",null,"Time "),e("th",null,"Actions")],-1),oe=e("i",{class:"fas fa-check"},null,-1),ne=e("i",{class:"fas fa-trash"},null,-1),ae={class:"single-info-input margin-top-30"},le=e("label",{class:"info-title"},"Date Time",-1);function se(_,n,g,t,k,C){const b=l("Head"),v=l("BsModalButton"),m=l("Link"),B=l("Pagination"),y=l("BreezeValidationErrors"),u=l("BsSelect"),w=l("Datepicker"),s=l("BsButton"),r=l("BsModal");return L(),h(A,null,[a(b,{title:"All Attendance Logs"}),e("div",G,[e("div",J,[e("div",K,[e("div",Q,[e("h2",R,"All "+i(t.page_type)+" Attendance Logs",1),e("div",X,[e("button",{onClick:n[0]||(n[0]=(...o)=>t.approveAllLogs&&t.approveAllLogs(...o)),class:"btn btn-danger"},"Approve All Pending Log"),a(v,{target:"addnewcategory","button-class":"btn btn-info m-1"},{default:f(()=>[F("Add New Log")]),_:1})])]),e("div",$,[e("table",ee,[te,e("tbody",null,[(L(!0),h(A,null,I(t.attendancesData(),o=>(L(),h("tr",{key:o.id},[e("td",null,i(o.id),1),e("td",null,i(o.name),1),e("td",null,[e("span",{class:M(["alert text-capitalize",o.type==="C/In"?"alert-success":"alert-danger"])},i(o.type.replace("-"," ")),3),P(a(m,{onClick:S=>t.submitApproveData(o.id),class:"btn btn-success m-2"},{default:f(()=>[oe]),_:2},1032,["onClick"]),[[z,o.status===0]])]),e("td",null,i(_.readableDateFormat(o.date_time)),1),e("td",null,i(new Date(o.date_time).toLocaleTimeString("en-US",{timeZone:"Asia/Dhaka"})),1),e("td",null,[a(m,{onClick:S=>t.deleteItem(o),class:"btn btn-danger m-2"},{default:f(()=>[ne]),_:2},1032,["onClick"])])]))),128))])])]),a(B,{links:t.attendancesLink()},null,8,["links"])])])]),a(r,{"modal-title":"Add New Attendance Log","modal-id":"addnewcategory","modal-size":"modal-md"},{default:f(()=>[a(y,{class:"mb-4"}),e("form",{onSubmit:n[4]||(n[4]=E(()=>{},["prevent"]))},[a(u,{title:"Employee",options:t.employeesList(),modelValue:t.newLogData.employee_id,"onUpdate:modelValue":n[1]||(n[1]=o=>t.newLogData.employee_id=o)},null,8,["options","modelValue"]),a(u,{title:"Status",options:t.attendanceTypes,modelValue:t.newLogData.type,"onUpdate:modelValue":n[2]||(n[2]=o=>t.newLogData.type=o)},null,8,["options","modelValue"]),e("div",ae,[le,a(w,{modelValue:t.newLogData.date_time,"onUpdate:modelValue":n[3]||(n[3]=o=>t.newLogData.date_time=o)},null,8,["modelValue"])]),a(s,{"button-text":"Submit","button-type":"submit",onClick:t.addAttendanceLogFormSubmit,disabled:t.newLogData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const ve=Z(q,[["render",se]]);export{ve as default};

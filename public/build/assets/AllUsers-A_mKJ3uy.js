import{A as z}from"./AdminMaster-p_-3Ut0F.js";import{o as f,c as _,b as a,t as y,k as O,n as P,L as j,H,l as J,m as g,a as n,g as s,F as L,p as R,u as S,r as i,e as d,d as M,s as N,q as Y,h as q,w as A}from"./app-XmhLysL3.js";import{P as W}from"./Pagination-0FBZVfWn.js";import{_ as F}from"./_plugin-vue_export-helper-x3n3nnut.js";import{S as p}from"./sweetalert2.all-ysYP70Aw.js";import{a as G,B as K}from"./BsModalButton-BgiMRUcJ.js";import{B as Q}from"./ValidationErrors-LQ350ezF.js";import{I as X}from"./Input-mT4jOMS5.js";import{B as Z}from"./Button-9FjwbGXe.js";import{S as $}from"./Select-BVmdasBU.js";import{M as ee}from"./MediaUploader--uQQgINX.js";import{T as oe}from"./Textarea-Eown17tJ.js";import{s as te}from"./vue3-datepicker.esm-e65TQBEI.js";const ne={name:"DropdownButtons",props:{title:String},data(){return{dropdownStatus:!1}},methods:{toggleClass(){this.dropdownStatus=!this.dropdownStatus}}},ae=["aria-expanded"];function le(m,t,c,o,v,b){return f(),_("div",{class:P(["dropdown",v.dropdownStatus?"show":""])},[a("button",{class:"btn btn-secondary dropdown-toggle",onClick:t[0]||(t[0]=(...E)=>b.toggleClass&&b.toggleClass(...E)),type:"button","aria-expanded":v.dropdownStatus},y(c.title),9,ae),a("div",{class:P(["dropdown-menu",v.dropdownStatus?"show":""])},[O(m.$slots,"default")],2)],2)}const se=F(ne,[["render",le]]),ie={name:"AllUsers",layout:z,components:{Pagination:W,Link:j,DropdownButtons:se,BsModalButton:G,BsModal:K,BreezeValidationErrors:Q,BsInput:X,BsButton:Z,BsSelect:$,MediaUploader:ee,BsTextarea:oe,Datepicker:te,Head:H},setup(){const m=[{label:"New",value:"new"},{label:"Existing",value:"existing"}],t=J(!1),c=g({id:null,password:null,password_confirmation:null}),o=g({userId:null,employee_type:"new",existing_employee_id:null,catId:null,status:null,dateOfBirth:new Date,joinDate:new Date,address:null,emergencyNumber:null,personalInfo:null,imageId:null});function v(){return S().props.value.users.data}function b(){return S().props.value.users.links}function E(e){p.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(l=>{g({id:e.id}).post(route("admin.users.delete"),{onSuccess:()=>{p.fire("Deleted!!","your won't able to revert it","error")}})})}function r(e){c.id=e.id,c.reset("password","password_confirmation")}function V(e){g({id:e.id,email_verified_at:e.email_verified_at}).post(route("admin.users.disable.mail.verify"),{onSuccess:()=>{p.fire("Success!!","Settings Changed","warning")}})}function I(e){const l=g({id:e.id,banned:e.banned});let D=e.banned===0?"Banned":"Unbanned";l.post(route("admin.users.ban.user"),{onSuccess:()=>{p.fire("success",D+" user successfully","warning")}})}function U(){o.post(route("admin.users.make.employee"),{onSuccess:e=>{p.fire("success","converted to employee","success")},onError:e=>{}})}function B(e){o.userId=e.id}function u(){c.post(route("admin.users.change.password"),{onSuccess:()=>{p.fire("Success!!","Password Changed","success")}})}function T(e){g({id:e.id}).post(route("admin.users.resend.verify.mail"),{onSuccess:D=>{p.fire("Success!!","verify mail send","success")},onError:D=>{console.log(D)}})}function h(e){t.value=e!=="new"}function w(){return S().props.value.category}function C(){return S().props.value.employees}const k=[{label:"Working",value:1},{label:"Left Job",value:0}];function x(e){var l;return(l=e==null?void 0:e.employee)!=null&&l.id?route("admin.employee.view",e==null?void 0:e.employee.id):null}return{employeeType:m,employeesList:C,isExistingEmployee:t,statusOption:k,catList:w,usersList:v,usersListLinks:b,deleteItem:E,changePassword:r,disableEmailVerify:V,sendVerifyMail:T,banUser:I,changePasswordData:c,convertToEmployeeData:o,changePasswordFormSubmit:u,convertToEmployeeFormSubmit:U,convertToEmployee:B,employeeTypeChange:h,employeeRoute:x}}},de={class:"row"},re={class:"col-lg-12"},me={class:"dashboard-settings margin-top-40"},ce={class:"header-wrap d-flex justify-content-between"},ue=a("h2",{class:"dashboards-title margin-bottom-40"},"All Users",-1),pe={class:"btn-wrp"},fe={class:"table-responsive"},ye={class:"table table-stripped"},ve=a("thead",null,[a("th",null,"Id"),a("th",null,"Name"),a("th",null,"Email"),a("th",null,"Action")],-1),we=a("i",{class:"fas fa-briefcase btn-success text-white btn btn-sm",title:"An Employee"},null,-1),ge={class:"fas fa-check-circle text-success"},_e={key:0,class:"newemployee"},be={class:"single-dashboard-input"},Ee={class:"single-info-input margin-top-30"},De=a("label",{class:"info-title"}," Date Of Birth* ",-1),Ve={class:"single-dashboard-input"},Be={class:"single-info-input margin-top-30"},Te=a("label",{class:"info-title"}," Join Date* ",-1),he={key:1,class:"oldemployee"};function Ce(m,t,c,o,v,b){const E=i("Head"),r=i("Link"),V=i("BsModalButton"),I=i("DropdownButtons"),U=i("Pagination"),B=i("BreezeValidationErrors"),u=i("BsInput"),T=i("BsButton"),h=i("BsModal"),w=i("BsSelect"),C=i("Datepicker"),k=i("BsTextarea"),x=i("MediaUploader");return f(),_(L,null,[n(E,{title:"All Users"}),a("div",de,[a("div",re,[a("div",me,[a("div",ce,[ue,a("div",pe,[n(r,{href:m.route("admin.users.new"),class:"btn btn-secondary"},{default:s(()=>[d("Add New")]),_:1},8,["href"])])]),a("div",fe,[a("table",ye,[ve,a("tbody",null,[(f(!0),_(L,null,R(o.usersList(),e=>(f(),_("tr",null,[a("td",null,y(e.id),1),a("td",null,[d(y(e.name)+" ( "+y(e.username)+" ) ",1),M(n(r,{href:o.employeeRoute(e)},{default:s(()=>[we]),_:2},1032,["href"]),[[N,e==null?void 0:e.employee]])]),a("td",null,[d(y(e.email)+" ",1),M(a("i",ge,null,512),[[N,e.email_verified_at!=null]])]),a("td",null,[n(I,{title:"Actions"},{default:s(()=>[n(r,{class:"dropdown-item",href:m.route("admin.users.view",e.id)},{default:s(()=>[d("View")]),_:2},1032,["href"]),n(r,{class:"dropdown-item",onClick:l=>o.deleteItem(e)},{default:s(()=>[d("Delete")]),_:2},1032,["onClick"]),n(r,{class:"dropdown-item",href:m.route("admin.users.edit",e.id)},{default:s(()=>[d("Edit")]),_:2},1032,["href"]),n(r,{class:"dropdown-item",onClick:l=>o.banUser(e)},{default:s(()=>[d(y(e.banned===0?"Ban":"Unban")+" user ",1)]),_:2},1032,["onClick"]),n(r,{class:"dropdown-item",onClick:l=>o.sendVerifyMail(e)},{default:s(()=>[d("Send Verify Mail")]),_:2},1032,["onClick"]),n(r,{class:"dropdown-item",onClick:l=>o.disableEmailVerify(e)},{default:s(()=>[d(y(e.email_verified_at==null?"Disable":"Enable")+" Email Verify ",1)]),_:2},1032,["onClick"]),n(V,{target:"addnewcategory","button-class":"dropdown-item",onClick:l=>o.changePassword(e)},{default:s(()=>[d("Change Password ")]),_:2},1032,["onClick"]),e!=null&&e.employee?q("",!0):(f(),Y(V,{key:0,target:"convertToEmployee","button-class":"dropdown-item",onClick:l=>o.convertToEmployee(e)},{default:s(()=>[d("Convert To Employee ")]),_:2},1032,["onClick"]))]),_:2},1024)])]))),256))])])]),n(U,{links:o.usersListLinks()},null,8,["links"])])])]),n(h,{"modal-title":"Change Password","modal-id":"addnewcategory","modal-size":"modal-md"},{default:s(()=>[n(B,{class:"mb-4"}),a("form",{onSubmit:t[2]||(t[2]=A(()=>{},["prevent"]))},[n(u,{title:"Password",type:"password",modelValue:o.changePasswordData.password,"onUpdate:modelValue":t[0]||(t[0]=e=>o.changePasswordData.password=e)},null,8,["modelValue"]),n(u,{title:"Confirm Password",type:"password",modelValue:o.changePasswordData.password_confirmation,"onUpdate:modelValue":t[1]||(t[1]=e=>o.changePasswordData.password_confirmation=e)},null,8,["modelValue"]),n(T,{"button-text":"Save Changes","button-type":"submit",onClick:o.changePasswordFormSubmit,disabled:o.changePasswordData.processing},null,8,["onClick","disabled"])],32)]),_:1}),n(h,{"modal-title":"Convert To Employee","modal-id":"convertToEmployee","modal-size":"modal-md"},{default:s(()=>[n(B,{class:"mb-4"}),a("form",{onSubmit:t[16]||(t[16]=A(()=>{},["prevent"]))},[n(w,{title:"Employee Type",onChange:t[3]||(t[3]=e=>o.employeeTypeChange(e.target.value)),options:o.employeeType,modelValue:o.convertToEmployeeData.employee_type,"onUpdate:modelValue":t[4]||(t[4]=e=>o.convertToEmployeeData.employee_type=e)},null,8,["options","modelValue"]),o.isExistingEmployee?(f(),_("div",he,[n(w,{title:"Existing Employees",options:o.employeesList(),modelValue:o.convertToEmployeeData.existing_employee_id,"onUpdate:modelValue":t[15]||(t[15]=e=>o.convertToEmployeeData.existing_employee_id=e)},null,8,["options","modelValue"])])):(f(),_("div",_e,[n(w,{title:"Category*",options:o.catList(),modelValue:o.convertToEmployeeData.catId,"onUpdate:modelValue":t[5]||(t[5]=e=>o.convertToEmployeeData.catId=e)},null,8,["options","modelValue"]),n(w,{title:"Status*",options:o.statusOption,modelValue:o.convertToEmployeeData.status,"onUpdate:modelValue":t[6]||(t[6]=e=>o.convertToEmployeeData.status=e)},null,8,["options","modelValue"]),n(u,{type:"number",title:"Salary*",modelValue:o.convertToEmployeeData.salary,"onUpdate:modelValue":t[7]||(t[7]=e=>o.convertToEmployeeData.salary=e)},null,8,["modelValue"]),a("div",be,[a("div",Ee,[De,n(C,{modelValue:o.convertToEmployeeData.dateOfBirth,"onUpdate:modelValue":t[8]||(t[8]=e=>o.convertToEmployeeData.dateOfBirth=e)},null,8,["modelValue"])])]),a("div",Ve,[a("div",Be,[Te,n(C,{modelValue:o.convertToEmployeeData.joinDate,"onUpdate:modelValue":t[9]||(t[9]=e=>o.convertToEmployeeData.joinDate=e)},null,8,["modelValue"])])]),n(k,{title:"Address",modelValue:o.convertToEmployeeData.address,"onUpdate:modelValue":t[10]||(t[10]=e=>o.convertToEmployeeData.address=e)},null,8,["modelValue"]),n(u,{type:"text",title:"Emergency Number*",modelValue:o.convertToEmployeeData.att_id,"onUpdate:modelValue":t[11]||(t[11]=e=>o.convertToEmployeeData.att_id=e)},null,8,["modelValue"]),n(u,{type:"number",title:"Emergency Number*",modelValue:o.convertToEmployeeData.emergencyNumber,"onUpdate:modelValue":t[12]||(t[12]=e=>o.convertToEmployeeData.emergencyNumber=e)},null,8,["modelValue"]),n(k,{title:"Personal Information (NID/Passport Info)",modelValue:o.convertToEmployeeData.personalInfo,"onUpdate:modelValue":t[13]||(t[13]=e=>o.convertToEmployeeData.personalInfo=e)},null,8,["modelValue"]),n(x,{modelValue:o.convertToEmployeeData.imageId,"onUpdate:modelValue":t[14]||(t[14]=e=>o.convertToEmployeeData.imageId=e)},null,8,["modelValue"])])),n(T,{"button-text":"Save Changes","button-type":"submit",onClick:o.convertToEmployeeFormSubmit,disabled:o.convertToEmployeeData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const je=F(ie,[["render",Ce]]);export{je as default};

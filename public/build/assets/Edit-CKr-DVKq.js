import{A}from"./AdminMaster-BKDcT64w.js";import{K as B,L as W,H as U,r as h,c as d,o as p,a as c,b as s,g as O,f as n,w as T,F as S,p as C,t as l,h as b,u as g,l as y,m as H}from"./app-qbVGY1Fu.js";import{B as J}from"./Button-4Aq4C02d.js";import{I as R}from"./Input-BWmjDHzc.js";import{S as G}from"./Select-9sm802O1.js";import{T as j}from"./Textarea-DFH2rlxa.js";import{s as K}from"./vue3-datepicker.esm-wNiG9bIW.js";import"./sweetalert2.esm.all-acGi8jXx.js";import{h as X}from"./html2pdf-XtAH2gUT.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const q={layout:A,components:{Button:J,Input:R,Select:G,Textarea:j,Head:U,Datepicker:K,Link:W,VueDatePicker:B},setup(){const x=g().props.value.all_employee,t=g().props.value.salarySlipData,_=y({name:t.employee.name,salary:t.salary,category:t.designation}),e=y(g().props.value.attenadnceCount),k=y(g().props.value.holidayCount),V=y(g().props.value.leaveCount),F=y(g().props.value.sickLeaveCount),E=y(g().props.value.paidLeaveCount),f=y(0),D=y(0),v=y(0),o=H({salarySlipID:t.id,employee_id:t.employee.id,month:new Date(t.month),extraEarningFields:JSON.parse(t.extraEarningFields),extraDeductionFields:JSON.parse(t.extraDeductionFields)});function a(){o.extraEarningFields.push({description:null,amount:0})}function i(){o.extraDeductionFields.push({description:null,amount:0})}function L(r){o.extraEarningFields.length>1&&o.extraEarningFields.splice(o.extraEarningFields.indexOf(r),1)}function M(r){o.extraDeductionFields.length>1&&o.extraDeductionFields.splice(o.extraDeductionFields.indexOf(r),1)}function P(){let r=_.value.name+"-"+N(o.month)+"-salary-slip.pdf";X(document.getElementById("element-to-convert"),{margin:1,filename:r}),axios.post(route("admin.employee.salary.slip.update"),o)}function I(){axios.post(route("admin.employee.details",o.employee_id),{month:o.month}).then(r=>{let u=r.data,m=r.data.details;_.value={name:m.name,salary:m.salary,category:m.designation},e.value=u.attenadnceCount,k.value=u.holidayCount,V.value=u.leaveCount,F.value=u.sickLeaveCount,E.value=u.paidLeaveCount,w()})}function N(r){let u=["January","February","March","April","May","June","July","August","September","October","November","December"];return r!=null?u[new Date(r).getMonth()]:""}function w(){let r=0;o.extraEarningFields.map(m=>{m.amount>0&&(r+=parseFloat(m.amount))});let u=0;o.extraDeductionFields.map(m=>{m.amount>0&&(u+=parseFloat(m.amount))}),f.value=r>0?parseFloat(r):0,D.value=u>0?parseFloat(u):0,_.salary!=="undefined"&&(f.value+=parseFloat(_.value.salary)),v.value=parseFloat(f.value)-parseFloat(D.value)}return{employeeList:x,salarySlipData:o,addMoreEarningField:a,addMoreDeductionField:i,removeEarningField:L,removeDeductionField:M,exportToPDF:P,selectedEmployee:_,changeEmployeeSelect:I,holidayCount:k,leaveCount:V,sickLeaveCount:F,paidLeaveCount:E,attenadnceCount:e,getSelectedMonthName:N,grossEarning:f,grossDeduction:D,payableAmount:v,calculateSalary:w}},mounted(){this.calculateSalary()}},z={class:"row"},Q={class:"col-lg-12"},Z={class:"header-wrap d-flex justify-content-between"},$={class:"btn-wrp"},ss={class:"row"},ts={class:"col-lg-4"},es={class:"single-info-input margin-top-30"},as={class:"repeaterFieldWarp"},ls={class:"repeater-inner-wrap"},os={class:"actionButtonWrap"},ns=["onClick"],is={class:"repeaterFieldWarp"},rs={class:"repeater-inner-wrap"},ds={class:"actionButtonWrap"},ps=["onClick"],us={class:"col-lg-8"},ms={class:"head-raw margin-top-40 margin-left-60"},cs={class:"color-explanation"},ys={class:"bg-success"},vs={class:"badge"},gs={class:"holiday"},_s={class:"badge"},fs={class:"leave"},hs={class:"badge"},Ds={class:"sick-leave"},Ss={class:"badge"},xs={class:"paid-leave"},Fs={class:"badge"},Es={id:"element-to-convert"},Cs={class:"salarySlipPdfOuterWrapper"},bs={class:"headerPart"},ks={class:"subjectWarp"},Vs={class:"period"},Ns={class:"employeeInfoWrap"},ws={class:"tableWithCalculation table-responsive"},Ls={class:"salary-sheet"},Ms={class:"salary-sheet-flex"},Ps={class:"salary-sheet-item"},Is={class:"salary-sheet-contents"},As={class:"salary-sheet-contents-list"},Bs={class:"salary-sheet-list"},Ws={class:"list-para right"},Us={key:0,class:"list-para left"},Os={key:1,class:"list-para right"},Ts={class:"salary-sheet-item"},Hs={class:"salary-sheet-contents"},Js={class:"salary-sheet-contents-list"},Rs={key:0,class:"list-para left"},Gs={key:1,class:"list-para right"},js={class:"salary-sheet-gross"},Ks={class:"salary-sheet-gross-item"},Xs={class:"gross-list"},Ys={class:"gross-para right"},qs={class:"salary-sheet-gross-item"},zs={class:"gross-list"},Qs={class:"gross-para right"},Zs={class:"salary-sheet-gross"},$s={class:"salary-sheet-gross-item"},st={class:"gross-list"},tt={class:"gross-para right"},et={class:"salary-sheet-gross"},at={class:"salary-sheet-gross-item"},lt={class:"gross-list"},ot={class:"gross-para right"},nt={class:"footerPartWrapper"},it={class:"signature"},rt={class:"btn-wrapper margin-left-60"};function dt(x,t,_,e,k,V){const F=h("Head"),E=h("Link"),f=h("VueDatePicker"),D=h("Select"),v=h("Input"),o=h("Button");return p(),d(S,null,[c(F,{title:"Edit Salary Slip"}),s("div",z,[s("div",Q,[s("div",Z,[t[9]||(t[9]=s("h2",{class:"dashboards-title margin-bottom-40"},"Edit Salary Slip",-1)),s("div",$,[c(E,{class:"btn btn-info m-1",href:x.route("admin.employee.salary.slip")},{default:O(()=>t[8]||(t[8]=[n("All Salary Slip")])),_:1,__:[8]},8,["href"])])])]),s("div",ss,[s("div",ts,[s("form",{onSubmit:t[7]||(t[7]=T(()=>{},["prevent"]))},[s("div",es,[t[10]||(t[10]=s("label",{class:"info-title"},"Salary Month",-1)),c(f,{modelValue:e.salarySlipData.month,"onUpdate:modelValue":t[0]||(t[0]=a=>e.salarySlipData.month=a)},null,8,["modelValue"]),t[11]||(t[11]=s("span",{class:"info-text"},"Select Month First",-1))]),c(D,{title:"Employee",onChange:t[1]||(t[1]=a=>e.changeEmployeeSelect()),modelValue:e.salarySlipData.employee_id,"onUpdate:modelValue":t[2]||(t[2]=a=>e.salarySlipData.employee_id=a),options:e.employeeList},null,8,["modelValue","options"]),s("div",as,[t[14]||(t[14]=s("h4",{class:"repeater-title"},"Extra Earning Fields",-1)),s("div",ls,[(p(!0),d(S,null,C(e.salarySlipData.extraEarningFields,a=>(p(),d("div",{class:"individualItemWrapper",key:a.index},[c(v,{type:"text",title:"Description",modelValue:a.description,"onUpdate:modelValue":i=>a.description=i},null,8,["modelValue","onUpdate:modelValue"]),c(v,{type:"number",min:"0",onInput:t[3]||(t[3]=i=>e.calculateSalary()),title:"Amount",modelValue:a.amount,"onUpdate:modelValue":i=>a.amount=i},null,8,["modelValue","onUpdate:modelValue"]),s("div",os,[s("span",{class:"addMore",onClick:t[4]||(t[4]=i=>e.addMoreEarningField())},t[12]||(t[12]=[s("i",{class:"fas fa-plus"},null,-1)])),s("span",{class:"removeItem",onClick:i=>e.removeEarningField(a)},t[13]||(t[13]=[s("i",{class:"fas fa-times"},null,-1)]),8,ns)])]))),128))])]),s("div",is,[t[17]||(t[17]=s("h4",{class:"repeater-title"},"Extra Deduction Fields",-1)),s("div",rs,[(p(!0),d(S,null,C(e.salarySlipData.extraDeductionFields,a=>(p(),d("div",{class:"individualItemWrapper",key:a.index},[c(v,{type:"text",title:"Description",modelValue:a.description,"onUpdate:modelValue":i=>a.description=i},null,8,["modelValue","onUpdate:modelValue"]),c(v,{type:"number",min:"0",onInput:t[5]||(t[5]=i=>e.calculateSalary()),title:"Amount",modelValue:a.amount,"onUpdate:modelValue":i=>a.amount=i},null,8,["modelValue","onUpdate:modelValue"]),s("div",ds,[s("span",{class:"addMore",onClick:t[6]||(t[6]=i=>e.addMoreDeductionField())},t[15]||(t[15]=[s("i",{class:"fas fa-plus"},null,-1)])),s("span",{class:"removeItem",onClick:i=>e.removeDeductionField(a)},t[16]||(t[16]=[s("i",{class:"fas fa-times"},null,-1)]),8,ps)])]))),128))])])],32)]),s("div",us,[s("div",ms,[t[23]||(t[23]=s("h4",null,"Color Explanation",-1)),s("ul",cs,[s("li",ys,[t[18]||(t[18]=n("Attendance ")),s("span",vs,l(e.attenadnceCount),1)]),s("li",gs,[t[19]||(t[19]=n("Holiday ")),s("span",_s,l(e.holidayCount),1)]),s("li",fs,[t[20]||(t[20]=n("leave ")),s("span",hs,l(e.leaveCount),1)]),s("li",Ds,[t[21]||(t[21]=n("Sick Leave ")),s("span",Ss,l(e.sickLeaveCount),1)]),s("li",xs,[t[22]||(t[22]=n("Paid Leave ")),s("span",Fs,l(e.paidLeaveCount),1)])])]),s("div",Es,[s("div",Cs,[s("div",bs,[s("div",ks,[s("p",null,[t[24]||(t[24]=n("Payslip for the month of ")),s("span",Vs,l(e.getSelectedMonthName(e.salarySlipData.month)),1),n(" "+l(new Date().getFullYear()),1)])])]),s("div",Ns,[s("h3",null,[t[25]||(t[25]=s("strong",null,"Name: ",-1)),n(" "+l(e.selectedEmployee.name),1)]),s("h4",null,[t[26]||(t[26]=s("strong",null,"Department:",-1)),n(" "+l(e.selectedEmployee.category),1)])]),s("div",ws,[s("div",Ls,[s("div",Ms,[s("div",Ps,[s("div",Is,[s("ul",As,[t[29]||(t[29]=s("li",{class:"salary-sheet-list salary-sheet-head"},[s("span",{class:"list-title left"},"EARNINGS"),n(),s("span",{class:"list-title list-para right"}," PER MONTH ")],-1)),s("li",Bs,[t[27]||(t[27]=s("span",{class:"list-para left"},"Basic Salary",-1)),t[28]||(t[28]=n()),s("span",Ws,l(parseFloat(e.selectedEmployee.salary).toFixed(2)),1)]),(p(!0),d(S,null,C(e.salarySlipData.extraEarningFields,a=>(p(),d("li",{class:"salary-sheet-list",key:a.index},[a.description!==null?(p(),d("span",Us,l(a.description),1)):b("",!0),a.description!==null?(p(),d("span",Os,l(a.amount>0?parseFloat(a.amount).toFixed(2):0),1)):b("",!0)]))),128))])])]),s("div",Ts,[s("div",Hs,[s("ul",Js,[t[30]||(t[30]=s("li",{class:"salary-sheet-list salary-sheet-head"},[s("span",{class:"list-title left"},"DEDUCTIONS"),n(),s("span",{class:"list-title list-para right"}," PER MONTH ")],-1)),(p(!0),d(S,null,C(e.salarySlipData.extraDeductionFields,a=>(p(),d("li",{class:"salary-sheet-list",key:a.index},[a.description!==null?(p(),d("span",Rs,l(a.description),1)):b("",!0),a.description!==null?(p(),d("span",Gs,l(a.amount>0?parseFloat(a.amount).toFixed(2):0),1)):b("",!0)]))),128))])])])]),s("div",js,[s("div",Ks,[s("div",Xs,[t[31]||(t[31]=s("span",{class:"gross-para left"},"Gross Earnings(A)",-1)),t[32]||(t[32]=n()),s("span",Ys,l(parseFloat(e.grossEarning).toFixed(2)),1)])]),s("div",qs,[s("div",zs,[t[33]||(t[33]=s("span",{class:"gross-para left"},"Gross Deductions(B)",-1)),t[34]||(t[34]=n()),s("span",Qs,l(parseFloat(e.grossDeduction).toFixed(2)),1)])])]),s("div",Zs,[s("div",$s,[s("div",st,[t[35]||(t[35]=s("span",{class:"gross-para left"},"Net Salary Payable(A-B)",-1)),t[36]||(t[36]=n()),s("span",tt,l(parseFloat(e.payableAmount).toFixed(2)),1)])])]),s("div",et,[s("div",at,[s("div",lt,[t[37]||(t[37]=s("span",{class:"gross-para left"},"Net Salary Payable(in words)",-1)),t[38]||(t[38]=n()),s("span",ot,l(x.numberToWord(e.payableAmount))+" Tk Only",1)])])])])]),s("div",nt,[t[40]||(t[40]=s("div",{class:"signature"},[s("span",{class:"signature"},"Signature"),s("h2",null,"Sharifur Rahman"),s("span",{class:"designation"},"Ceo - Xgenious")],-1)),s("div",it,[t[39]||(t[39]=s("span",{class:"signature"},"Signature",-1)),s("h2",null,l(e.selectedEmployee.name),1)])])])]),s("div",rt,[c(o,{type:"button",onClick:e.exportToPDF,"button-text":"Save and Download PDF"},null,8,["onClick"])])])])])],64)}const Dt=Y(q,[["render",dt]]);export{Dt as default};

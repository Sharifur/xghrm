import{A as re}from"./AdminMaster-DH1wrE0a.js";import{H as de,r as ce,c as m,o as v,a as me,b as e,d as I,h as P,f as u,e as f,A as k,t as i,F as S,p as B,n as R,$ as ve,w as F,i as g,l as w,B as L,y,D as ue,x as W}from"./app-CsNfPVfU.js";import{S as p}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const pe={layout:re,name:"Reports",components:{Head:de},props:{clients:Array,revenues:Array},setup(T){const t=w("current"),M=w(!1),a=w(!1),C=w(!1),x=w([...T.clients||[]]),r=w([...T.revenues||[]]),n=L({name:"",email:"",phone:"",payment_terms:"net_30",notes:""}),d=L({client_id:"",service_type:"web_development",amount:0,currency:"BDT",status:"paid",expected_date:"",invoice_date:"",description:"",notes:""}),N=120,A=w("BDT");watch(()=>d.currency,s=>{const o=A.value;o&&d.amount>0&&o!==s&&(o==="BDT"&&s==="USD"?d.amount=Number((d.amount/N).toFixed(2)):o==="USD"&&s==="BDT"&&(d.amount=Number((d.amount*N).toFixed(2)))),A.value=s});const q=y(()=>r.value.filter(s=>s.status==="paid"&&new Date(s.created_at).getMonth()===new Date().getMonth()).reduce((s,o)=>s+o.amount,0)),G=y(()=>r.value.filter(s=>s.status==="paid").reduce((s,o)=>s+o.amount,0)),D=y(()=>r.value.filter(s=>s.status==="pending"||s.status==="overdue").reduce((s,o)=>s+o.amount,0)),Y=y(()=>r.value.filter(s=>s.service_type==="shopify_app"&&s.status==="paid").reduce((s,o)=>s+o.amount,0)),z=y(()=>x.value.filter(s=>s.is_active!==!1).sort((s,o)=>s.name.localeCompare(o.name))),H=y(()=>r.value.filter(o=>o.status==="paid"&&new Date(o.created_at).getMonth()===new Date().getMonth()-1).reduce((o,l)=>o+l.amount,0)*1.1+D.value*.8),K=y(()=>{const s={};return r.value.filter(o=>o.status==="paid").forEach(o=>{s[o.service_type]||(s[o.service_type]={amount:0,count:0}),s[o.service_type].amount+=o.amount,s[o.service_type].count+=1}),Object.entries(s).map(([o,l])=>({type:U(o),amount:l.amount,count:l.count,icon:V(o),color:J(o)})).sort((o,l)=>l.amount-o.amount)}),Q=y(()=>{const s={};return r.value.filter(o=>o.status==="paid").forEach(o=>{s[o.client_id]||(s[o.client_id]={total_revenue:0,last_payment_date:null,pending:0}),s[o.client_id].total_revenue+=o.amount,(!s[o.client_id].last_payment_date||o.created_at>s[o.client_id].last_payment_date)&&(s[o.client_id].last_payment_date=o.created_at)}),r.value.filter(o=>o.status==="pending"||o.status==="overdue").forEach(o=>{s[o.client_id]&&(s[o.client_id].pending+=o.amount)}),x.value.map(o=>{var l,c,b;return{...o,total_revenue:((l=s[o.id])==null?void 0:l.total_revenue)||0,last_payment_date:E((c=s[o.id])==null?void 0:c.last_payment_date),pending:((b=s[o.id])==null?void 0:b.pending)||0}}).filter(o=>o.total_revenue>0).sort((o,l)=>l.total_revenue-o.total_revenue).slice(0,10)}),_=y(()=>r.value.filter(s=>s.status==="pending"||s.status==="overdue").map(s=>{var o;return{...s,client_name:((o=x.value.find(l=>l.id===s.client_id))==null?void 0:o.name)||"Unknown Client",service_icon:V(s.service_type),expected_date:E(s.expected_date)}}).sort((s,o)=>new Date(s.expected_date)-new Date(o.expected_date))),h=s=>new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:0}).format(s||0),U=s=>({webflow_template:"Webflow Templates",shopify_app:"Shopify Apps",web_development:"Web Development",consulting:"Consulting",maintenance:"Maintenance",other:"Other Services"})[s]||s,V=s=>({webflow_template:"fas fa-globe",shopify_app:"fas fa-shopping-cart",web_development:"fas fa-code",consulting:"fas fa-handshake",maintenance:"fas fa-cogs",other:"fas fa-star"})[s]||"fas fa-star",J=s=>({webflow_template:"bg-success",shopify_app:"bg-info",web_development:"bg-primary",consulting:"bg-warning",maintenance:"bg-secondary",other:"bg-dark"})[s]||"bg-secondary",E=s=>s?new Date(s).toLocaleDateString():"N/A",X=s=>s.status==="overdue"?"payment-overdue":new Date(s.expected_date)<new Date?"payment-due-soon":"",Z=s=>s.status==="overdue"?"bg-danger":new Date(s.expected_date)<new Date?"bg-warning":"bg-success",$=s=>s.status==="overdue"?"Overdue":new Date(s.expected_date)<new Date?"Due Soon":"On Track",O=()=>{M.value=!1,Object.keys(n).forEach(s=>{n[s]=s==="payment_terms"?"net_30":""})},j=()=>{a.value=!1,Object.keys(d).forEach(s=>{s==="service_type"?d[s]="web_development":s==="status"?d[s]="paid":s==="currency"?d[s]="BDT":s==="amount"?d[s]=0:d[s]=""}),A.value="BDT"},ee=async()=>{var s,o;C.value=!0;try{const l=await W.post(route("admin.finance.clients.store"),n);l.data.success&&(x.value.push(l.data.client),O(),p.fire({title:"Success!",text:l.data.message,icon:"success",confirmButtonColor:"#28a745",timer:3e3,timerProgressBar:!0}))}catch(l){console.error("Save failed:",l),p.fire({title:"Error!",text:((o=(s=l.response)==null?void 0:s.data)==null?void 0:o.message)||"Failed to save client",icon:"error",confirmButtonColor:"#e74a3b"})}finally{C.value=!1}},te=async()=>{var s,o;C.value=!0;try{const l=await W.post(route("admin.finance.revenues.store"),d);l.data.success&&(r.value.push(l.data.revenue),j(),p.fire({title:"Success!",text:l.data.message,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0}))}catch(l){console.error("Revenue save failed:",l),p.fire({title:"Error!",text:((o=(s=l.response)==null?void 0:s.data)==null?void 0:o.message)||"Failed to log revenue",icon:"error",confirmButtonColor:"#e74a3b"})}finally{C.value=!1}},se=async s=>{if((await p.fire({title:"Mark as Paid?",text:`Mark payment of ৳${h(s.amount)} as received?`,icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, mark as paid!"})).isConfirmed){const l=r.value.findIndex(c=>c.id===s.id);l!==-1&&(r.value[l].status="paid",r.value[l].paid_date=new Date().toISOString(),p.fire({title:"Payment Recorded!",text:"Payment has been marked as paid",icon:"success",confirmButtonColor:"#28a745",timer:3e3,timerProgressBar:!0}))}},ae=async s=>{p.fire({title:"Reminder Sent!",text:`Payment reminder sent to ${s.client_name}`,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0})},ne=()=>{console.log("Period changed to:",t.value)},oe=async s=>{if((await p.fire({title:"Remove Pending Payment?",text:`Remove pending payment of ৳${h(s.amount)} from ${s.client_name}?`,html:`
                    <div class="text-left">
                        <p><strong>Client:</strong> ${s.client_name}</p>
                        <p><strong>Amount:</strong> ৳${h(s.amount)}</p>
                        <p><strong>Service:</strong> ${U(s.service_type)}</p>
                        <p><strong>Expected Date:</strong> ${s.expected_date}</p>
                    </div>
                `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, remove it!"})).isConfirmed){const l=r.value.findIndex(c=>c.id===s.id);l!==-1&&(r.value.splice(l,1),p.fire({title:"Payment Removed!",text:"Pending payment has been removed from forecast",icon:"success",confirmButtonColor:"#28a745",timer:3e3,timerProgressBar:!0}))}},le=async()=>{if(_.value.length===0){p.fire({title:"No Pending Payments",text:"There are no pending payments to clear",icon:"info",confirmButtonColor:"#007bff"});return}if((await p.fire({title:"Clear All Pending Payments?",html:`
                    <div class="text-left">
                        <p>This will remove <strong>${_.value.length}</strong> pending payments totaling <strong>৳${h(D.value)}</strong></p>
                        <div class="mt-3">
                            <h6>Payments to be removed:</h6>
                            <ul class="list-unstyled">
                                ${_.value.map(o=>`
                                    <li class="mb-1">
                                        <i class="fas fa-user me-1"></i> ${o.client_name} - 
                                        <strong>৳${h(o.amount)}</strong>
                                    </li>
                                `).join("")}
                            </ul>
                        </div>
                        <div class="alert alert-warning mt-3">
                            <i class="fas fa-exclamation-triangle me-2"></i>
                            <strong>Warning:</strong> This action cannot be undone. All pending payment forecasts will be permanently removed.
                        </div>
                    </div>
                `,icon:"warning",showCancelButton:!0,confirmButtonColor:"#dc3545",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, clear all!",cancelButtonText:"Cancel",width:"600px"})).isConfirmed){const o=_.value.length,l=D.value;r.value=r.value.filter(c=>c.status!=="pending"&&c.status!=="overdue"),p.fire({title:"All Pending Payments Cleared!",html:`
                        <div class="text-center">
                            <i class="fas fa-check-circle text-success mb-3" style="font-size: 3rem;"></i>
                            <p><strong>${o}</strong> pending payments removed</p>
                            <p><strong>৳${h(l)}</strong> cleared from forecast</p>
                            <div class="alert alert-success mt-3">
                                <i class="fas fa-info-circle me-2"></i>
                                You can now start fresh with your payment tracking!
                            </div>
                        </div>
                    `,icon:null,confirmButtonColor:"#28a745",timer:5e3,timerProgressBar:!0,width:"500px"})}},ie=()=>{if(_.value.length===0){p.fire({title:"No Data to Export",text:"There are no pending payments to export",icon:"info",confirmButtonColor:"#007bff"});return}let s=`Client,Service Type,Amount (BDT),Status,Expected Date,Invoice Date,Description,Notes
`;_.value.forEach(b=>{s+=`"${b.client_name}","${U(b.service_type)}",${b.amount},"${b.status}","${b.expected_date}","${E(b.invoice_date)}","${b.description||""}","${b.notes||""}"
`});const o=new Blob([s],{type:"text/csv;charset=utf-8;"}),l=URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download=`Pending-Payments-${new Date().toISOString().slice(0,10)}.csv`,document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(l),p.fire({title:"Export Complete!",text:`Pending payments exported to CSV file with ${_.value.length} records`,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0})};return ue(()=>{console.log("Clients loaded:",x.value.length),console.log("Revenues loaded:",r.value.length)}),{selectedPeriod:t,showAddClient:M,showAddRevenue:a,saving:C,clients:x,revenues:r,clientForm:n,revenueForm:d,monthlyRevenue:q,totalRevenue:G,pendingRevenue:D,recurringRevenue:Y,forecastRevenue:H,revenueByService:K,topClients:Q,sortedClients:z,pendingPayments:_,formatNumber:h,getPaymentCardClass:X,getPaymentBadgeClass:Z,getPaymentStatus:$,USD_TO_BDT_RATE:N,closeClientModal:O,closeRevenueModal:j,saveClient:ee,saveRevenue:te,markPaid:se,sendReminder:ae,updatePeriod:ne,removePendingPayment:oe,clearAllPendingPayments:le,exportPendingPayments:ie}}},be={class:"row"},ge={class:"col-lg-12"},ye={class:"dashboard-settings margin-top-40"},_e={class:"card mb-4"},xe={class:"card-header d-flex justify-content-between align-items-center"},he={class:"d-flex gap-2"},we={class:"card-body"},Ce={class:"row"},Pe={class:"col-md-4 text-end"},ke={class:"revenue-summary"},Re={class:"total-revenue"},Se={class:"h5 mb-0 text-success"},De={class:"row mb-4"},Be={class:"col-md-3"},Fe={class:"stat-card"},Te={class:"stat-content"},Me={class:"stat-value"},Ne={class:"col-md-3"},Ae={class:"stat-card"},Ue={class:"stat-content"},Ee={class:"stat-value"},Ve={class:"col-md-3"},Oe={class:"stat-card"},je={class:"stat-content"},Ie={class:"stat-value"},Le={class:"col-md-3"},We={class:"stat-card"},qe={class:"stat-content"},Ge={class:"stat-value"},Ye={class:"row"},ze={class:"col-lg-6 mb-4"},He={class:"card"},Ke={class:"card-body"},Qe={class:"service-header d-flex justify-content-between align-items-center mb-2"},Je={class:"service-info"},Xe={class:"badge bg-secondary ms-2"},Ze={class:"service-amount"},$e={class:"progress",style:{height:"6px"}},et={class:"col-lg-6 mb-4"},tt={class:"card"},st={class:"card-body"},at={class:"client-header d-flex justify-content-between align-items-center mb-2"},nt={class:"client-info"},ot={class:"text-muted ms-2"},lt={class:"client-amount"},it={class:"client-details"},rt={class:"row"},dt={class:"col-6"},ct={class:"small"},mt={class:"col-6"},vt={class:"row"},ut={class:"col-12"},ft={class:"card"},pt={class:"card-header d-flex justify-content-between align-items-center"},bt={class:"header-actions"},gt=["disabled"],yt={class:"card-body"},_t={class:"row"},xt={class:"payment-header"},ht={class:"payment-client"},wt={class:"payment-amount"},Ct={class:"payment-details"},Pt={class:"payment-service"},kt={class:"payment-date"},Rt={key:0,class:"payment-notes"},St={class:"text-muted"},Dt={class:"payment-actions mt-2"},Bt=["onClick"],Ft=["onClick"],Tt=["onClick"],Mt={key:0,class:"col-12"},Nt={class:"modal-header"},At={class:"modal-body"},Ut={class:"row"},Et={class:"col-md-6 mb-3"},Vt={class:"col-md-6 mb-3"},Ot={class:"row"},jt={class:"col-md-6 mb-3"},It={class:"col-md-6 mb-3"},Lt={class:"mb-3"},Wt={class:"d-flex justify-content-end gap-2"},qt=["disabled"],Gt={class:"modal-header"},Yt={class:"modal-body"},zt={class:"row"},Ht={class:"col-md-6 mb-3"},Kt=["value"],Qt={class:"col-md-6 mb-3"},Jt={class:"row"},Xt={class:"col-md-6 mb-3"},Zt={class:"input-group"},$t={key:0,class:"form-text text-info"},es={class:"col-md-6 mb-3"},ts={key:0,class:"row"},ss={class:"col-md-6 mb-3"},as={class:"col-md-6 mb-3"},ns={class:"mb-3"},os={class:"mb-3"},ls={class:"d-flex justify-content-end gap-2"},is=["disabled"];function rs(T,t,M,a,C,x){const r=ce("Head");return v(),m(S,null,[me(r,{title:"Revenue Tracking & Client Forecasting"}),e("div",be,[e("div",ge,[e("div",ye,[e("div",_e,[e("div",xe,[t[33]||(t[33]=e("h4",{class:"mb-0"},[e("i",{class:"fas fa-chart-line me-2"}),u(" Revenue Tracking & Client Forecasting ")],-1)),e("div",he,[f(e("select",{"onUpdate:modelValue":t[0]||(t[0]=n=>a.selectedPeriod=n),onChange:t[1]||(t[1]=(...n)=>a.updatePeriod&&a.updatePeriod(...n)),class:"form-select form-select-sm",style:{width:"150px"}},[...t[30]||(t[30]=[e("option",{value:"current"},"This Month",-1),e("option",{value:"quarter"},"This Quarter",-1),e("option",{value:"year"},"This Year",-1)])],544),[[k,a.selectedPeriod]]),e("button",{onClick:t[2]||(t[2]=n=>a.showAddClient=!0),class:"btn btn-success"},[...t[31]||(t[31]=[e("i",{class:"fas fa-user-plus"},null,-1),u(" Add Client ",-1)])]),e("button",{onClick:t[3]||(t[3]=n=>a.showAddRevenue=!0),class:"btn btn-primary"},[...t[32]||(t[32]=[e("i",{class:"fas fa-dollar-sign"},null,-1),u(" Log Revenue ",-1)])])])]),e("div",we,[e("div",Ce,[t[35]||(t[35]=e("div",{class:"col-md-8"},[e("p",{class:"text-muted mb-0"}," Track your revenue streams from different services like Webflow templates, Shopify apps, and recurring revenue. Monitor pending payments and forecast upcoming earnings. ")],-1)),e("div",Pe,[e("div",ke,[e("div",Re,[t[34]||(t[34]=e("small",{class:"text-muted"},"This Month Revenue",-1)),e("div",Se,"৳"+i(a.formatNumber(a.monthlyRevenue)),1)])])])])])]),t[82]||(t[82]=I('<div class="card mb-4 entrepreneur-guide" data-v-ff2292cc><div class="card-header bg-success-light" data-v-ff2292cc><h6 class="text-success mb-0" data-v-ff2292cc><button class="btn btn-link text-success p-0 text-decoration-none w-100 text-start" type="button" data-bs-toggle="collapse" data-bs-target="#revenueGuide" aria-expanded="false" aria-controls="revenueGuide" data-v-ff2292cc><i class="fas fa-lightbulb me-2" data-v-ff2292cc></i> Solo Entrepreneur Revenue &amp; Client Management Guide <i class="fas fa-chevron-down float-end mt-1" data-v-ff2292cc></i></button></h6></div><div id="revenueGuide" class="collapse" data-v-ff2292cc><div class="card-body" data-v-ff2292cc><div class="row" data-v-ff2292cc><div class="col-md-6" data-v-ff2292cc><h6 class="text-primary mb-3" data-v-ff2292cc><i class="fas fa-question-circle me-2" data-v-ff2292cc></i> Why Track Revenue by Client &amp; Service? </h6><ul class="list-unstyled mb-4" data-v-ff2292cc><li class="mb-2" data-v-ff2292cc><i class="fas fa-check text-success me-2" data-v-ff2292cc></i><strong data-v-ff2292cc>Identify Best Clients:</strong> See who pays the most consistently </li><li class="mb-2" data-v-ff2292cc><i class="fas fa-check text-success me-2" data-v-ff2292cc></i><strong data-v-ff2292cc>Service Performance:</strong> Know which services are most profitable </li><li class="mb-2" data-v-ff2292cc><i class="fas fa-check text-success me-2" data-v-ff2292cc></i><strong data-v-ff2292cc>Predict Cash Flow:</strong> Forecast upcoming payments and revenue </li><li class="mb-2" data-v-ff2292cc><i class="fas fa-check text-success me-2" data-v-ff2292cc></i><strong data-v-ff2292cc>Plan Growth:</strong> Focus on high-value services and clients </li></ul><h6 class="text-primary mb-3" data-v-ff2292cc><i class="fas fa-clock me-2" data-v-ff2292cc></i> Pending Payment Forecasting </h6><ul class="list-unstyled" data-v-ff2292cc><li class="mb-2" data-v-ff2292cc><i class="fas fa-arrow-right text-info me-2" data-v-ff2292cc></i> Track invoices sent but not yet paid </li><li class="mb-2" data-v-ff2292cc><i class="fas fa-arrow-right text-info me-2" data-v-ff2292cc></i> Predict when payments will arrive </li><li class="mb-2" data-v-ff2292cc><i class="fas fa-arrow-right text-info me-2" data-v-ff2292cc></i> Plan for cash flow gaps </li><li class="mb-2" data-v-ff2292cc><i class="fas fa-arrow-right text-info me-2" data-v-ff2292cc></i> Follow up on overdue payments </li></ul></div><div class="col-md-6" data-v-ff2292cc><h6 class="text-primary mb-3" data-v-ff2292cc><i class="fas fa-user-tie me-2" data-v-ff2292cc></i> Solo Business Revenue Streams </h6><div class="revenue-streams" data-v-ff2292cc><div class="stream-example mb-3" data-v-ff2292cc><strong class="text-success d-block mb-2" data-v-ff2292cc><i class="fas fa-globe me-2" data-v-ff2292cc></i>Webflow Templates </strong><small class="text-muted d-block" data-v-ff2292cc> One-time sales, license fees, custom template development </small><div class="example-amounts mt-1" data-v-ff2292cc><span class="badge bg-light text-dark" data-v-ff2292cc>$50 - $500 each</span><span class="badge bg-light text-dark" data-v-ff2292cc>Recurring licenses</span></div></div><div class="stream-example mb-3" data-v-ff2292cc><strong class="text-info d-block mb-2" data-v-ff2292cc><i class="fas fa-shopping-cart me-2" data-v-ff2292cc></i>Shopify Apps </strong><small class="text-muted d-block" data-v-ff2292cc> Monthly subscriptions, app store revenue, custom development </small><div class="example-amounts mt-1" data-v-ff2292cc><span class="badge bg-light text-dark" data-v-ff2292cc>$10-50/month</span><span class="badge bg-light text-dark" data-v-ff2292cc>Recurring MRR</span></div></div><div class="stream-example mb-3" data-v-ff2292cc><strong class="text-warning d-block mb-2" data-v-ff2292cc><i class="fas fa-handshake me-2" data-v-ff2292cc></i>Client Services </strong><small class="text-muted d-block" data-v-ff2292cc> Web development, consulting, maintenance contracts, design work </small><div class="example-amounts mt-1" data-v-ff2292cc><span class="badge bg-light text-dark" data-v-ff2292cc>$500-5000</span><span class="badge bg-light text-dark" data-v-ff2292cc>Project-based</span></div></div></div><div class="alert alert-success mt-3" data-v-ff2292cc><strong data-v-ff2292cc><i class="fas fa-star me-2" data-v-ff2292cc></i>Pro Revenue Tips: </strong><ul class="mb-0 mt-2" data-v-ff2292cc><li data-v-ff2292cc>Set up automatic payment reminders for clients</li><li data-v-ff2292cc>Offer payment terms that favor faster payments (2/10 net 30)</li><li data-v-ff2292cc>Diversify revenue streams to reduce dependency on single clients</li><li data-v-ff2292cc>Track monthly recurring revenue (MRR) vs one-time payments</li></ul></div></div></div></div></div></div>',1)),e("div",De,[e("div",Be,[e("div",Fe,[t[37]||(t[37]=e("div",{class:"stat-icon bg-success"},[e("i",{class:"fas fa-money-bill-wave"})],-1)),e("div",Te,[e("div",Me,"৳"+i(a.formatNumber(a.totalRevenue)),1),t[36]||(t[36]=e("div",{class:"stat-label"},"Total Revenue",-1))])])]),e("div",Ne,[e("div",Ae,[t[39]||(t[39]=e("div",{class:"stat-icon bg-warning"},[e("i",{class:"fas fa-hourglass-half"})],-1)),e("div",Ue,[e("div",Ee,"৳"+i(a.formatNumber(a.pendingRevenue)),1),t[38]||(t[38]=e("div",{class:"stat-label"},"Pending Payments",-1))])])]),e("div",Ve,[e("div",Oe,[t[41]||(t[41]=e("div",{class:"stat-icon bg-info"},[e("i",{class:"fas fa-chart-line"})],-1)),e("div",je,[e("div",Ie,"৳"+i(a.formatNumber(a.recurringRevenue)),1),t[40]||(t[40]=e("div",{class:"stat-label"},"Monthly Recurring Revenue",-1))])])]),e("div",Le,[e("div",We,[t[43]||(t[43]=e("div",{class:"stat-icon bg-primary"},[e("i",{class:"fas fa-crystal-ball"})],-1)),e("div",qe,[e("div",Ge,"৳"+i(a.formatNumber(a.forecastRevenue)),1),t[42]||(t[42]=e("div",{class:"stat-label"},"Next Month Forecast",-1))])])])]),e("div",Ye,[e("div",ze,[e("div",He,[t[44]||(t[44]=e("div",{class:"card-header"},[e("h6",{class:"mb-0"},[e("i",{class:"fas fa-chart-pie me-2"}),u(" Revenue by Service Type ")])],-1)),e("div",Ke,[(v(!0),m(S,null,B(a.revenueByService,n=>(v(),m("div",{key:n.type,class:"service-revenue mb-3"},[e("div",Qe,[e("div",Je,[e("i",{class:R([n.icon,"me-2"])},null,2),e("strong",null,i(n.type),1),e("span",Xe,i(n.count)+" items",1)]),e("div",Ze,"৳"+i(a.formatNumber(n.amount)),1)]),e("div",$e,[e("div",{class:R(["progress-bar",n.color]),style:ve(`width: ${n.amount/a.totalRevenue*100}%`)},null,6)])]))),128))])])]),e("div",et,[e("div",tt,[t[48]||(t[48]=e("div",{class:"card-header"},[e("h6",{class:"mb-0"},[e("i",{class:"fas fa-users me-2"}),u(" Top Clients by Revenue ")])],-1)),e("div",st,[(v(!0),m(S,null,B(a.topClients,n=>(v(),m("div",{key:n.id,class:"client-revenue mb-3"},[e("div",at,[e("div",nt,[t[45]||(t[45]=e("i",{class:"fas fa-user-circle me-2 text-primary"},null,-1)),e("strong",null,i(n.name),1),e("small",ot,i(n.email),1)]),e("div",lt,"৳"+i(a.formatNumber(n.total_revenue)),1)]),e("div",it,[e("div",rt,[e("div",dt,[t[46]||(t[46]=e("small",{class:"text-muted"},"Last Payment:",-1)),e("div",ct,i(n.last_payment_date),1)]),e("div",mt,[t[47]||(t[47]=e("small",{class:"text-muted"},"Pending:",-1)),e("div",{class:R(["small",n.pending>0?"text-warning":"text-success"])}," ৳"+i(a.formatNumber(n.pending)),3)])])])]))),128))])])])]),e("div",vt,[e("div",ut,[e("div",ft,[e("div",pt,[t[51]||(t[51]=e("h6",{class:"mb-0"},[e("i",{class:"fas fa-clock me-2"}),u(" Pending Payments Forecast - Next 90 Days ")],-1)),e("div",bt,[e("button",{onClick:t[4]||(t[4]=(...n)=>a.clearAllPendingPayments&&a.clearAllPendingPayments(...n)),class:"btn btn-outline-danger btn-sm me-2",disabled:a.pendingPayments.length===0},[...t[49]||(t[49]=[e("i",{class:"fas fa-trash-alt me-1"},null,-1),u(" Clear All ",-1)])],8,gt),e("button",{onClick:t[5]||(t[5]=(...n)=>a.exportPendingPayments&&a.exportPendingPayments(...n)),class:"btn btn-outline-primary btn-sm"},[...t[50]||(t[50]=[e("i",{class:"fas fa-download me-1"},null,-1),u(" Export CSV ",-1)])])])]),e("div",yt,[e("div",_t,[(v(!0),m(S,null,B(a.pendingPayments,n=>(v(),m("div",{key:n.id,class:"col-lg-4 col-md-6 mb-4"},[e("div",{class:R(["pending-payment-card",a.getPaymentCardClass(n)])},[e("div",xt,[e("div",ht,[t[52]||(t[52]=e("i",{class:"fas fa-user-circle me-2"},null,-1)),e("strong",null,i(n.client_name),1)]),e("div",wt,"৳"+i(a.formatNumber(n.amount)),1)]),e("div",Ct,[e("div",Pt,[e("i",{class:R([n.service_icon,"me-2"])},null,2),u(" "+i(n.service_type),1)]),e("div",kt,[t[53]||(t[53]=e("i",{class:"fas fa-calendar me-2"},null,-1)),u(" Expected: "+i(n.expected_date)+" ",1),e("span",{class:R(["badge ms-2",a.getPaymentBadgeClass(n)])},i(a.getPaymentStatus(n)),3)]),n.notes?(v(),m("div",Rt,[t[54]||(t[54]=e("i",{class:"fas fa-sticky-note me-2"},null,-1)),e("small",St,i(n.notes),1)])):P("",!0)]),e("div",Dt,[e("button",{onClick:d=>a.markPaid(n),class:"btn btn-sm btn-success me-2"},[...t[55]||(t[55]=[e("i",{class:"fas fa-check"},null,-1),u(" Mark Paid ",-1)])],8,Bt),e("button",{onClick:d=>a.sendReminder(n),class:"btn btn-sm btn-outline-primary me-2"},[...t[56]||(t[56]=[e("i",{class:"fas fa-bell"},null,-1),u(" Remind ",-1)])],8,Ft),e("button",{onClick:d=>a.removePendingPayment(n),class:"btn btn-sm btn-outline-danger",title:"Remove this pending payment"},[...t[57]||(t[57]=[e("i",{class:"fas fa-times"},null,-1)])],8,Tt)])],2)]))),128)),a.pendingPayments.length===0?(v(),m("div",Mt,[...t[58]||(t[58]=[e("div",{class:"text-center py-5"},[e("i",{class:"fas fa-check-circle text-success mb-3",style:{"font-size":"4rem"}}),e("h5",{class:"text-muted"},"All Payments Up to Date!"),e("p",{class:"text-muted"},"No pending payments found. Great job keeping on top of collections!")],-1)])])):P("",!0)])])])])]),a.showAddClient?(v(),m("div",{key:0,class:"modal-overlay",onClick:t[15]||(t[15]=(...n)=>a.closeClientModal&&a.closeClientModal(...n))},[e("div",{class:"modal-content",onClick:t[14]||(t[14]=F(()=>{},["stop"]))},[e("div",Nt,[t[59]||(t[59]=e("h5",null,"Add New Client",-1)),e("button",{onClick:t[6]||(t[6]=(...n)=>a.closeClientModal&&a.closeClientModal(...n)),class:"btn-close"},"×")]),e("div",At,[e("form",{onSubmit:t[13]||(t[13]=F((...n)=>a.saveClient&&a.saveClient(...n),["prevent"]))},[e("div",Ut,[e("div",Et,[t[60]||(t[60]=e("label",{class:"form-label"},"Client Name *",-1)),f(e("input",{"onUpdate:modelValue":t[7]||(t[7]=n=>a.clientForm.name=n),type:"text",class:"form-control",required:"",placeholder:"Company or Person Name"},null,512),[[g,a.clientForm.name]])]),e("div",Vt,[t[61]||(t[61]=e("label",{class:"form-label"},"Email",-1)),f(e("input",{"onUpdate:modelValue":t[8]||(t[8]=n=>a.clientForm.email=n),type:"email",class:"form-control",placeholder:"client@company.com"},null,512),[[g,a.clientForm.email]])])]),e("div",Ot,[e("div",jt,[t[62]||(t[62]=e("label",{class:"form-label"},"Phone",-1)),f(e("input",{"onUpdate:modelValue":t[9]||(t[9]=n=>a.clientForm.phone=n),type:"text",class:"form-control",placeholder:"+1234567890"},null,512),[[g,a.clientForm.phone]])]),e("div",It,[t[64]||(t[64]=e("label",{class:"form-label"},"Payment Terms",-1)),f(e("select",{"onUpdate:modelValue":t[10]||(t[10]=n=>a.clientForm.payment_terms=n),class:"form-select"},[...t[63]||(t[63]=[e("option",{value:"net_15"},"Net 15 days",-1),e("option",{value:"net_30"},"Net 30 days",-1),e("option",{value:"net_60"},"Net 60 days",-1),e("option",{value:"immediate"},"Immediate",-1)])],512),[[k,a.clientForm.payment_terms]])])]),e("div",Lt,[t[65]||(t[65]=e("label",{class:"form-label"},"Notes",-1)),f(e("textarea",{"onUpdate:modelValue":t[11]||(t[11]=n=>a.clientForm.notes=n),class:"form-control",rows:"3",placeholder:"Client preferences, project details, etc."},null,512),[[g,a.clientForm.notes]])]),e("div",Wt,[e("button",{type:"button",onClick:t[12]||(t[12]=(...n)=>a.closeClientModal&&a.closeClientModal(...n)),class:"btn btn-secondary"}," Cancel "),e("button",{type:"submit",class:"btn btn-success",disabled:a.saving},[t[66]||(t[66]=e("i",{class:"fas fa-save"},null,-1)),u(" "+i(a.saving?"Saving...":"Save Client"),1)],8,qt)])],32)])])])):P("",!0),a.showAddRevenue?(v(),m("div",{key:1,class:"modal-overlay",onClick:t[29]||(t[29]=(...n)=>a.closeRevenueModal&&a.closeRevenueModal(...n))},[e("div",{class:"modal-content large-modal",onClick:t[28]||(t[28]=F(()=>{},["stop"]))},[e("div",Gt,[t[67]||(t[67]=e("h5",null,"Log Revenue / Pending Payment",-1)),e("button",{onClick:t[16]||(t[16]=(...n)=>a.closeRevenueModal&&a.closeRevenueModal(...n)),class:"btn-close"},"×")]),e("div",Yt,[e("form",{onSubmit:t[27]||(t[27]=F((...n)=>a.saveRevenue&&a.saveRevenue(...n),["prevent"]))},[e("div",zt,[e("div",Ht,[t[69]||(t[69]=e("label",{class:"form-label"},"Client *",-1)),f(e("select",{"onUpdate:modelValue":t[17]||(t[17]=n=>a.revenueForm.client_id=n),class:"form-select",required:""},[t[68]||(t[68]=e("option",{value:""},"Select Client",-1)),(v(!0),m(S,null,B(a.sortedClients,n=>(v(),m("option",{key:n.id,value:n.id},i(n.name),9,Kt))),128))],512),[[k,a.revenueForm.client_id]])]),e("div",Qt,[t[71]||(t[71]=e("label",{class:"form-label"},"Service Type *",-1)),f(e("select",{"onUpdate:modelValue":t[18]||(t[18]=n=>a.revenueForm.service_type=n),class:"form-select",required:""},[...t[70]||(t[70]=[I('<option value="webflow_template" data-v-ff2292cc>Webflow Template</option><option value="shopify_app" data-v-ff2292cc>Shopify App</option><option value="web_development" data-v-ff2292cc>Web Development</option><option value="consulting" data-v-ff2292cc>Consulting</option><option value="maintenance" data-v-ff2292cc>Maintenance Contract</option><option value="other" data-v-ff2292cc>Other Service</option>',6)])],512),[[k,a.revenueForm.service_type]])])]),e("div",Jt,[e("div",Xt,[t[74]||(t[74]=e("label",{class:"form-label"},"Amount *",-1)),e("div",Zt,[f(e("select",{"onUpdate:modelValue":t[19]||(t[19]=n=>a.revenueForm.currency=n),class:"input-group-text",style:{"border-right":"0",background:"#e9ecef"}},[...t[72]||(t[72]=[e("option",{value:"BDT"},"৳",-1),e("option",{value:"USD"},"$",-1)])],512),[[k,a.revenueForm.currency]]),f(e("input",{"onUpdate:modelValue":t[20]||(t[20]=n=>a.revenueForm.amount=n),type:"number",class:"form-control",step:"0.01",min:"0",required:"",placeholder:"5000.00"},null,512),[[g,a.revenueForm.amount,void 0,{number:!0}]])]),a.revenueForm.currency==="USD"?(v(),m("div",$t,[e("small",null,[t[73]||(t[73]=e("i",{class:"fas fa-exchange-alt me-1"},null,-1)),u(" Converted: ৳"+i(a.formatNumber(a.revenueForm.amount*a.USD_TO_BDT_RATE))+" BDT (1 USD = "+i(a.USD_TO_BDT_RATE)+" BDT) ",1)])])):P("",!0)]),e("div",es,[t[76]||(t[76]=e("label",{class:"form-label"},"Status *",-1)),f(e("select",{"onUpdate:modelValue":t[21]||(t[21]=n=>a.revenueForm.status=n),class:"form-select",required:""},[...t[75]||(t[75]=[e("option",{value:"paid"},"Paid (Received)",-1),e("option",{value:"pending"},"Pending Payment",-1),e("option",{value:"overdue"},"Overdue",-1)])],512),[[k,a.revenueForm.status]])])]),a.revenueForm.status!=="paid"?(v(),m("div",ts,[e("div",ss,[t[77]||(t[77]=e("label",{class:"form-label"},"Expected Payment Date",-1)),f(e("input",{"onUpdate:modelValue":t[22]||(t[22]=n=>a.revenueForm.expected_date=n),type:"date",class:"form-control"},null,512),[[g,a.revenueForm.expected_date]])]),e("div",as,[t[78]||(t[78]=e("label",{class:"form-label"},"Invoice Date",-1)),f(e("input",{"onUpdate:modelValue":t[23]||(t[23]=n=>a.revenueForm.invoice_date=n),type:"date",class:"form-control"},null,512),[[g,a.revenueForm.invoice_date]])])])):P("",!0),e("div",ns,[t[79]||(t[79]=e("label",{class:"form-label"},"Description",-1)),f(e("input",{"onUpdate:modelValue":t[24]||(t[24]=n=>a.revenueForm.description=n),type:"text",class:"form-control",placeholder:"Brief description of the service"},null,512),[[g,a.revenueForm.description]])]),e("div",os,[t[80]||(t[80]=e("label",{class:"form-label"},"Notes",-1)),f(e("textarea",{"onUpdate:modelValue":t[25]||(t[25]=n=>a.revenueForm.notes=n),class:"form-control",rows:"3",placeholder:"Additional notes, payment terms, follow-up reminders"},null,512),[[g,a.revenueForm.notes]])]),e("div",ls,[e("button",{type:"button",onClick:t[26]||(t[26]=(...n)=>a.closeRevenueModal&&a.closeRevenueModal(...n)),class:"btn btn-secondary"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary",disabled:a.saving},[t[81]||(t[81]=e("i",{class:"fas fa-save"},null,-1)),u(" "+i(a.saving?"Saving...":"Save Revenue"),1)],8,is)])],32)])])])):P("",!0)])])])],64)}const us=fe(pe,[["render",rs],["__scopeId","data-v-ff2292cc"]]);export{us as default};

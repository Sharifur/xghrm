import{A as h}from"./AdminMaster-C7p7F_i9.js";import{K as D,L as w,H as _,r as i,c as V,o as A,a as m,b as t,g as B,f as d,w as k,t as s,F as x,u as g,l as S,m as E}from"./app-3IEMQ5of.js";import{B as F}from"./Button-Bknrlmqb.js";import{I}from"./Input-DE0LTE1k.js";import{S as P}from"./Select-sy97qpvZ.js";import{T as M}from"./Textarea-BjrC1ZjW.js";import{s as T}from"./vue3-datepicker.esm-Df2hil4l.js";import"./sweetalert2.esm.all-Y6IUEg8t.js";import{h as L}from"./html2pdf-Dt1Dw7XT.js";import{_ as N}from"./_plugin-vue_export-helper-DlAUqK2U.js";const C={layout:h,components:{BsButton:F,Input:I,Select:P,Textarea:M,Head:_,Datepicker:T,Link:w,VueDatePicker:D},setup(){const p=g().props.value.all_employee,e=g().props.value.advance_salary,u=S(0);u.value=e.amount;const o=S({name:e.name,amount:e.amount,category:e.category}),n=E({employee_id:e.employee_id,month:new Date(e.month),amount:e.amount});function v(){u.value=parseFloat(n.amount)}function c(){let a=o.value.name+"-"+y(n.month)+"-salary-slip.pdf";L(document.getElementById("element-to-convert"),{margin:1,filename:a}),axios.post(route("admin.employee.advance.salary.store"),n)}function f(){axios.post(route("admin.employee.details",n.employee_id),{month:n.month}).then(a=>{let r=a.data.details;o.value={name:r.name,amount:o.value.amount,category:r.designation}})}function y(a){let r=["January","February","March","April","May","June","July","August","September","October","November","December"];return a!=null?r[new Date(a).getMonth()]:""}return{employeeList:p,salarySlipData:n,exportToPDF:c,selectedEmployee:o,changeEmployeeSelect:f,getSelectedMonthName:y,changeAmount:v,payableAmount:u}}},H={class:"row"},W={class:"col-lg-12"},J={class:"header-wrap d-flex justify-content-between"},U={class:"btn-wrp"},j={class:"row"},K={class:"col-lg-4"},O={class:"single-info-input margin-top-30"},X={class:"col-lg-8"},q={id:"element-to-convert"},z={class:"salarySlipPdfOuterWrapper advanceSalary"},R={class:"paratext"},Y={class:"footerPartWrapper"},G={class:"signature"},Q={class:"btn-wrapper margin-left-60"};function Z(p,e,u,o,n,v){const c=i("Head"),f=i("Link"),y=i("VueDatePicker"),a=i("Select"),r=i("Input"),b=i("BsButton");return A(),V(x,null,[m(c,{title:"Edit Advance Salary"}),t("div",H,[t("div",W,[t("div",J,[e[7]||(e[7]=t("h2",{class:"dashboards-title margin-bottom-40"},"Edit Advance Salary",-1)),t("div",U,[m(f,{class:"btn btn-info m-1",href:p.route("admin.employee.advance.salary.all")},{default:B(()=>[...e[6]||(e[6]=[d("Advance salary List",-1)])]),_:1},8,["href"])])])]),t("div",j,[t("div",K,[t("form",{onSubmit:e[5]||(e[5]=k(()=>{},["prevent"]))},[t("div",O,[e[8]||(e[8]=t("label",{class:"info-title"},"Salary Month",-1)),m(y,{modelValue:o.salarySlipData.month,"onUpdate:modelValue":e[0]||(e[0]=l=>o.salarySlipData.month=l)},null,8,["modelValue"]),e[9]||(e[9]=t("span",{class:"info-text"},"Select Month First",-1))]),m(a,{title:"Employee",onChange:e[1]||(e[1]=l=>o.changeEmployeeSelect()),modelValue:o.salarySlipData.employee_id,"onUpdate:modelValue":e[2]||(e[2]=l=>o.salarySlipData.employee_id=l),options:o.employeeList},null,8,["modelValue","options"]),m(r,{title:"Amount",type:"number",onInput:e[3]||(e[3]=l=>o.changeAmount()),modelValue:o.salarySlipData.amount,"onUpdate:modelValue":e[4]||(e[4]=l=>o.salarySlipData.amount=l)},null,8,["modelValue"])],32)]),t("div",X,[t("div",q,[t("div",z,[e[18]||(e[18]=t("div",{class:"headerPart"},[t("div",{class:"subjectWarp"},[t("p",null,"Advance salary")])],-1)),t("div",R,[t("p",null,[e[10]||(e[10]=d("I, ",-1)),t("strong",null,s(o.selectedEmployee.name),1),e[11]||(e[11]=d(", ",-1)),t("strong",null,"Department: "+s(o.selectedEmployee.category),1),d(" request an advance payment of "+s(o.payableAmount)+"/- ("+s(p.numberToWord(o.payableAmount))+") BDT on my salary to be paid on 5th "+s(o.getSelectedMonthName(o.salarySlipData.month))+" "+s(new Date().getFullYear())+" due to personal problem as permitted by ",1),e[12]||(e[12]=t("strong",null,"Xgenious",-1)),e[13]||(e[13]=d(" policy. ",-1))]),e[14]||(e[14]=t("p",null,[t("strong",{class:"d-block"},"I agree to repay this advance as follow: "),d(" This payroll deduction to be made from my salary on the first pay period immediately following the pay period from which this advance is made.")],-1)),e[15]||(e[15]=t("p",null,"I also agree that if I terminate employment prior to total repayment of this advance, I authorize the company to deduct any unpaid advance amount from the salary owed me at the time of termination of employment. ",-1))]),t("div",Y,[e[17]||(e[17]=t("div",{class:"signature"},[t("span",{class:"signature"},"Signature"),t("h2",null,"Sharifur Rahman"),t("span",{class:"designation"},"Ceo - Xgenious")],-1)),t("div",G,[e[16]||(e[16]=t("span",{class:"signature"},"Signature",-1)),t("h2",null,s(o.selectedEmployee.name),1)])])])]),t("div",Q,[m(b,{type:"button",onClick:o.exportToPDF,"button-text":"Save and Download PDF"},null,8,["onClick"])])])])])],64)}const me=N(C,[["render",Z]]);export{me as default};

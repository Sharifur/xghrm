import{A as T}from"./AdminMaster-CtvJ4jwP.js";import{H as h,u as a,L as I,K as F,r as s,c as L,o as V,a as l,b as o,t as r,g as b,f as M,w as S,F as A,p as E,e as U,n as z,s as H,m as v}from"./app-ClN5IJtO.js";import{P as N}from"./Pagination-BdELFNUM.js";import{S as u}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{B as Y,a as O}from"./BsModalButton-IXtwebZw.js";import{I as K}from"./Input-bcAlpel2.js";import{S as x}from"./Select-CVVfV8Lf.js";import{B as j}from"./Button-C19kiJgU.js";import{V as W}from"./ValidationErrors-BYmF9x7K.js";import{s as Z}from"./vue3-datepicker.esm-D7XatXSs.js";import{_ as q}from"./_plugin-vue_export-helper-DlAUqK2U.js";const G={name:"Index",layout:T,components:{VueDatePicker:F,Select:x,Pagination:N,Link:I,usePage:a,BsModal:O,BsModalButton:Y,BsInput:K,BsSelect:x,BsButton:j,BreezeValidationErrors:W,Datepicker:Z,Head:h},setup(){const y=[{label:"Pending",value:0},{label:"Approved",value:1}],e=[{label:"C/In",value:"C/In"},{label:"C/Out",value:"C/Out"},{label:"Leave",value:"leave"},{label:"Sick Leave",value:"sick-leave"},{label:"Paid Leave",value:"paid-leave"},{label:"Holiday",value:"holiday"},{label:"Work From Home",value:"work-from-home"}],p=v({date:new Date(a().props.value.date==null?new Date:a().props.value.date),status:a().props.value.status,type:a().props.value.type,employee:a().props.value.employee}),t=v({employee_id:null,type:null,date_time:null}),k=a().props.value.page_type;function C(){p.get(route("admin.employee.attendance.logs"))}function w(){return a().props.value.attendance_logs.data}function B(){return a().props.value.attendance_logs.links}function d(i){u.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(m=>{m.isConfirmed&&v({id:i.id}).post(route("admin.employee.attendance.logs.delete"),{onSuccess:()=>{u.fire("Deleted","item removed from system","warning")}})})}function c(i){u.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Approve it!"}).then(m=>{m.isConfirmed&&v({id:i}).post(route("admin.employee.attendance.logs.approve"),{onSuccess:()=>{}})})}function f(){t.post(route("admin.employee.attendance.log.add"),{onSuccess:i=>{u.fire("Success","new attendance log added","success")}})}function g(){p.get(route("admin.employee.attendance.logs"))}function D(){return a().props.value.employees}function _(){u.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(i=>{i.isConfirmed&&(axios.post(route("admin.employee.attendance.logs.approve.pending")),window.location.reload())})}return{attendancesData:w,attendancesLink:B,deleteItem:d,addAttendanceLogFormSubmit:f,attendanceTypes:e,newLogData:t,employeesList:D,filterOptions:y,applyFilter:C,filterData:p,page_type:k,submitApproveData:c,approveAllLogs:_,filterFormSubmit:g}}},J={class:"row"},Q={class:"col-lg-12"},R={class:"dashboard-settings margin-top-40 margin-bottom-30"},X={class:"header-wrap d-flex justify-content-between"},$={class:"dashboards-title margin-bottom-40"},ee={class:"btn-wrapper"},te={class:"single-info-input margin-top-30"},oe={class:"table-wrap table-responsive mt-5"},ne={class:"table table-light"},le={class:"single-info-input margin-top-30"};function ae(y,e,p,t,k,C){const w=s("Head"),B=s("BsModalButton"),d=s("Select"),c=s("VueDatePicker"),f=s("BsButton"),g=s("Link"),D=s("Pagination"),_=s("BreezeValidationErrors"),i=s("BsSelect"),m=s("BsModal");return V(),L(A,null,[l(w,{title:"All Attendance Logs"}),o("div",J,[o("div",Q,[o("div",R,[o("div",X,[o("h2",$,"All "+r(t.page_type==="index"?"":"Pending")+" Attendance Logs",1),o("div",ee,[o("button",{onClick:e[0]||(e[0]=(...n)=>t.approveAllLogs&&t.approveAllLogs(...n)),class:"btn btn-danger"},"Approve All Pending Log"),l(B,{target:"addnewcategory","button-class":"btn btn-info m-1"},{default:b(()=>[...e[10]||(e[10]=[M("Add New Log",-1)])]),_:1})])]),o("form",{method:"get",onSubmit:e[5]||(e[5]=S(()=>{},["prevent"])),class:"filter_form"},[l(d,{title:"Employee",options:t.employeesList(),modelValue:t.filterData.employee,"onUpdate:modelValue":e[1]||(e[1]=n=>t.filterData.employee=n)},null,8,["options","modelValue"]),l(d,{title:"Type",options:t.attendanceTypes,modelValue:t.filterData.type,"onUpdate:modelValue":e[2]||(e[2]=n=>t.filterData.type=n)},null,8,["options","modelValue"]),l(d,{title:"Status",options:t.filterOptions,modelValue:t.filterData.status,"onUpdate:modelValue":e[3]||(e[3]=n=>t.filterData.status=n)},null,8,["options","modelValue"]),o("div",te,[e[11]||(e[11]=o("label",{class:"info-title"},"Date (Month)",-1)),l(c,{modelValue:t.filterData.date,"onUpdate:modelValue":e[4]||(e[4]=n=>t.filterData.date=n)},null,8,["modelValue"])]),l(f,{"button-text":"Submit","button-type":"submit",onClick:t.filterFormSubmit,disabled:t.filterData.processing},null,8,["onClick","disabled"])],32),o("div",oe,[o("table",ne,[e[14]||(e[14]=o("thead",null,[o("th",null,"ID"),o("th",null,"Employee Name"),o("th",null,"Type"),o("th",null,"Date"),o("th",null,"Time "),o("th",null,"Actions")],-1)),o("tbody",null,[(V(!0),L(A,null,E(t.attendancesData(),n=>(V(),L("tr",{key:n.id},[o("td",null,r(n.id),1),o("td",null,r(n.name),1),o("td",null,[o("span",{class:z(["alert text-capitalize",n.type==="C/In"?"alert-success":"alert-danger"])},r(n.type.replace("-"," ")),3),U(l(g,{onClick:P=>t.submitApproveData(n.id),class:"btn btn-success m-2"},{default:b(()=>[...e[12]||(e[12]=[o("i",{class:"fas fa-check"},null,-1)])]),_:2},1032,["onClick"]),[[H,n.status===0]])]),o("td",null,r(y.readableDateFormat(n.date_time)),1),o("td",null,r(new Date(n.date_time).toLocaleTimeString("en-US",{timeZone:"Asia/Dhaka"})),1),o("td",null,[l(g,{onClick:P=>t.deleteItem(n),class:"btn btn-danger m-2"},{default:b(()=>[...e[13]||(e[13]=[o("i",{class:"fas fa-trash"},null,-1)])]),_:2},1032,["onClick"])])]))),128))])])]),l(D,{links:t.attendancesLink()},null,8,["links"])])])]),l(m,{"modal-title":"Add New Attendance Log","modal-id":"addnewcategory","modal-size":"modal-md"},{default:b(()=>[l(_,{class:"mb-4"}),o("form",{onSubmit:e[9]||(e[9]=S(()=>{},["prevent"]))},[l(i,{title:"Employee",options:t.employeesList(),modelValue:t.newLogData.employee_id,"onUpdate:modelValue":e[6]||(e[6]=n=>t.newLogData.employee_id=n)},null,8,["options","modelValue"]),l(i,{title:"Status",options:t.attendanceTypes,modelValue:t.newLogData.type,"onUpdate:modelValue":e[7]||(e[7]=n=>t.newLogData.type=n)},null,8,["options","modelValue"]),o("div",le,[e[15]||(e[15]=o("label",{class:"info-title"},"Date Time",-1)),l(c,{modelValue:t.newLogData.date_time,"onUpdate:modelValue":e[8]||(e[8]=n=>t.newLogData.date_time=n)},null,8,["modelValue"])]),l(f,{"button-text":"Submit","button-type":"submit",onClick:t.addAttendanceLogFormSubmit,disabled:t.newLogData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const ve=q(G,[["render",ae]]);export{ve as default};

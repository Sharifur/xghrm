import{A as de}from"./AdminMaster-B-YC6P5R.js";import{H as ce,r as ue,a0 as me,c as u,o as m,a as ve,b as e,h as T,f as v,e as C,A as k,F as y,p as D,t as r,n as f,d as L,$ as S,w as H,i as Q,j as z,l as p,B as fe,y as X}from"./app-B_Bg3H0j.js";import{S as c}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{_ as he}from"./_plugin-vue_export-helper-DlAUqK2U.js";const pe={layout:de,name:"FinanceDashboard",components:{Head:ce},props:{financialData:Object,currentMonth:String},setup(h){var U,j,$,K,Y;const t=p(h.currentMonth||new Date().toISOString().slice(0,7)),M=p(!1),s=p(!1),n=p(h.financialData||{}),B=fe({type:"expense",period:"current_month",startDate:"",endDate:"",format:"csv",includeCharts:!0,includeComments:!1}),P=X(()=>{const a=[],l=new Date;for(let i=11;i>=0;i--){const w=new Date(l.getFullYear(),l.getMonth()-i,1);a.push({value:w.toISOString().slice(0,7),label:w.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}return a}),x=p(((U=h.financialData)==null?void 0:U.trendData)||[]),o=X(()=>Math.max(...x.value.flatMap(a=>[a.revenue,a.expenses]))),g=p(((j=h.financialData)==null?void 0:j.expenseCategories)||[]),N=p((($=h.financialData)==null?void 0:$.recentTransactions)||[]),A=p(((K=h.financialData)==null?void 0:K.budgetStatus)||[]),I=p(((Y=h.financialData)==null?void 0:Y.financialAlerts)||[]),b=a=>{if(!a&&a!==0)return"0";const l=Math.round((a+Number.EPSILON)*100)/100;return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:l%1===0?0:2}).format(l)},_=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),d=()=>new Date(t.value+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"}),V=()=>n.value.totalEquity>0?n.value.netProfit/n.value.totalEquity*100:0,W=a=>{if(!a.total||a.total<=0)return"bg-secondary";const l=a.used/a.total*100;return l>=100?"bg-danger":l>=80?"bg-warning":"bg-success"},J=async()=>{try{(await c.fire({title:"Generate Monthly Expense Report",html:`
                        <div class="text-left">
                            <p><strong>Report Period:</strong> ${d()}</p>
                            <p><strong>Total Expenses:</strong> ৳${b(n.value.totalExpenses)}</p>
                            <p><strong>Categories:</strong> ${g.value.length} expense categories</p>
                        </div>
                    `,icon:"info",showCancelButton:!0,confirmButtonColor:"#007bff",cancelButtonColor:"#6c757d",confirmButtonText:"Generate & Download CSV",cancelButtonText:"Cancel"})).isConfirmed&&(c.fire({title:"Generating Report...",text:"Please wait while we create your expense report.",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c.showLoading()}}),await le(),c.fire({title:"Report Downloaded!",text:`Monthly expense report for ${d()} has been downloaded to your device.`,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0}))}catch(a){console.error("Error generating report:",a),c.fire({title:"Error!",text:"Failed to generate expense report. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},Z=async()=>{try{(await c.fire({title:"Generate Monthly Balance Sheet",html:`
                        <div class="text-left">
                            <p><strong>Report Period:</strong> ${d()}</p>
                            <p><strong>Total Assets:</strong> ৳${b(n.value.totalAssets)}</p>
                            <p><strong>Total Liabilities:</strong> ৳${b(n.value.totalLiabilities)}</p>
                            <p><strong>Owner's Equity:</strong> ৳${b(n.value.totalEquity)}</p>
                        </div>
                    `,icon:"info",showCancelButton:!0,confirmButtonColor:"#007bff",cancelButtonColor:"#6c757d",confirmButtonText:"Generate & Download CSV",cancelButtonText:"Cancel"})).isConfirmed&&(c.fire({title:"Generating Balance Sheet...",text:"Please wait while we create your balance sheet report.",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c.showLoading()}}),await re(),c.fire({title:"Report Downloaded!",text:`Balance sheet for ${d()} has been downloaded to your device.`,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0}))}catch(a){console.error("Error generating report:",a),c.fire({title:"Error!",text:"Failed to generate balance sheet report. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},ee=async()=>{try{(await c.fire({title:"Generate Financial Summary",html:`
                        <div class="text-left">
                            <p><strong>Report Period:</strong> ${d()}</p>
                            <p><strong>Revenue:</strong> ৳${b(n.value.totalRevenue)}</p>
                            <p><strong>Expenses:</strong> ৳${b(n.value.totalExpenses)}</p>
                            <p><strong>Net Profit:</strong> ৳${b(n.value.netProfit)}</p>
                            <p><strong>Profit Margin:</strong> ${n.value.totalRevenue>0?(n.value.netProfit/n.value.totalRevenue*100).toFixed(1):"0.0"}%</p>
                        </div>
                    `,icon:"info",showCancelButton:!0,confirmButtonColor:"#007bff",cancelButtonColor:"#6c757d",confirmButtonText:"Generate & Download CSV",cancelButtonText:"Cancel"})).isConfirmed&&(c.fire({title:"Generating Financial Summary...",text:"Please wait while we create your financial summary report.",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c.showLoading()}}),await ie(),c.fire({title:"Report Downloaded!",text:`Financial summary for ${d()} has been downloaded to your device.`,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0}))}catch(a){console.error("Error generating report:",a),c.fire({title:"Error!",text:"Failed to generate financial summary report. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},te=async()=>{s.value=!0;try{await new Promise(i=>setTimeout(i,2e3));let a="",l="";switch(B.type){case"expense":a=O(),l=`Custom-Expense-Report-${d().replace(" ","-")}.csv`;break;case"revenue":a=ae(),l=`Custom-Revenue-Report-${d().replace(" ","-")}.csv`;break;case"balance":a=q(),l=`Custom-Balance-Sheet-${d().replace(" ","-")}.csv`;break;case"profit_loss":a=F(),l=`Custom-Profit-Loss-${d().replace(" ","-")}.csv`;break;case"budget":a=se(),l=`Custom-Budget-Report-${d().replace(" ","-")}.csv`;break;case"cash_flow":a=oe(),l=`Custom-Cash-Flow-${d().replace(" ","-")}.csv`;break;default:a=F(),l=`Custom-Report-${d().replace(" ","-")}.csv`}E(a,l),G(),c.fire({title:"Custom Report Generated!",text:`Your ${B.type} report has been downloaded as CSV.`,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0})}catch{c.fire({title:"Error!",text:"Failed to generate custom report. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}finally{s.value=!1}},ae=()=>{let a=`Report,Revenue Report
`;return a+=`Period,${d()}
`,a+=`Generated,${_(new Date)}

`,a+=`Revenue Summary
`,a+=`Item,Amount (BDT),Details,Currency
`,a+=`Total Revenue,${n.value.totalRevenue},Revenue Growth: +${Math.abs(n.value.revenueChange)}%,BDT
`,a+=`Pending Revenue,${n.value.pendingRevenue},${n.value.pendingCount} outstanding invoices,BDT
`,a+=`Revenue Growth Rate,${Math.abs(n.value.revenueChange)},Compared to last month,%
`,a},se=()=>{let a=`Report,Budget Analysis Report
`;return a+=`Period,${d()}
`,a+=`Generated,${_(new Date)}

`,a+=`Budget Analysis
`,a+=`Category,Used (BDT),Budget (BDT),Remaining (BDT),Status,Currency
`,A.value.forEach(l=>{const i=l.remaining<0?"Over Budget":"Under Budget";a+=`${l.name},${l.used},${l.total},${Math.abs(l.remaining)},${i},BDT
`}),a},oe=()=>{let a=`Report,Cash Flow Statement
`;a+=`Period,${d()}
`,a+=`Generated,${_(new Date)}

`,a+=`Cash Inflows
`,a+=`Source,Amount (BDT),Currency
`,a+=`Revenue Received,${n.value.totalRevenue},BDT
`,a+=`Other Income,${Math.round(n.value.totalRevenue*.05)},BDT

`,a+=`Cash Outflows
`,a+=`Category,Amount (BDT),Currency
`,a+=`Operating Expenses,${n.value.totalExpenses},BDT
`,a+=`Tax Payments,${Math.round(n.value.totalRevenue*.15)},BDT

`;const l=n.value.netProfit-n.value.totalRevenue*.15;return a+=`Net Cash Flow
`,a+=`Item,Amount (BDT),Status,Currency
`,a+=`Net Cash Flow,${Math.round(l)},${l>=0?"Positive":"Negative"},BDT
`,a},O=()=>{let a=`Report,Monthly Expense Report
`;return a+=`Period,${d()}
`,a+=`Generated,${_(new Date)}

`,a+=`Summary
`,a+=`Item,Amount (BDT),Currency
`,a+=`Total Monthly Expenses,${n.value.totalExpenses},BDT
`,a+=`Number of Categories,${g.value.length},Count
`,a+=`Average per Category,${Math.round(n.value.totalExpenses/g.value.length)},BDT

`,a+=`Expense Categories Breakdown
`,a+=`Category,Amount (BDT),Percentage,Currency
`,g.value.forEach(l=>{const i=n.value.totalExpenses>0?(l.amount/n.value.totalExpenses*100).toFixed(1):"0.0";a+=`${l.name},${l.amount},${i}%,BDT
`}),a},q=()=>{let a=`Report,Balance Sheet
`;return a+=`Period,As of ${d()}
`,a+=`Generated,${_(new Date)}

`,a+=`ASSETS
`,a+=`Item,Amount (BDT),Currency
`,a+=`Cash and Cash Equivalents,${Math.round(n.value.totalAssets*.4)},BDT
`,a+=`Accounts Receivable,${n.value.pendingRevenue},BDT
`,a+=`Equipment and Assets,${Math.round(n.value.totalAssets*.6-n.value.pendingRevenue)},BDT
`,a+=`TOTAL ASSETS,${n.value.totalAssets},BDT

`,a+=`LIABILITIES
`,a+=`Item,Amount (BDT),Currency
`,a+=`Accounts Payable,${Math.round(n.value.totalLiabilities*.6)},BDT
`,a+=`Accrued Expenses,${Math.round(n.value.totalLiabilities*.4)},BDT
`,a+=`TOTAL LIABILITIES,${n.value.totalLiabilities},BDT

`,a+=`EQUITY
`,a+=`Item,Amount (BDT),Currency
`,a+=`Owner's Capital,${Math.round(n.value.totalEquity*.7)},BDT
`,a+=`Retained Earnings,${Math.round(n.value.totalEquity*.3)},BDT
`,a+=`TOTAL EQUITY,${n.value.totalEquity},BDT

`,a+=`Balance Equation
`,a+=`Item,Amount (BDT),Currency
`,a+=`Assets,${n.value.totalAssets},BDT
`,a+=`Liabilities + Equity,${n.value.totalLiabilities+n.value.totalEquity},BDT
`,a+=`Balanced,${n.value.totalAssets===n.value.totalLiabilities+n.value.totalEquity?"Yes":"No"},Status
`,a},F=()=>{const a=n.value.totalRevenue>0?(n.value.netProfit/n.value.totalRevenue*100).toFixed(1):"0.0",l=V().toFixed(1);let i=`Report,Financial Summary Report
`;return i+=`Period,${d()}
`,i+=`Generated,${_(new Date)}

`,i+=`Financial Summary
`,i+=`Item,Amount (BDT),Change,Currency
`,i+=`Total Revenue,${n.value.totalRevenue},+${Math.abs(n.value.revenueChange)}%,BDT
`,i+=`Total Expenses,${n.value.totalExpenses},${n.value.expenseChange>=0?"+":""}${n.value.expenseChange}%,BDT
`,i+=`Net Profit,${n.value.netProfit},${a}% margin,BDT
`,i+=`Pending Revenue,${n.value.pendingRevenue},${n.value.pendingCount} invoices,BDT

`,i+=`Key Performance Indicators
`,i+=`KPI,Value,Unit
`,i+=`Profit Margin,${a},%
`,i+=`Return on Investment (ROI),${l},%
`,i+=`Revenue Growth Rate,${Math.abs(n.value.revenueChange)},%
`,i+=`Expense Efficiency,${n.value.totalRevenue>0?(n.value.totalExpenses/n.value.totalRevenue*100).toFixed(1):"0.0"},% of revenue
`,i+=`Cash Flow Status,${n.value.netProfit>=0?"Positive":"Negative"},Status
`,i},E=(a,l)=>{const i=new Blob([a],{type:"text/csv;charset=utf-8;"}),w=URL.createObjectURL(i),R=document.createElement("a");R.href=w,R.download=l,document.body.appendChild(R),R.click(),document.body.removeChild(R),URL.revokeObjectURL(w)},G=()=>{M.value=!1},ne=async()=>{try{c.fire({title:"Loading Financial Data...",text:`Fetching data for ${d()}`,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c.showLoading()}});const l=await(await fetch(`/admin-home/finance/dashboard/load/${t.value}`,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})).json();if(l.success)n.value=l.financialData,x.value=l.financialData.trendData||[],g.value=l.financialData.expenseCategories||[],N.value=l.financialData.recentTransactions||[],A.value=l.financialData.budgetStatus||[],I.value=l.financialData.financialAlerts||[],c.fire({title:"Data Loaded Successfully!",text:`Financial data for ${d()} has been updated.`,icon:"success",confirmButtonColor:"#007bff",timer:2e3,timerProgressBar:!0});else throw new Error("Failed to load financial data")}catch(a){console.error("Error loading financial data:",a),c.fire({title:"Error Loading Data",text:"Failed to load financial data. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},le=async()=>{await new Promise(l=>setTimeout(l,2e3));const a=O();E(a,`Expense-Report-${d().replace(" ","-")}.csv`)},re=async()=>{await new Promise(l=>setTimeout(l,2e3));const a=q();E(a,`Balance-Sheet-${d().replace(" ","-")}.csv`)},ie=async()=>{await new Promise(l=>setTimeout(l,2e3));const a=F();E(a,`Financial-Summary-${d().replace(" ","-")}.csv`)};return{selectedMonth:t,showCustomReportModal:M,generatingReport:s,dashboardData:n,customReport:B,availableMonths:P,trendData:x,maxAmount:o,expenseCategories:g,recentTransactions:N,budgetStatus:A,financialAlerts:I,formatNumber:b,formatDate:_,getCurrentMonthName:d,calculateROI:V,getBudgetProgressClass:W,generateMonthlyExpenseReport:J,generateMonthlyBalanceSheet:Z,generateFinancialSummary:ee,generateCustomReport:te,closeCustomReportModal:G,loadMonthData:ne}}},ge={class:"row"},be={class:"col-lg-12"},Ce={class:"dashboard-settings margin-top-40"},ye={class:"card mb-4"},_e={class:"card-header d-flex justify-content-between align-items-center"},De={class:"d-flex gap-2"},xe=["value"],we={class:"dropdown"},Re={class:"dropdown-menu"},Be={class:"card-body"},Ee={class:"row"},Te={class:"col-md-8"},Se={class:"text-muted mb-0"},Me={class:"col-md-4 text-end"},Pe={class:"last-updated"},Ae={class:"small text-primary"},Fe={class:"row mb-4"},ke={class:"col-lg-6 col-md-6 mb-3"},Le={class:"metric-card revenue-card compact"},Ne={class:"metric-content"},Ie={class:"metric-value"},Ve={class:"col-lg-6 col-md-6 mb-3"},Oe={class:"metric-card pending-card compact"},qe={class:"metric-content"},Ge={class:"metric-value"},Ue={class:"pending-count"},je={class:"row mb-4"},$e={class:"col-lg-6 col-md-6 mb-3"},Ke={class:"metric-card recurring-card compact"},Ye={class:"metric-content"},He={class:"metric-value"},Qe={class:"col-lg-6 col-md-6 mb-3"},ze={class:"metric-card forecast-card compact"},Xe={class:"metric-content"},We={class:"metric-value"},Je={class:"forecast-trend"},Ze={class:"row mb-4"},et={class:"col-lg-6 col-md-6 mb-3 mx-auto"},tt={class:"metric-card profit-card compact"},at={class:"metric-content"},st={class:"profit-margin"},ot={class:"row mb-4"},nt={class:"col-lg-8 mb-4"},lt={class:"card"},rt={class:"card-body"},it={class:"chart-container"},dt={class:"trend-chart"},ct={class:"trend-bars"},ut=["title"],mt=["title"],vt={class:"trend-label"},ft={class:"col-lg-4 mb-4"},ht={class:"card h-100"},pt={class:"card-body"},gt={class:"quick-stats"},bt={class:"stat-item"},Ct={class:"stat-details"},yt={class:"stat-value"},_t={class:"stat-item"},Dt={class:"stat-details"},xt={class:"stat-value"},wt={class:"stat-item"},Rt={class:"stat-details"},Bt={class:"stat-value"},Et={class:"stat-item"},Tt={class:"stat-details"},St={class:"stat-value"},Mt={class:"row mb-4"},Pt={class:"col-lg-6 mb-4"},At={class:"card"},Ft={class:"card-body"},kt={class:"expense-categories"},Lt={class:"category-info"},Nt={class:"category-name"},It={class:"category-amount"},Vt={class:"category-progress"},Ot={class:"progress"},qt={class:"text-muted"},Gt={class:"col-lg-6 mb-4"},Ut={class:"card"},jt={class:"card-header d-flex justify-content-between align-items-center"},$t={class:"card-body"},Kt={class:"recent-transactions"},Yt={class:"transaction-details"},Ht={class:"transaction-description"},Qt={class:"text-muted"},zt={class:"row mb-4"},Xt={class:"col-lg-8 mb-4"},Wt={class:"card"},Jt={class:"card-header"},Zt={class:"mb-0"},ea={class:"card-body"},ta={class:"budget-overview"},aa={class:"budget-header"},sa={class:"budget-name"},oa={class:"budget-amounts"},na={class:"used"},la={class:"total"},ra={class:"budget-progress"},ia={class:"progress"},da={class:"budget-status"},ca={class:"percentage"},ua={class:"col-lg-4 mb-4"},ma={class:"card"},va={class:"card-body"},fa={class:"financial-alerts"},ha={class:"alert-icon"},pa={class:"alert-content"},ga={class:"alert-title"},ba={class:"alert-message"},Ca={class:"alert-time"},ya={key:0,class:"no-alerts"},_a={class:"modal-header"},Da={class:"modal-body"},xa={class:"row"},wa={class:"col-md-6 mb-3"},Ra={class:"col-md-6 mb-3"},Ba={key:0,class:"row"},Ea={class:"col-md-6 mb-3"},Ta={class:"col-md-6 mb-3"},Sa={class:"mb-3"},Ma={class:"form-check-group"},Pa={class:"form-check"},Aa={class:"form-check"},Fa={class:"d-flex justify-content-end gap-2"},ka=["disabled"];function La(h,t,M,s,n,B){const P=ue("Head"),x=me('else"');return m(),u(y,null,[ve(P,{title:"Finance Dashboard"}),e("div",ge,[e("div",be,[e("div",Ce,[e("div",ye,[e("div",_e,[t[20]||(t[20]=e("h4",{class:"mb-0"},[e("i",{class:"fas fa-chart-pie me-2"}),v(" Finance Dashboard ")],-1)),e("div",De,[C(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.selectedMonth=o),onChange:t[1]||(t[1]=(...o)=>s.loadMonthData&&s.loadMonthData(...o)),class:"form-select form-select-sm",style:{width:"180px"}},[(m(!0),u(y,null,D(s.availableMonths,o=>(m(),u("option",{key:o.value,value:o.value},r(o.label),9,xe))),128))],544),[[k,s.selectedMonth]]),e("div",we,[t[19]||(t[19]=e("button",{class:"btn btn-primary btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown"},[e("i",{class:"fas fa-download"}),v(" Export Data ")],-1)),e("ul",Re,[e("li",null,[e("button",{class:"dropdown-item",onClick:t[2]||(t[2]=(...o)=>s.generateMonthlyExpenseReport&&s.generateMonthlyExpenseReport(...o))},"Monthly Expense Report")]),e("li",null,[e("button",{class:"dropdown-item",onClick:t[3]||(t[3]=(...o)=>s.generateMonthlyBalanceSheet&&s.generateMonthlyBalanceSheet(...o))},"Monthly Balance Sheet")]),e("li",null,[e("button",{class:"dropdown-item",onClick:t[4]||(t[4]=(...o)=>s.generateFinancialSummary&&s.generateFinancialSummary(...o))},"Financial Summary")]),t[18]||(t[18]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{class:"dropdown-item",onClick:t[5]||(t[5]=o=>s.showCustomReportModal=!0)},"Custom Export")])])])])]),e("div",Be,[e("div",Ee,[e("div",Te,[e("p",Se," Comprehensive financial overview for "+r(s.getCurrentMonthName())+". Monitor your income, expenses, assets, and generate detailed reports to track your business performance. ",1)]),e("div",Me,[e("div",Pe,[t[21]||(t[21]=e("small",{class:"text-muted"},"Last Updated:",-1)),e("div",Ae,r(s.formatDate(new Date)),1)])])])])]),e("div",Fe,[e("div",ke,[e("div",Le,[e("div",Ne,[e("div",Ie,"৳"+r(s.formatNumber(s.dashboardData.totalRevenue)),1),t[22]||(t[22]=e("div",{class:"metric-label"},"Total Revenue",-1)),e("div",{class:f(["metric-change",s.dashboardData.revenueChange>=0?"positive":"negative"])},[e("i",{class:f(s.dashboardData.revenueChange>=0?"fas fa-arrow-up":"fas fa-arrow-down")},null,2),v(" "+r(Math.abs(s.dashboardData.revenueChange))+"% from last month ",1)],2)]),t[23]||(t[23]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-money-bill-wave"})],-1))])]),e("div",Ve,[e("div",Oe,[e("div",qe,[e("div",Ge,"৳"+r(s.formatNumber(s.dashboardData.pendingRevenue)),1),t[24]||(t[24]=e("div",{class:"metric-label"},"Pending Payments",-1)),e("div",Ue,r(s.dashboardData.pendingCount)+" outstanding invoices ",1)]),t[25]||(t[25]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-hourglass-half"})],-1))])])]),e("div",je,[e("div",$e,[e("div",Ke,[e("div",Ye,[e("div",He,"৳"+r(s.formatNumber(s.dashboardData.recurringRevenue||0)),1),t[26]||(t[26]=e("div",{class:"metric-label"},"Monthly Recurring Revenue",-1)),t[27]||(t[27]=e("div",{class:"recurring-count"}," Predictable monthly income ",-1))]),t[28]||(t[28]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-sync-alt"})],-1))])]),e("div",Qe,[e("div",ze,[e("div",Xe,[e("div",We,"৳"+r(s.formatNumber(s.dashboardData.nextMonthForecast||s.dashboardData.totalRevenue*1.05)),1),t[30]||(t[30]=e("div",{class:"metric-label"},"Next Month Forecast",-1)),e("div",Je,[s.dashboardData.totalRevenue>0?(m(),u(y,{key:0},[v(r((s.dashboardData.nextMonthForecast||s.dashboardData.totalRevenue*1.05)>s.dashboardData.totalRevenue?"+":"")+r((((s.dashboardData.nextMonthForecast||s.dashboardData.totalRevenue*1.05)-s.dashboardData.totalRevenue)/s.dashboardData.totalRevenue*100).toFixed(1))+"% projected ",1)],64)):T("",!0),C((m(),u("template",null,[...t[29]||(t[29]=[v(" +5.0% projected growth ",-1)])])),[[x]])])]),t[31]||(t[31]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-chart-line"})],-1))])])]),e("div",Ze,[e("div",et,[e("div",tt,[e("div",at,[e("div",{class:f(["metric-value",s.dashboardData.netProfit>=0?"text-success":"text-danger"])}," ৳"+r(s.formatNumber(s.dashboardData.netProfit)),3),t[32]||(t[32]=e("div",{class:"metric-label"},"Net Profit",-1)),e("div",st,r(s.dashboardData.totalRevenue>0?(s.dashboardData.netProfit/s.dashboardData.totalRevenue*100).toFixed(1):"0.0")+"% margin ",1)]),t[33]||(t[33]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-chart-pie"})],-1))])])]),e("div",ot,[e("div",nt,[e("div",lt,[t[35]||(t[35]=e("div",{class:"card-header"},[e("h6",{class:"mb-0"},[e("i",{class:"fas fa-chart-area me-2"}),v(" Monthly Financial Trend ")])],-1)),e("div",rt,[e("div",it,[e("div",dt,[(m(!0),u(y,null,D(s.trendData,(o,g)=>(m(),u("div",{key:g,class:"trend-month"},[e("div",ct,[e("div",{class:"trend-bar revenue-bar",style:S(`height: ${s.maxAmount>0?o.revenue/s.maxAmount*100:0}%`),title:`Revenue: ৳${s.formatNumber(o.revenue)}`},null,12,ut),e("div",{class:"trend-bar expense-bar",style:S(`height: ${s.maxAmount>0?o.expenses/s.maxAmount*100:0}%`),title:`Expenses: ৳${s.formatNumber(o.expenses)}`},null,12,mt)]),e("div",vt,r(o.name),1)]))),128))]),t[34]||(t[34]=L('<div class="chart-legend" data-v-8722536d><div class="legend-item" data-v-8722536d><div class="legend-color revenue-color" data-v-8722536d></div><span data-v-8722536d>Revenue</span></div><div class="legend-item" data-v-8722536d><div class="legend-color expense-color" data-v-8722536d></div><span data-v-8722536d>Expenses</span></div></div>',1))])])])]),e("div",ft,[e("div",ht,[t[44]||(t[44]=e("div",{class:"card-header"},[e("h6",{class:"mb-0"},[e("i",{class:"fas fa-tachometer-alt me-2"}),v(" Quick Stats ")])],-1)),e("div",pt,[e("div",gt,[e("div",bt,[t[37]||(t[37]=e("div",{class:"stat-icon bg-primary"},[e("i",{class:"fas fa-coins"})],-1)),e("div",Ct,[e("div",yt,"৳"+r(s.formatNumber(s.dashboardData.totalAssets)),1),t[36]||(t[36]=e("div",{class:"stat-label"},"Total Assets",-1))])]),e("div",_t,[t[39]||(t[39]=e("div",{class:"stat-icon bg-warning"},[e("i",{class:"fas fa-credit-card"})],-1)),e("div",Dt,[e("div",xt,"৳"+r(s.formatNumber(s.dashboardData.totalLiabilities)),1),t[38]||(t[38]=e("div",{class:"stat-label"},"Total Liabilities",-1))])]),e("div",wt,[t[41]||(t[41]=e("div",{class:"stat-icon bg-info"},[e("i",{class:"fas fa-chart-pie"})],-1)),e("div",Rt,[e("div",Bt,"৳"+r(s.formatNumber(s.dashboardData.totalEquity)),1),t[40]||(t[40]=e("div",{class:"stat-label"},"Owner's Equity",-1))])]),e("div",Et,[t[43]||(t[43]=e("div",{class:"stat-icon bg-success"},[e("i",{class:"fas fa-percentage"})],-1)),e("div",Tt,[e("div",St,r(s.calculateROI().toFixed(1))+"%",1),t[42]||(t[42]=e("div",{class:"stat-label"},"Return on Investment",-1))])])])])])])]),e("div",Mt,[e("div",Pt,[e("div",At,[t[45]||(t[45]=e("div",{class:"card-header"},[e("h6",{class:"mb-0"},[e("i",{class:"fas fa-chart-donut me-2"}),v(" Expense Categories (This Month) ")])],-1)),e("div",Ft,[e("div",kt,[(m(!0),u(y,null,D(s.expenseCategories,o=>(m(),u("div",{key:o.name,class:"category-item"},[e("div",Lt,[e("div",Nt,[e("i",{class:f([o.icon,"me-2"])},null,2),v(" "+r(o.name),1)]),e("div",It,"৳"+r(s.formatNumber(o.amount)),1)]),e("div",Vt,[e("div",Ot,[e("div",{class:f(["progress-bar",o.color]),style:S(`width: ${s.dashboardData.totalExpenses>0?o.amount/s.dashboardData.totalExpenses*100:0}%`)},null,6)]),e("small",qt,r(s.dashboardData.totalExpenses>0?(o.amount/s.dashboardData.totalExpenses*100).toFixed(1):"0.0")+"%",1)])]))),128))])])])]),e("div",Gt,[e("div",Ut,[e("div",jt,[t[46]||(t[46]=e("h6",{class:"mb-0"},[e("i",{class:"fas fa-history me-2"}),v(" Recent Transactions ")],-1)),e("button",{class:"btn btn-sm btn-outline-primary",onClick:t[6]||(t[6]=o=>h.$inertia.visit("/admin-home/finance/expenses"))}," View All ")]),e("div",$t,[e("div",Kt,[(m(!0),u(y,null,D(s.recentTransactions,o=>(m(),u("div",{key:o.id,class:"transaction-item"},[e("div",{class:f(["transaction-icon",o.type==="income"?"income":"expense"])},[e("i",{class:f(o.icon)},null,2)],2),e("div",Yt,[e("div",Ht,r(o.description),1),e("small",Qt,r(s.formatDate(o.date)),1)]),e("div",{class:f(["transaction-amount",o.type==="income"?"text-success":"text-danger"])},r(o.type==="income"?"+":"-")+"৳"+r(s.formatNumber(o.amount)),3)]))),128))])])])])]),e("div",zt,[e("div",Xt,[e("div",Wt,[e("div",Jt,[e("h6",Zt,[t[47]||(t[47]=e("i",{class:"fas fa-wallet me-2"},null,-1)),v(" Budget Status ("+r(s.getCurrentMonthName())+") ",1)])]),e("div",ea,[e("div",ta,[(m(!0),u(y,null,D(s.budgetStatus,o=>(m(),u("div",{key:o.name,class:"budget-item"},[e("div",aa,[e("div",sa,[e("i",{class:f([o.icon,"me-2"])},null,2),v(" "+r(o.name),1)]),e("div",oa,[e("span",na,"৳"+r(s.formatNumber(o.used)),1),t[48]||(t[48]=e("span",{class:"divider"},"/",-1)),e("span",la,"৳"+r(s.formatNumber(o.total)),1)])]),e("div",ra,[e("div",ia,[e("div",{class:f(["progress-bar",s.getBudgetProgressClass(o)]),style:S(`width: ${o.total>0?Math.min(o.used/o.total*100,100):0}%`)},null,6)]),e("div",da,[e("small",ca,r(o.total>0?Math.round(o.used/o.total*100):0)+"% used",1),e("small",{class:f(["remaining",o.remaining<0?"text-danger":"text-success"])}," ৳"+r(s.formatNumber(Math.abs(o.remaining)))+" "+r(o.remaining<0?"over":"remaining"),3)])])]))),128))])])])]),e("div",ua,[e("div",ma,[t[50]||(t[50]=e("div",{class:"card-header"},[e("h6",{class:"mb-0"},[e("i",{class:"fas fa-exclamation-triangle me-2"}),v(" Financial Alerts ")])],-1)),e("div",va,[e("div",fa,[(m(!0),u(y,null,D(s.financialAlerts,o=>(m(),u("div",{key:o.id,class:f(["alert-item",o.type])},[e("div",ha,[e("i",{class:f(o.icon)},null,2)]),e("div",pa,[e("div",ga,r(o.title),1),e("div",ba,r(o.message),1),e("small",Ca,r(s.formatDate(o.date)),1)])],2))),128)),s.financialAlerts.length===0?(m(),u("div",ya,[...t[49]||(t[49]=[e("i",{class:"fas fa-check-circle text-success mb-2"},null,-1),e("p",{class:"text-muted mb-0"},"All good! No financial alerts at this time.",-1)])])):T("",!0)])])])])]),s.showCustomReportModal?(m(),u("div",{key:0,class:"modal-overlay",onClick:t[17]||(t[17]=(...o)=>s.closeCustomReportModal&&s.closeCustomReportModal(...o))},[e("div",{class:"modal-content",onClick:t[16]||(t[16]=H(()=>{},["stop"]))},[e("div",_a,[t[51]||(t[51]=e("h5",null,"Generate Custom Export",-1)),e("button",{onClick:t[7]||(t[7]=(...o)=>s.closeCustomReportModal&&s.closeCustomReportModal(...o)),class:"btn-close"},"×")]),e("div",Da,[e("form",{onSubmit:t[15]||(t[15]=H((...o)=>s.generateCustomReport&&s.generateCustomReport(...o),["prevent"]))},[e("div",xa,[e("div",wa,[t[53]||(t[53]=e("label",{class:"form-label"},"Export Type *",-1)),C(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.customReport.type=o),class:"form-select",required:""},[...t[52]||(t[52]=[L('<option value="expense" data-v-8722536d>Expense Report</option><option value="revenue" data-v-8722536d>Revenue Report</option><option value="balance" data-v-8722536d>Balance Sheet</option><option value="profit_loss" data-v-8722536d>Profit &amp; Loss</option><option value="budget" data-v-8722536d>Budget Analysis</option><option value="cash_flow" data-v-8722536d>Cash Flow Statement</option>',6)])],512),[[k,s.customReport.type]])]),e("div",Ra,[t[55]||(t[55]=e("label",{class:"form-label"},"Export Period *",-1)),C(e("select",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.customReport.period=o),class:"form-select",required:""},[...t[54]||(t[54]=[L('<option value="current_month" data-v-8722536d>Current Month</option><option value="last_month" data-v-8722536d>Last Month</option><option value="quarter" data-v-8722536d>Current Quarter</option><option value="year" data-v-8722536d>Current Year</option><option value="custom" data-v-8722536d>Custom Date Range</option>',5)])],512),[[k,s.customReport.period]])])]),s.customReport.period==="custom"?(m(),u("div",Ba,[e("div",Ea,[t[56]||(t[56]=e("label",{class:"form-label"},"Start Date",-1)),C(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.customReport.startDate=o),type:"date",class:"form-control",required:""},null,512),[[Q,s.customReport.startDate]])]),e("div",Ta,[t[57]||(t[57]=e("label",{class:"form-label"},"End Date",-1)),C(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.customReport.endDate=o),type:"date",class:"form-control",required:""},null,512),[[Q,s.customReport.endDate]])])])):T("",!0),t[62]||(t[62]=e("div",{class:"mb-3"},[e("label",{class:"form-label"},"Export Format"),e("div",{class:"alert alert-info"},[e("i",{class:"fas fa-info-circle me-2"}),v(" All exports are generated in CSV format for better data compatibility. ")])],-1)),e("div",Sa,[t[60]||(t[60]=e("label",{class:"form-label"},"Include",-1)),e("div",Ma,[e("div",Pa,[C(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=o=>s.customReport.includeCharts=o),id:"charts"},null,512),[[z,s.customReport.includeCharts]]),t[58]||(t[58]=e("label",{class:"form-check-label",for:"charts"},"Charts & Graphs",-1))]),e("div",Aa,[C(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=o=>s.customReport.includeComments=o),id:"comments"},null,512),[[z,s.customReport.includeComments]]),t[59]||(t[59]=e("label",{class:"form-check-label",for:"comments"},"Analysis & Comments",-1))])])]),e("div",Fa,[e("button",{type:"button",onClick:t[14]||(t[14]=(...o)=>s.closeCustomReportModal&&s.closeCustomReportModal(...o)),class:"btn btn-secondary"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary",disabled:s.generatingReport},[t[61]||(t[61]=e("i",{class:"fas fa-download"},null,-1)),v(" "+r(s.generatingReport?"Generating...":"Export Data"),1)],8,ka)])],32)])])])):T("",!0)])])])],64)}const qa=he(pe,[["render",La],["__scopeId","data-v-8722536d"]]);export{qa as default};

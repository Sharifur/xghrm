import{A as P}from"./AdminMaster-upIi9uLN.js";import{K as T,L as I,u as a,H as F,m as b,c as L,a as l,b as t,t as r,g as _,w as h,F as S,p as M,r as s,o as V,e as E,n as U,d as z,s as H}from"./app-RrRrrMtY.js";import{P as N}from"./Pagination-_bdAVIqO.js";import{S as u}from"./sweetalert2.all-dJWsu-1m.js";import{B as Y,a as O}from"./BsModalButton-0RagPaEK.js";import{I as K}from"./Input-K-IaNq0T.js";import{S as A}from"./Select-z8nEou51.js";import{B as j}from"./Button-0oI3-S2_.js";import{V as W}from"./ValidationErrors-qkK8fPvR.js";import{s as Z}from"./vue3-datepicker.esm-lWCF35Rg.js";import{_ as q}from"./_plugin-vue_export-helper-x3n3nnut.js";const G={name:"Index",layout:P,components:{VueDatePicker:T,Select:A,Pagination:N,Link:I,usePage:a,BsModal:Y,BsModalButton:O,BsInput:K,BsSelect:A,BsButton:j,BreezeValidationErrors:W,Datepicker:Z,Head:F},setup(){const v=[{label:"Pending",value:0},{label:"Approved",value:1}],n=[{label:"C/In",value:"C/In"},{label:"C/Out",value:"C/Out"},{label:"Leave",value:"leave"},{label:"Sick Leave",value:"sick-leave"},{label:"Paid Leave",value:"paid-leave"},{label:"Holiday",value:"holiday"},{label:"Work From Home",value:"work-from-home"}],c=b({date:new Date(a().props.value.date==null?new Date:a().props.value.date),status:a().props.value.status,type:a().props.value.type,employee:a().props.value.employee}),e=b({employee_id:null,type:null,date_time:null}),k=a().props.value.page_type;function C(){c.get(route("admin.employee.attendance.logs"))}function y(){return a().props.value.attendance_logs.data}function w(){return a().props.value.attendance_logs.links}function d(i){u.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(m=>{m.isConfirmed&&b({id:i.id}).post(route("admin.employee.attendance.logs.delete"),{onSuccess:()=>{u.fire("Deleted","item removed from system","warning")}})})}function p(i){u.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, Approve it!"}).then(m=>{m.isConfirmed&&b({id:i}).post(route("admin.employee.attendance.logs.approve"),{onSuccess:()=>{}})})}function f(){e.post(route("admin.employee.attendance.log.add"),{onSuccess:i=>{u.fire("Success","new attendance log added","success")}})}function g(){c.get(route("admin.employee.attendance.logs"))}function B(){return a().props.value.employees}function D(){u.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(i=>{i.isConfirmed&&(axios.post(route("admin.employee.attendance.logs.approve.pending")),window.location.reload())})}return{attendancesData:y,attendancesLink:w,deleteItem:d,addAttendanceLogFormSubmit:f,attendanceTypes:n,newLogData:e,employeesList:B,filterOptions:v,applyFilter:C,filterData:c,page_type:k,submitApproveData:p,approveAllLogs:D,filterFormSubmit:g}}},J={class:"row"},Q={class:"col-lg-12"},R={class:"dashboard-settings margin-top-40 margin-bottom-30"},X={class:"header-wrap d-flex justify-content-between"},$={class:"dashboards-title margin-bottom-40"},ee={class:"btn-wrapper"},te={class:"single-info-input margin-top-30"},oe=t("label",{class:"info-title"},"Date (Month)",-1),ne={class:"table-wrap table-responsive mt-5"},le={class:"table table-light"},ae=t("thead",null,[t("th",null,"ID"),t("th",null,"Employee Name"),t("th",null,"Type"),t("th",null,"Date"),t("th",null,"Time "),t("th",null,"Actions")],-1),se=t("i",{class:"fas fa-check"},null,-1),ie=t("i",{class:"fas fa-trash"},null,-1),re={class:"single-info-input margin-top-30"},de=t("label",{class:"info-title"},"Date Time",-1);function me(v,n,c,e,k,C){const y=s("Head"),w=s("BsModalButton"),d=s("Select"),p=s("VueDatePicker"),f=s("BsButton"),g=s("Link"),B=s("Pagination"),D=s("BreezeValidationErrors"),i=s("BsSelect"),m=s("BsModal");return V(),L(S,null,[l(y,{title:"All Attendance Logs"}),t("div",J,[t("div",Q,[t("div",R,[t("div",X,[t("h2",$,"All "+r(e.page_type==="index"?"":"Pending")+" Attendance Logs",1),t("div",ee,[t("button",{onClick:n[0]||(n[0]=(...o)=>e.approveAllLogs&&e.approveAllLogs(...o)),class:"btn btn-danger"},"Approve All Pending Log"),l(w,{target:"addnewcategory","button-class":"btn btn-info m-1"},{default:_(()=>[E("Add New Log")]),_:1})])]),t("form",{method:"get",onSubmit:n[5]||(n[5]=h(()=>{},["prevent"])),class:"filter_form"},[l(d,{title:"Employee",options:e.employeesList(),modelValue:e.filterData.employee,"onUpdate:modelValue":n[1]||(n[1]=o=>e.filterData.employee=o)},null,8,["options","modelValue"]),l(d,{title:"Type",options:e.attendanceTypes,modelValue:e.filterData.type,"onUpdate:modelValue":n[2]||(n[2]=o=>e.filterData.type=o)},null,8,["options","modelValue"]),l(d,{title:"Status",options:e.filterOptions,modelValue:e.filterData.status,"onUpdate:modelValue":n[3]||(n[3]=o=>e.filterData.status=o)},null,8,["options","modelValue"]),t("div",te,[oe,l(p,{modelValue:e.filterData.date,"onUpdate:modelValue":n[4]||(n[4]=o=>e.filterData.date=o)},null,8,["modelValue"])]),l(f,{"button-text":"Submit","button-type":"submit",onClick:e.filterFormSubmit,disabled:e.filterData.processing},null,8,["onClick","disabled"])],32),t("div",ne,[t("table",le,[ae,t("tbody",null,[(V(!0),L(S,null,M(e.attendancesData(),o=>(V(),L("tr",{key:o.id},[t("td",null,r(o.id),1),t("td",null,r(o.name),1),t("td",null,[t("span",{class:U(["alert text-capitalize",o.type==="C/In"?"alert-success":"alert-danger"])},r(o.type.replace("-"," ")),3),z(l(g,{onClick:x=>e.submitApproveData(o.id),class:"btn btn-success m-2"},{default:_(()=>[se]),_:2},1032,["onClick"]),[[H,o.status===0]])]),t("td",null,r(v.readableDateFormat(o.date_time)),1),t("td",null,r(new Date(o.date_time).toLocaleTimeString("en-US",{timeZone:"Asia/Dhaka"})),1),t("td",null,[l(g,{onClick:x=>e.deleteItem(o),class:"btn btn-danger m-2"},{default:_(()=>[ie]),_:2},1032,["onClick"])])]))),128))])])]),l(B,{links:e.attendancesLink()},null,8,["links"])])])]),l(m,{"modal-title":"Add New Attendance Log","modal-id":"addnewcategory","modal-size":"modal-md"},{default:_(()=>[l(D,{class:"mb-4"}),t("form",{onSubmit:n[9]||(n[9]=h(()=>{},["prevent"]))},[l(i,{title:"Employee",options:e.employeesList(),modelValue:e.newLogData.employee_id,"onUpdate:modelValue":n[6]||(n[6]=o=>e.newLogData.employee_id=o)},null,8,["options","modelValue"]),l(i,{title:"Status",options:e.attendanceTypes,modelValue:e.newLogData.type,"onUpdate:modelValue":n[7]||(n[7]=o=>e.newLogData.type=o)},null,8,["options","modelValue"]),t("div",re,[de,l(p,{modelValue:e.newLogData.date_time,"onUpdate:modelValue":n[8]||(n[8]=o=>e.newLogData.date_time=o)},null,8,["modelValue"])]),l(f,{"button-text":"Submit","button-type":"submit",onClick:e.addAttendanceLogFormSubmit,disabled:e.newLogData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const De=q(G,[["render",me]]);export{De as default};

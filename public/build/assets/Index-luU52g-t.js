import{A as V}from"./AdminMaster-kp-HkNmh.js";import{L as C,u as i,H as x,m as v,c as u,a as n,b as e,g as p,F as w,p as A,r as s,o as _,e as M,t as d,n as E,w as I}from"./app-NMZH-3Gf.js";import{P as z}from"./Pagination-46f0Iis6.js";import{S as f}from"./sweetalert2.all-co24XUOH.js";import{B as F,a as N}from"./BsModalButton-cWoWPfWa.js";import{B as P}from"./Input--3e-HiE7.js";import{S as T}from"./Select-4yHcRvsE.js";import{B as H}from"./Button-dMU1l4IO.js";import{V as U}from"./ValidationErrors-N59rxZEB.js";import{s as Y}from"./vue3-datepicker.esm-gtpJu_BA.js";import{_ as j}from"./_plugin-vue_export-helper-x3n3nnut.js";const q={name:"Index",layout:V,components:{Pagination:z,Link:C,usePage:i,BsModal:F,BsModalButton:N,BsInput:P,BsSelect:T,BsButton:H,BreezeValidationErrors:U,Datepicker:Y,Head:x},setup(){const r=[{label:"Leave",value:"leave"},{label:"Sick Leave",value:"sick-leave"},{label:"Paid Leave",value:"paid-leave"}],a=v({employee_id:null,type:null,date_time:null});function g(){return i().props.value.attendance_logs.data}function t(){return i().props.value.attendance_logs.links}function b(l){f.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(m=>{m.isConfirmed&&v({id:l.id}).post(route("admin.employee.attendance.logs.delete"),{onSuccess:()=>{f.fire("Deleted","item removed from system","warning")}})})}function B(){a.post(route("admin.employee.attendance.log.add"),{onSuccess:l=>{f.fire("Success","new attendance log added","success"),a.reset("employee_id","type","date_time","name")}})}function c(){return i().props.value.employees}return{attendancesData:g,attendancesLink:t,deleteItem:b,addAttendanceLogFormSubmit:B,attendanceTypes:r,newLogData:a,employeesList:c}}},G={class:"row"},J={class:"col-lg-12"},K={class:"dashboard-settings margin-top-40 margin-bottom-30"},O={class:"header-wrap d-flex justify-content-between"},Q=e("h2",{class:"dashboards-title margin-bottom-40"},"All Leaves",-1),R={class:"btn-wrapper"},W={class:"table-wrap table-responsive"},X={class:"table table-light"},Z=e("thead",null,[e("th",null,"ID"),e("th",null,"Employee Name"),e("th",null,"Type"),e("th",null,"Date"),e("th",null,"Actions")],-1),$=e("i",{class:"fas fa-trash"},null,-1),ee={class:"single-info-input margin-top-30"},te=e("label",{class:"info-title"},"Date Time",-1);function oe(r,a,g,t,b,B){const c=s("Head"),l=s("BsModalButton"),m=s("Link"),L=s("Pagination"),h=s("BreezeValidationErrors"),y=s("BsSelect"),k=s("Datepicker"),D=s("BsButton"),S=s("BsModal");return _(),u(w,null,[n(c,{title:"All Leaves"}),e("div",G,[e("div",J,[e("div",K,[e("div",O,[Q,e("div",R,[n(l,{target:"addnewcategory","button-class":"btn btn-info m-1"},{default:p(()=>[M("Add New Leave")]),_:1})])]),e("div",W,[e("table",X,[Z,e("tbody",null,[(_(!0),u(w,null,A(t.attendancesData(),o=>(_(),u("tr",{key:o.id},[e("td",null,d(o.id),1),e("td",null,d(o.name),1),e("td",null,[e("span",{class:E(["alert text-capitalize",o.type==="C/In"?"alert-success":"alert-danger"])},d(o.type.replace("-"," ")),3)]),e("td",null,d(r.readableDateFormat(o.date_time)),1),e("td",null,[n(m,{onClick:ae=>t.deleteItem(o),class:"btn btn-danger m-2"},{default:p(()=>[$]),_:2},1032,["onClick"])])]))),128))])])]),n(L,{links:t.attendancesLink()},null,8,["links"])])])]),n(S,{"modal-title":"Add New Attendance Log","modal-id":"addnewcategory","modal-size":"modal-md"},{default:p(()=>[n(h,{class:"mb-4"}),e("form",{onSubmit:a[3]||(a[3]=I(()=>{},["prevent"]))},[n(y,{title:"Employee",options:t.employeesList(),modelValue:t.newLogData.employee_id,"onUpdate:modelValue":a[0]||(a[0]=o=>t.newLogData.employee_id=o)},null,8,["options","modelValue"]),n(y,{title:"Status",options:t.attendanceTypes,modelValue:t.newLogData.type,"onUpdate:modelValue":a[1]||(a[1]=o=>t.newLogData.type=o)},null,8,["options","modelValue"]),e("div",ee,[te,n(k,{modelValue:t.newLogData.date_time,"onUpdate:modelValue":a[2]||(a[2]=o=>t.newLogData.date_time=o)},null,8,["modelValue"])]),n(D,{"button-text":"Submit","button-type":"submit",onClick:t.addAttendanceLogFormSubmit,disabled:t.newLogData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const fe=j(q,[["render",oe]]);export{fe as default};

import{L as V,u as c,K as D,H as x,m as N,c as _,a as r,b as t,g as w,F as h,p as F,r as i,o as f,e as A,t as u,n as y,w as P}from"./app-XmhLysL3.js";import{P as z}from"./Pagination-0FBZVfWn.js";import{S as I}from"./sweetalert2.all-ysYP70Aw.js";import{B as j,a as T}from"./BsModalButton-BgiMRUcJ.js";import{I as C}from"./Input-mT4jOMS5.js";import{S as H}from"./Select-BVmdasBU.js";import{B as E}from"./Button-9FjwbGXe.js";import{B as U}from"./ValidationErrors-LQ350ezF.js";import{U as Y}from"./UserMaster-V3vhNNc3.js";import{_ as O}from"./_plugin-vue_export-helper-x3n3nnut.js";function b(e){const n=Object.prototype.toString.call(e);return e instanceof Date||typeof e=="object"&&n==="[object Date]"?new e.constructor(+e):typeof e=="number"||n==="[object Number]"||typeof e=="string"||n==="[object String]"?new Date(e):new Date(NaN)}function B(e,n){return e instanceof Date?new e.constructor(n):new Date(n)}function q(e,n){const s=b(e);if(isNaN(n))return B(e,NaN);if(!n)return s;const o=s.getDate(),l=B(e,s.getTime());l.setMonth(s.getMonth()+n+1,0);const d=l.getDate();return o>=d?l:(s.setFullYear(l.getFullYear(),l.getMonth(),o),s)}function K(e){return b(e).getMonth()}function R(e){return b(e).getFullYear()}const W={name:"Index",layout:Y,components:{Pagination:z,Link:V,usePage:c,BsModal:j,BsModalButton:T,BsInput:C,BsSelect:H,BsButton:E,BreezeValidationErrors:U,VueDatePicker:D,Head:x},setup(){const e=[{label:"Leave",value:"leave"},{label:"Sick Leave",value:"sick-leave"},{label:"Work From Home",value:"work-from-home"}],n=N({employee_id:null,type:null,date_time:null}),s=new Date,o=q(new Date(R(new Date),K(new Date)),1);function l(){return c().props.value.attendance_logs.data}function d(){return c().props.value.attendance_logs.links}function m(){n.post(route("user.leaves.new"),{onSuccess:g=>{I.fire("Success","new attendance log added","success"),n.reset("employee_id","type","date_time","name")}})}function p(){return c().props.value.employees}return{attendancesData:l,attendancesLink:d,addAttendanceLogFormSubmit:m,attendanceTypes:e,newLogData:n,employeesList:p,VueDatePicker:D,minDate:s,maxDate:o}}},G={class:"row"},J={class:"col-lg-12"},Q={class:"dashboard-settings margin-top-40 margin-bottom-30"},X={class:"header-wrap d-flex justify-content-between"},Z=t("h2",{class:"dashboards-title margin-bottom-40"},"All Attendance Request",-1),$={class:"btn-wrapper"},ee={class:"table-wrap table-responsive"},te={class:"table table-light table-secondary"},ne=t("thead",null,[t("th",null,"ID"),t("th",null,"Type"),t("th",null,"Status"),t("th",null,"Date")],-1),oe={class:"single-info-input margin-top-30"},ae=t("label",{class:"info-title"},"Date Time",-1);function se(e,n,s,o,l,d){const m=i("Head"),p=i("BsModalButton"),g=i("Pagination"),v=i("BreezeValidationErrors"),k=i("BsSelect"),S=i("VueDatePicker"),L=i("BsButton"),M=i("BsModal");return f(),_(h,null,[r(m,{title:"All Leaves"}),t("div",G,[t("div",J,[t("div",Q,[t("div",X,[Z,t("div",$,[r(p,{target:"addnewcategory","button-class":"btn btn-info m-1"},{default:w(()=>[A("Add New Request")]),_:1})])]),t("div",ee,[t("table",te,[ne,t("tbody",null,[(f(!0),_(h,null,F(o.attendancesData(),a=>(f(),_("tr",{key:a.id},[t("td",null,u(a.id),1),t("td",null,[t("span",{class:y(["alert text-capitalize",a.type])},u(a.type.replaceAll("-"," ")),3)]),t("td",null,[t("span",{class:y(["alert text-capitalize",a.status===1?"alert-success":"alert-danger"])},u(a.status===1?"Approved":"pending"),3)]),t("td",null,u(e.readableDateFormat(a.date_time)),1)]))),128))])])]),r(g,{links:o.attendancesLink()},null,8,["links"])])])]),r(M,{"modal-title":"Add New Attendance Log","modal-id":"addnewcategory","modal-size":"modal-md"},{default:w(()=>[r(v,{class:"mb-4"}),t("form",{onSubmit:n[2]||(n[2]=P(()=>{},["prevent"]))},[r(k,{title:"Status",options:o.attendanceTypes,modelValue:o.newLogData.type,"onUpdate:modelValue":n[0]||(n[0]=a=>o.newLogData.type=a)},null,8,["options","modelValue"]),t("div",oe,[ae,r(S,{"start-date":new Date,"disabled-week-days":[5],modelValue:o.newLogData.date_time,"onUpdate:modelValue":n[1]||(n[1]=a=>o.newLogData.date_time=a),"min-date":o.minDate,"max-date":o.maxDate},null,8,["start-date","modelValue","min-date","max-date"])]),r(L,{"button-text":"Submit","button-type":"submit",onClick:o.addAttendanceLogFormSubmit,disabled:o.newLogData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const be=O(W,[["render",se]]);export{be as default};

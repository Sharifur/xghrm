import{A as de}from"./AdminMaster-C7p7F_i9.js";import{H as ce,r as me,c as m,o as u,a as ue,b as e,h as F,f as v,e as y,A as k,F as p,p as _,t as i,n as f,d as N,$ as E,w as Q,i as z,j as X,l as b,B as ve,y as W}from"./app-3IEMQ5of.js";import{S as c}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{_ as fe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const he={layout:de,name:"FinanceDashboard",components:{Head:ce},props:{financialData:Object,currentMonth:String},setup(h){var U,j,K,Y,H;const t=b(h.currentMonth||new Date().toISOString().slice(0,7)),T=b(!1),s=b(!1),n=b(h.financialData||{}),R=ve({type:"expense",period:"current_month",startDate:"",endDate:"",format:"csv",includeCharts:!0,includeComments:!1}),S=W(()=>{const a=[],r=new Date;for(let l=11;l>=0;l--){const D=new Date(r.getFullYear(),r.getMonth()-l,1);a.push({value:D.toISOString().slice(0,7),label:D.toLocaleDateString("en-US",{month:"long",year:"numeric"})})}return a}),o=b(((U=h.financialData)==null?void 0:U.trendData)||[]),M=W(()=>Math.max(...o.value.flatMap(a=>[a.revenue,a.expenses]))),x=b(((j=h.financialData)==null?void 0:j.expenseCategories)||[]),L=b(((K=h.financialData)==null?void 0:K.recentTransactions)||[]),P=b(((Y=h.financialData)==null?void 0:Y.budgetStatus)||[]),I=b(((H=h.financialData)==null?void 0:H.financialAlerts)||[]),g=a=>{if(!a&&a!==0)return"0";const r=Math.round((a+Number.EPSILON)*100)/100;return new Intl.NumberFormat("en-US",{minimumFractionDigits:0,maximumFractionDigits:r%1===0?0:2}).format(r)},C=a=>new Date(a).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),d=()=>new Date(t.value+"-01").toLocaleDateString("en-US",{month:"long",year:"numeric"}),V=()=>n.value.totalEquity>0?n.value.netProfit/n.value.totalEquity*100:0,J=a=>{if(!a.total||a.total<=0)return"bg-secondary";const r=a.used/a.total*100;return r>=100?"bg-danger":r>=80?"bg-warning":"bg-success"},Z=async()=>{try{(await c.fire({title:"Generate Monthly Expense Report",html:`
                        <div class="text-left">
                            <p><strong>Report Period:</strong> ${d()}</p>
                            <p><strong>Total Expenses:</strong> ৳${g(n.value.totalExpenses)}</p>
                            <p><strong>Categories:</strong> ${x.value.length} expense categories</p>
                        </div>
                    `,icon:"info",showCancelButton:!0,confirmButtonColor:"#007bff",cancelButtonColor:"#6c757d",confirmButtonText:"Generate & Download CSV",cancelButtonText:"Cancel"})).isConfirmed&&(c.fire({title:"Generating Report...",text:"Please wait while we create your expense report.",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c.showLoading()}}),await re(),c.fire({title:"Report Downloaded!",text:`Monthly expense report for ${d()} has been downloaded to your device.`,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0}))}catch(a){console.error("Error generating report:",a),c.fire({title:"Error!",text:"Failed to generate expense report. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},$=async()=>{try{(await c.fire({title:"Generate Monthly Balance Sheet",html:`
                        <div class="text-left">
                            <p><strong>Report Period:</strong> ${d()}</p>
                            <p><strong>Total Assets:</strong> ৳${g(n.value.totalAssets)}</p>
                            <p><strong>Total Liabilities:</strong> ৳${g(n.value.totalLiabilities)}</p>
                            <p><strong>Owner's Equity:</strong> ৳${g(n.value.totalEquity)}</p>
                        </div>
                    `,icon:"info",showCancelButton:!0,confirmButtonColor:"#007bff",cancelButtonColor:"#6c757d",confirmButtonText:"Generate & Download CSV",cancelButtonText:"Cancel"})).isConfirmed&&(c.fire({title:"Generating Balance Sheet...",text:"Please wait while we create your balance sheet report.",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c.showLoading()}}),await ie(),c.fire({title:"Report Downloaded!",text:`Balance sheet for ${d()} has been downloaded to your device.`,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0}))}catch(a){console.error("Error generating report:",a),c.fire({title:"Error!",text:"Failed to generate balance sheet report. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},ee=async()=>{try{(await c.fire({title:"Generate Financial Summary",html:`
                        <div class="text-left">
                            <p><strong>Report Period:</strong> ${d()}</p>
                            <p><strong>Revenue:</strong> ৳${g(n.value.totalRevenue)}</p>
                            <p><strong>Expenses:</strong> ৳${g(n.value.totalExpenses)}</p>
                            <p><strong>Net Profit:</strong> ৳${g(n.value.netProfit)}</p>
                            <p><strong>Profit Margin:</strong> ${n.value.totalRevenue>0?(n.value.netProfit/n.value.totalRevenue*100).toFixed(1):"0.0"}%</p>
                        </div>
                    `,icon:"info",showCancelButton:!0,confirmButtonColor:"#007bff",cancelButtonColor:"#6c757d",confirmButtonText:"Generate & Download CSV",cancelButtonText:"Cancel"})).isConfirmed&&(c.fire({title:"Generating Financial Summary...",text:"Please wait while we create your financial summary report.",allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c.showLoading()}}),await le(),c.fire({title:"Report Downloaded!",text:`Financial summary for ${d()} has been downloaded to your device.`,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0}))}catch(a){console.error("Error generating report:",a),c.fire({title:"Error!",text:"Failed to generate financial summary report. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},te=async()=>{s.value=!0;try{await new Promise(l=>setTimeout(l,2e3));let a="",r="";switch(R.type){case"expense":a=O(),r=`Custom-Expense-Report-${d().replace(" ","-")}.csv`;break;case"revenue":a=ae(),r=`Custom-Revenue-Report-${d().replace(" ","-")}.csv`;break;case"balance":a=G(),r=`Custom-Balance-Sheet-${d().replace(" ","-")}.csv`;break;case"profit_loss":a=A(),r=`Custom-Profit-Loss-${d().replace(" ","-")}.csv`;break;case"budget":a=se(),r=`Custom-Budget-Report-${d().replace(" ","-")}.csv`;break;case"cash_flow":a=oe(),r=`Custom-Cash-Flow-${d().replace(" ","-")}.csv`;break;default:a=A(),r=`Custom-Report-${d().replace(" ","-")}.csv`}B(a,r),q(),c.fire({title:"Custom Report Generated!",text:`Your ${R.type} report has been downloaded as CSV.`,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0})}catch{c.fire({title:"Error!",text:"Failed to generate custom report. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}finally{s.value=!1}},ae=()=>{let a=`Report,Revenue Report
`;return a+=`Period,${d()}
`,a+=`Generated,${C(new Date)}

`,a+=`Revenue Summary
`,a+=`Item,Amount (BDT),Details,Currency
`,a+=`Total Revenue,${n.value.totalRevenue},Revenue Growth: +${Math.abs(n.value.revenueChange)}%,BDT
`,a+=`Pending Revenue,${n.value.pendingRevenue},${n.value.pendingCount} outstanding invoices,BDT
`,a+=`Revenue Growth Rate,${Math.abs(n.value.revenueChange)},Compared to last month,%
`,a},se=()=>{let a=`Report,Budget Analysis Report
`;return a+=`Period,${d()}
`,a+=`Generated,${C(new Date)}

`,a+=`Budget Analysis
`,a+=`Category,Used (BDT),Budget (BDT),Remaining (BDT),Status,Currency
`,P.value.forEach(r=>{const l=r.remaining<0?"Over Budget":"Under Budget";a+=`${r.name},${r.used},${r.total},${Math.abs(r.remaining)},${l},BDT
`}),a},oe=()=>{let a=`Report,Cash Flow Statement
`;a+=`Period,${d()}
`,a+=`Generated,${C(new Date)}

`,a+=`Cash Inflows
`,a+=`Source,Amount (BDT),Currency
`,a+=`Revenue Received,${n.value.totalRevenue},BDT
`,a+=`Other Income,${Math.round(n.value.totalRevenue*.05)},BDT

`,a+=`Cash Outflows
`,a+=`Category,Amount (BDT),Currency
`,a+=`Operating Expenses,${n.value.totalExpenses},BDT
`,a+=`Tax Payments,${Math.round(n.value.totalRevenue*.15)},BDT

`;const r=n.value.netProfit-n.value.totalRevenue*.15;return a+=`Net Cash Flow
`,a+=`Item,Amount (BDT),Status,Currency
`,a+=`Net Cash Flow,${Math.round(r)},${r>=0?"Positive":"Negative"},BDT
`,a},O=()=>{let a=`Report,Monthly Expense Report
`;return a+=`Period,${d()}
`,a+=`Generated,${C(new Date)}

`,a+=`Summary
`,a+=`Item,Amount (BDT),Currency
`,a+=`Total Monthly Expenses,${n.value.totalExpenses},BDT
`,a+=`Number of Categories,${x.value.length},Count
`,a+=`Average per Category,${Math.round(n.value.totalExpenses/x.value.length)},BDT

`,a+=`Expense Categories Breakdown
`,a+=`Category,Amount (BDT),Percentage,Currency
`,x.value.forEach(r=>{const l=n.value.totalExpenses>0?(r.amount/n.value.totalExpenses*100).toFixed(1):"0.0";a+=`${r.name},${r.amount},${l}%,BDT
`}),a},G=()=>{let a=`Report,Balance Sheet
`;return a+=`Period,As of ${d()}
`,a+=`Generated,${C(new Date)}

`,a+=`ASSETS
`,a+=`Item,Amount (BDT),Currency
`,a+=`Cash and Cash Equivalents,${Math.round(n.value.totalAssets*.4)},BDT
`,a+=`Accounts Receivable,${n.value.pendingRevenue},BDT
`,a+=`Equipment and Assets,${Math.round(n.value.totalAssets*.6-n.value.pendingRevenue)},BDT
`,a+=`TOTAL ASSETS,${n.value.totalAssets},BDT

`,a+=`LIABILITIES
`,a+=`Item,Amount (BDT),Currency
`,a+=`Accounts Payable,${Math.round(n.value.totalLiabilities*.6)},BDT
`,a+=`Accrued Expenses,${Math.round(n.value.totalLiabilities*.4)},BDT
`,a+=`TOTAL LIABILITIES,${n.value.totalLiabilities},BDT

`,a+=`EQUITY
`,a+=`Item,Amount (BDT),Currency
`,a+=`Owner's Capital,${Math.round(n.value.totalEquity*.7)},BDT
`,a+=`Retained Earnings,${Math.round(n.value.totalEquity*.3)},BDT
`,a+=`TOTAL EQUITY,${n.value.totalEquity},BDT

`,a+=`Balance Equation
`,a+=`Item,Amount (BDT),Currency
`,a+=`Assets,${n.value.totalAssets},BDT
`,a+=`Liabilities + Equity,${n.value.totalLiabilities+n.value.totalEquity},BDT
`,a+=`Balanced,${n.value.totalAssets===n.value.totalLiabilities+n.value.totalEquity?"Yes":"No"},Status
`,a},A=()=>{const a=n.value.totalRevenue>0?(n.value.netProfit/n.value.totalRevenue*100).toFixed(1):"0.0",r=V().toFixed(1);let l=`Report,Financial Summary Report
`;return l+=`Period,${d()}
`,l+=`Generated,${C(new Date)}

`,l+=`Financial Summary
`,l+=`Item,Amount (BDT),Change,Currency
`,l+=`Total Revenue,${n.value.totalRevenue},+${Math.abs(n.value.revenueChange)}%,BDT
`,l+=`Total Expenses,${n.value.totalExpenses},${n.value.expenseChange>=0?"+":""}${n.value.expenseChange}%,BDT
`,l+=`Net Profit,${n.value.netProfit},${a}% margin,BDT
`,l+=`Pending Revenue,${n.value.pendingRevenue},${n.value.pendingCount} invoices,BDT

`,l+=`Key Performance Indicators
`,l+=`KPI,Value,Unit
`,l+=`Profit Margin,${a},%
`,l+=`Return on Investment (ROI),${r},%
`,l+=`Revenue Growth Rate,${Math.abs(n.value.revenueChange)},%
`,l+=`Expense Efficiency,${n.value.totalRevenue>0?(n.value.totalExpenses/n.value.totalRevenue*100).toFixed(1):"0.0"},% of revenue
`,l+=`Cash Flow Status,${n.value.netProfit>=0?"Positive":"Negative"},Status
`,l},B=(a,r)=>{const l=new Blob([a],{type:"text/csv;charset=utf-8;"}),D=URL.createObjectURL(l),w=document.createElement("a");w.href=D,w.download=r,document.body.appendChild(w),w.click(),document.body.removeChild(w),URL.revokeObjectURL(D)},q=()=>{T.value=!1},ne=async()=>{try{c.fire({title:"Loading Financial Data...",text:`Fetching data for ${d()}`,allowOutsideClick:!1,allowEscapeKey:!1,showConfirmButton:!1,didOpen:()=>{c.showLoading()}});const r=await(await fetch(`/admin-home/finance/dashboard/load/${t.value}`,{method:"GET",headers:{"Content-Type":"application/json","X-Requested-With":"XMLHttpRequest"}})).json();if(r.success)n.value=r.financialData,o.value=r.financialData.trendData||[],x.value=r.financialData.expenseCategories||[],L.value=r.financialData.recentTransactions||[],P.value=r.financialData.budgetStatus||[],I.value=r.financialData.financialAlerts||[],c.fire({title:"Data Loaded Successfully!",text:`Financial data for ${d()} has been updated.`,icon:"success",confirmButtonColor:"#007bff",timer:2e3,timerProgressBar:!0});else throw new Error("Failed to load financial data")}catch(a){console.error("Error loading financial data:",a),c.fire({title:"Error Loading Data",text:"Failed to load financial data. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},re=async()=>{await new Promise(r=>setTimeout(r,2e3));const a=O();B(a,`Expense-Report-${d().replace(" ","-")}.csv`)},ie=async()=>{await new Promise(r=>setTimeout(r,2e3));const a=G();B(a,`Balance-Sheet-${d().replace(" ","-")}.csv`)},le=async()=>{await new Promise(r=>setTimeout(r,2e3));const a=A();B(a,`Financial-Summary-${d().replace(" ","-")}.csv`)};return{selectedMonth:t,showCustomReportModal:T,generatingReport:s,dashboardData:n,customReport:R,availableMonths:S,trendData:o,maxAmount:M,expenseCategories:x,recentTransactions:L,budgetStatus:P,financialAlerts:I,formatNumber:g,formatDate:C,getCurrentMonthName:d,calculateROI:V,getBudgetProgressClass:J,generateMonthlyExpenseReport:Z,generateMonthlyBalanceSheet:$,generateFinancialSummary:ee,generateCustomReport:te,closeCustomReportModal:q,loadMonthData:ne}}},pe={class:"row"},be={class:"col-lg-12"},ge={class:"dashboard-settings margin-top-40"},Ce={class:"card mb-4"},ye={class:"card-header d-flex justify-content-between align-items-center"},xe={class:"d-flex gap-2"},_e=["value"],De={class:"dropdown"},we={class:"dropdown-menu"},Re={class:"card-body"},Be={class:"row"},Ee={class:"col-md-8"},Te={class:"text-muted mb-0"},Se={class:"col-md-4 text-end"},Me={class:"last-updated"},Pe={class:"small text-primary"},Ae={class:"row mb-4"},Fe={class:"col-lg-6 col-md-6 mb-3"},ke={class:"metric-card revenue-card compact"},Ne={class:"metric-content"},Le={class:"metric-value"},Ie={class:"metric-explanation"},Ve={class:"col-lg-6 col-md-6 mb-3"},Oe={class:"metric-card revenue-card compact"},Ge={class:"metric-content"},qe={class:"metric-value"},Ue={class:"metric-explanation"},je={class:"row mb-4"},Ke={class:"col-lg-6 col-md-6 mb-3"},Ye={class:"metric-card pending-card compact"},He={class:"metric-content"},Qe={class:"metric-value"},ze={class:"pending-count"},Xe={class:"col-lg-6 col-md-6 mb-3"},We={class:"metric-card recurring-card compact"},Je={class:"metric-content"},Ze={class:"metric-value"},$e={class:"row mb-4"},et={class:"col-lg-12 mb-3"},tt={class:"metric-card forecast-card compact"},at={class:"metric-content"},st={class:"metric-value"},ot={class:"forecast-trend"},nt={class:"row mb-4"},rt={class:"col-lg-6 col-md-6 mb-3 mx-auto"},it={class:"metric-card profit-card compact"},lt={class:"metric-content"},dt={class:"profit-margin"},ct={class:"row mb-4"},mt={class:"col-lg-8 mb-4"},ut={class:"card"},vt={class:"card-body"},ft={class:"chart-container"},ht={class:"trend-chart"},pt={class:"trend-bars"},bt=["title"],gt=["title"],Ct={class:"trend-label"},yt={class:"col-lg-4 mb-4"},xt={class:"card h-100"},_t={class:"card-body"},Dt={class:"quick-stats"},wt={class:"stat-item"},Rt={class:"stat-details"},Bt={class:"stat-value"},Et={class:"stat-item"},Tt={class:"stat-details"},St={class:"stat-value"},Mt={class:"stat-item"},Pt={class:"stat-details"},At={class:"stat-value"},Ft={class:"stat-item"},kt={class:"stat-details"},Nt={class:"stat-value"},Lt={class:"row mb-4"},It={class:"col-lg-6 mb-4"},Vt={class:"card"},Ot={class:"card-body"},Gt={class:"expense-categories"},qt={class:"category-info"},Ut={class:"category-name"},jt={class:"category-amount"},Kt={class:"category-progress"},Yt={class:"progress"},Ht={class:"text-muted"},Qt={class:"col-lg-6 mb-4"},zt={class:"card"},Xt={class:"card-header d-flex justify-content-between align-items-center"},Wt={class:"card-body"},Jt={class:"recent-transactions"},Zt={class:"transaction-details"},$t={class:"transaction-description"},ea={class:"text-muted"},ta={class:"row mb-4"},aa={class:"col-lg-8 mb-4"},sa={class:"card"},oa={class:"card-header"},na={class:"mb-0"},ra={class:"card-body"},ia={class:"budget-overview"},la={class:"budget-header"},da={class:"budget-name"},ca={class:"budget-amounts"},ma={class:"used"},ua={class:"total"},va={class:"budget-progress"},fa={class:"progress"},ha={class:"budget-status"},pa={class:"percentage"},ba={class:"col-lg-4 mb-4"},ga={class:"card"},Ca={class:"card-body"},ya={class:"financial-alerts"},xa={class:"alert-icon"},_a={class:"alert-content"},Da={class:"alert-title"},wa={class:"alert-message"},Ra={class:"alert-time"},Ba={key:0,class:"no-alerts"},Ea={class:"modal-header"},Ta={class:"modal-body"},Sa={class:"row"},Ma={class:"col-md-6 mb-3"},Pa={class:"col-md-6 mb-3"},Aa={key:0,class:"row"},Fa={class:"col-md-6 mb-3"},ka={class:"col-md-6 mb-3"},Na={class:"mb-3"},La={class:"form-check-group"},Ia={class:"form-check"},Va={class:"form-check"},Oa={class:"d-flex justify-content-end gap-2"},Ga=["disabled"];function qa(h,t,T,s,n,R){const S=me("Head");return u(),m(p,null,[ue(S,{title:"Finance Dashboard"}),e("div",pe,[e("div",be,[e("div",ge,[e("div",Ce,[e("div",ye,[t[20]||(t[20]=e("h4",{class:"mb-0"},[e("i",{class:"fas fa-chart-pie me-2"}),v(" Finance Dashboard ")],-1)),e("div",xe,[y(e("select",{"onUpdate:modelValue":t[0]||(t[0]=o=>s.selectedMonth=o),onChange:t[1]||(t[1]=(...o)=>s.loadMonthData&&s.loadMonthData(...o)),class:"form-select form-select-sm",style:{width:"180px"}},[(u(!0),m(p,null,_(s.availableMonths,o=>(u(),m("option",{key:o.value,value:o.value},i(o.label),9,_e))),128))],544),[[k,s.selectedMonth]]),e("div",De,[t[19]||(t[19]=e("button",{class:"btn btn-primary btn-sm dropdown-toggle",type:"button","data-bs-toggle":"dropdown"},[e("i",{class:"fas fa-download"}),v(" Export Data ")],-1)),e("ul",we,[e("li",null,[e("button",{class:"dropdown-item",onClick:t[2]||(t[2]=(...o)=>s.generateMonthlyExpenseReport&&s.generateMonthlyExpenseReport(...o))},"Monthly Expense Report")]),e("li",null,[e("button",{class:"dropdown-item",onClick:t[3]||(t[3]=(...o)=>s.generateMonthlyBalanceSheet&&s.generateMonthlyBalanceSheet(...o))},"Monthly Balance Sheet")]),e("li",null,[e("button",{class:"dropdown-item",onClick:t[4]||(t[4]=(...o)=>s.generateFinancialSummary&&s.generateFinancialSummary(...o))},"Financial Summary")]),t[18]||(t[18]=e("li",null,[e("hr",{class:"dropdown-divider"})],-1)),e("li",null,[e("button",{class:"dropdown-item",onClick:t[5]||(t[5]=o=>s.showCustomReportModal=!0)},"Custom Export")])])])])]),e("div",Re,[e("div",Be,[e("div",Ee,[e("p",Te," Comprehensive financial overview for "+i(s.getCurrentMonthName())+". Monitor your income, expenses, assets, and generate detailed reports to track your business performance. ",1)]),e("div",Se,[e("div",Me,[t[21]||(t[21]=e("small",{class:"text-muted"},"Last Updated:",-1)),e("div",Pe,i(s.formatDate(new Date)),1)])])])])]),e("div",Ae,[e("div",Fe,[e("div",ke,[e("div",Ne,[e("div",Le,"৳"+i(s.formatNumber(s.dashboardData.grossProfit)),1),t[22]||(t[22]=e("div",{class:"metric-label"},"Gross Profit",-1)),t[23]||(t[23]=e("div",{class:"metric-change positive"},[e("i",{class:"fas fa-calculator"}),v(" Including pending payments ")],-1)),e("div",Ie," Total revenue (৳"+i(s.formatNumber(s.dashboardData.totalGrossRevenue))+") - Expenses (৳"+i(s.formatNumber(s.dashboardData.totalExpenses))+") ",1)]),t[24]||(t[24]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-chart-bar"})],-1))])]),e("div",Ve,[e("div",Oe,[e("div",Ge,[e("div",qe,"৳"+i(s.formatNumber(s.dashboardData.netProfit)),1),t[25]||(t[25]=e("div",{class:"metric-label"},"Net Profit",-1)),e("div",{class:f(["metric-change",s.dashboardData.revenueChange>=0?"positive":"negative"])},[e("i",{class:f(s.dashboardData.revenueChange>=0?"fas fa-arrow-up":"fas fa-arrow-down")},null,2),v(" "+i(Math.abs(s.dashboardData.revenueChange))+"% from last month ",1)],2),e("div",Ue," Received revenue (৳"+i(s.formatNumber(s.dashboardData.grossRevenue))+") - Expenses (৳"+i(s.formatNumber(s.dashboardData.totalExpenses))+") ",1)]),t[26]||(t[26]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-money-bill-wave"})],-1))])])]),e("div",je,[e("div",Ke,[e("div",Ye,[e("div",He,[e("div",Qe,"৳"+i(s.formatNumber(s.dashboardData.pendingRevenue)),1),t[27]||(t[27]=e("div",{class:"metric-label"},"Pending Payments",-1)),e("div",ze,i(s.dashboardData.pendingCount)+" outstanding invoices ",1),t[28]||(t[28]=e("div",{class:"metric-explanation"}," Not yet received (included in gross, not in net) ",-1))]),t[29]||(t[29]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-hourglass-half"})],-1))])]),e("div",Xe,[e("div",We,[e("div",Je,[e("div",Ze,"৳"+i(s.formatNumber(s.dashboardData.monthlyRecurringExpenses||s.dashboardData.recurringExpenses||0)),1),t[30]||(t[30]=e("div",{class:"metric-label"},"Monthly Recurring Expenses",-1)),t[31]||(t[31]=e("div",{class:"recurring-count"}," Fixed monthly operating costs ",-1)),t[32]||(t[32]=e("div",{class:"metric-explanation"}," Server, rent, subscriptions & other recurring bills ",-1))]),t[33]||(t[33]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-sync-alt"})],-1))])])]),e("div",$e,[e("div",et,[e("div",tt,[e("div",at,[e("div",st,"৳"+i(s.formatNumber(s.dashboardData.nextMonthForecast||s.dashboardData.totalRevenue*1.05)),1),t[34]||(t[34]=e("div",{class:"metric-label"},"Next Month Forecast",-1)),e("div",ot,[s.dashboardData.totalRevenue>0?(u(),m(p,{key:0},[v(i((s.dashboardData.nextMonthForecast||s.dashboardData.totalRevenue*1.05)>s.dashboardData.totalRevenue?"+":"")+i((((s.dashboardData.nextMonthForecast||s.dashboardData.totalRevenue*1.05)-s.dashboardData.totalRevenue)/s.dashboardData.totalRevenue*100).toFixed(1))+"% projected ",1)],64)):(u(),m(p,{key:1},[v(" +5.0% projected growth ")],64))]),t[35]||(t[35]=e("div",{class:"metric-explanation"}," Based on current net profit with 5% growth projection ",-1))]),t[36]||(t[36]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-chart-line"})],-1))])])]),e("div",nt,[e("div",rt,[e("div",it,[e("div",lt,[e("div",{class:f(["metric-value",s.dashboardData.netProfit>=0?"text-success":"text-danger"])}," ৳"+i(s.formatNumber(s.dashboardData.netProfit)),3),t[37]||(t[37]=e("div",{class:"metric-label"},"Net Profit",-1)),e("div",dt,i(s.dashboardData.totalRevenue>0?(s.dashboardData.netProfit/s.dashboardData.totalRevenue*100).toFixed(1):"0.0")+"% margin ",1)]),t[38]||(t[38]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-chart-pie"})],-1))])])]),e("div",ct,[e("div",mt,[e("div",ut,[t[40]||(t[40]=e("div",{class:"card-header"},[e("h6",{class:"mb-0"},[e("i",{class:"fas fa-chart-area me-2"}),v(" Monthly Financial Trend ")])],-1)),e("div",vt,[e("div",ft,[e("div",ht,[(u(!0),m(p,null,_(s.trendData,(o,M)=>(u(),m("div",{key:M,class:"trend-month"},[e("div",pt,[e("div",{class:"trend-bar revenue-bar",style:E(`height: ${s.maxAmount>0?o.revenue/s.maxAmount*100:0}%`),title:`Revenue: ৳${s.formatNumber(o.revenue)}`},null,12,bt),e("div",{class:"trend-bar expense-bar",style:E(`height: ${s.maxAmount>0?o.expenses/s.maxAmount*100:0}%`),title:`Expenses: ৳${s.formatNumber(o.expenses)}`},null,12,gt)]),e("div",Ct,i(o.name),1)]))),128))]),t[39]||(t[39]=N('<div class="chart-legend" data-v-f6740a64><div class="legend-item" data-v-f6740a64><div class="legend-color revenue-color" data-v-f6740a64></div><span data-v-f6740a64>Revenue</span></div><div class="legend-item" data-v-f6740a64><div class="legend-color expense-color" data-v-f6740a64></div><span data-v-f6740a64>Expenses</span></div></div>',1))])])])]),e("div",yt,[e("div",xt,[t[49]||(t[49]=e("div",{class:"card-header"},[e("h6",{class:"mb-0"},[e("i",{class:"fas fa-tachometer-alt me-2"}),v(" Quick Stats ")])],-1)),e("div",_t,[e("div",Dt,[e("div",wt,[t[42]||(t[42]=e("div",{class:"stat-icon bg-primary"},[e("i",{class:"fas fa-coins"})],-1)),e("div",Rt,[e("div",Bt,"৳"+i(s.formatNumber(s.dashboardData.totalAssets)),1),t[41]||(t[41]=e("div",{class:"stat-label"},"Total Assets",-1))])]),e("div",Et,[t[44]||(t[44]=e("div",{class:"stat-icon bg-warning"},[e("i",{class:"fas fa-credit-card"})],-1)),e("div",Tt,[e("div",St,"৳"+i(s.formatNumber(s.dashboardData.totalLiabilities)),1),t[43]||(t[43]=e("div",{class:"stat-label"},"Total Liabilities",-1))])]),e("div",Mt,[t[46]||(t[46]=e("div",{class:"stat-icon bg-info"},[e("i",{class:"fas fa-chart-pie"})],-1)),e("div",Pt,[e("div",At,"৳"+i(s.formatNumber(s.dashboardData.totalEquity)),1),t[45]||(t[45]=e("div",{class:"stat-label"},"Owner's Equity",-1))])]),e("div",Ft,[t[48]||(t[48]=e("div",{class:"stat-icon bg-success"},[e("i",{class:"fas fa-percentage"})],-1)),e("div",kt,[e("div",Nt,i(s.calculateROI().toFixed(1))+"%",1),t[47]||(t[47]=e("div",{class:"stat-label"},"Return on Investment",-1))])])])])])])]),e("div",Lt,[e("div",It,[e("div",Vt,[t[50]||(t[50]=e("div",{class:"card-header"},[e("h6",{class:"mb-0"},[e("i",{class:"fas fa-chart-donut me-2"}),v(" Expense Categories (This Month) ")])],-1)),e("div",Ot,[e("div",Gt,[(u(!0),m(p,null,_(s.expenseCategories,o=>(u(),m("div",{key:o.name,class:"category-item"},[e("div",qt,[e("div",Ut,[e("i",{class:f([o.icon,"me-2"])},null,2),v(" "+i(o.name),1)]),e("div",jt,"৳"+i(s.formatNumber(o.amount)),1)]),e("div",Kt,[e("div",Yt,[e("div",{class:f(["progress-bar",o.color]),style:E(`width: ${s.dashboardData.totalExpenses>0?o.amount/s.dashboardData.totalExpenses*100:0}%`)},null,6)]),e("small",Ht,i(s.dashboardData.totalExpenses>0?(o.amount/s.dashboardData.totalExpenses*100).toFixed(1):"0.0")+"%",1)])]))),128))])])])]),e("div",Qt,[e("div",zt,[e("div",Xt,[t[51]||(t[51]=e("h6",{class:"mb-0"},[e("i",{class:"fas fa-history me-2"}),v(" Recent Transactions ")],-1)),e("button",{class:"btn btn-sm btn-outline-primary",onClick:t[6]||(t[6]=o=>h.$inertia.visit("/admin-home/finance/expenses"))}," View All ")]),e("div",Wt,[e("div",Jt,[(u(!0),m(p,null,_(s.recentTransactions,o=>(u(),m("div",{key:o.id,class:"transaction-item"},[e("div",{class:f(["transaction-icon",o.type==="income"?"income":"expense"])},[e("i",{class:f(o.icon)},null,2)],2),e("div",Zt,[e("div",$t,i(o.description),1),e("small",ea,i(s.formatDate(o.date)),1)]),e("div",{class:f(["transaction-amount",o.type==="income"?"text-success":"text-danger"])},i(o.type==="income"?"+":"-")+"৳"+i(s.formatNumber(o.amount)),3)]))),128))])])])])]),e("div",ta,[e("div",aa,[e("div",sa,[e("div",oa,[e("h6",na,[t[52]||(t[52]=e("i",{class:"fas fa-wallet me-2"},null,-1)),v(" Budget Status ("+i(s.getCurrentMonthName())+") ",1)])]),e("div",ra,[e("div",ia,[(u(!0),m(p,null,_(s.budgetStatus,o=>(u(),m("div",{key:o.name,class:"budget-item"},[e("div",la,[e("div",da,[e("i",{class:f([o.icon,"me-2"])},null,2),v(" "+i(o.name),1)]),e("div",ca,[e("span",ma,"৳"+i(s.formatNumber(o.used)),1),t[53]||(t[53]=e("span",{class:"divider"},"/",-1)),e("span",ua,"৳"+i(s.formatNumber(o.total)),1)])]),e("div",va,[e("div",fa,[e("div",{class:f(["progress-bar",s.getBudgetProgressClass(o)]),style:E(`width: ${o.total>0?Math.min(o.used/o.total*100,100):0}%`)},null,6)]),e("div",ha,[e("small",pa,i(o.total>0?Math.round(o.used/o.total*100):0)+"% used",1),e("small",{class:f(["remaining",o.remaining<0?"text-danger":"text-success"])}," ৳"+i(s.formatNumber(Math.abs(o.remaining)))+" "+i(o.remaining<0?"over":"remaining"),3)])])]))),128))])])])]),e("div",ba,[e("div",ga,[t[55]||(t[55]=e("div",{class:"card-header"},[e("h6",{class:"mb-0"},[e("i",{class:"fas fa-exclamation-triangle me-2"}),v(" Financial Alerts ")])],-1)),e("div",Ca,[e("div",ya,[(u(!0),m(p,null,_(s.financialAlerts,o=>(u(),m("div",{key:o.id,class:f(["alert-item",o.type])},[e("div",xa,[e("i",{class:f(o.icon)},null,2)]),e("div",_a,[e("div",Da,i(o.title),1),e("div",wa,i(o.message),1),e("small",Ra,i(s.formatDate(o.date)),1)])],2))),128)),s.financialAlerts.length===0?(u(),m("div",Ba,[...t[54]||(t[54]=[e("i",{class:"fas fa-check-circle text-success mb-2"},null,-1),e("p",{class:"text-muted mb-0"},"All good! No financial alerts at this time.",-1)])])):F("",!0)])])])])]),s.showCustomReportModal?(u(),m("div",{key:0,class:"modal-overlay",onClick:t[17]||(t[17]=(...o)=>s.closeCustomReportModal&&s.closeCustomReportModal(...o))},[e("div",{class:"modal-content",onClick:t[16]||(t[16]=Q(()=>{},["stop"]))},[e("div",Ea,[t[56]||(t[56]=e("h5",null,"Generate Custom Export",-1)),e("button",{onClick:t[7]||(t[7]=(...o)=>s.closeCustomReportModal&&s.closeCustomReportModal(...o)),class:"btn-close"},"×")]),e("div",Ta,[e("form",{onSubmit:t[15]||(t[15]=Q((...o)=>s.generateCustomReport&&s.generateCustomReport(...o),["prevent"]))},[e("div",Sa,[e("div",Ma,[t[58]||(t[58]=e("label",{class:"form-label"},"Export Type *",-1)),y(e("select",{"onUpdate:modelValue":t[8]||(t[8]=o=>s.customReport.type=o),class:"form-select",required:""},[...t[57]||(t[57]=[N('<option value="expense" data-v-f6740a64>Expense Report</option><option value="revenue" data-v-f6740a64>Revenue Report</option><option value="balance" data-v-f6740a64>Balance Sheet</option><option value="profit_loss" data-v-f6740a64>Profit &amp; Loss</option><option value="budget" data-v-f6740a64>Budget Analysis</option><option value="cash_flow" data-v-f6740a64>Cash Flow Statement</option>',6)])],512),[[k,s.customReport.type]])]),e("div",Pa,[t[60]||(t[60]=e("label",{class:"form-label"},"Export Period *",-1)),y(e("select",{"onUpdate:modelValue":t[9]||(t[9]=o=>s.customReport.period=o),class:"form-select",required:""},[...t[59]||(t[59]=[N('<option value="current_month" data-v-f6740a64>Current Month</option><option value="last_month" data-v-f6740a64>Last Month</option><option value="quarter" data-v-f6740a64>Current Quarter</option><option value="year" data-v-f6740a64>Current Year</option><option value="custom" data-v-f6740a64>Custom Date Range</option>',5)])],512),[[k,s.customReport.period]])])]),s.customReport.period==="custom"?(u(),m("div",Aa,[e("div",Fa,[t[61]||(t[61]=e("label",{class:"form-label"},"Start Date",-1)),y(e("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>s.customReport.startDate=o),type:"date",class:"form-control",required:""},null,512),[[z,s.customReport.startDate]])]),e("div",ka,[t[62]||(t[62]=e("label",{class:"form-label"},"End Date",-1)),y(e("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>s.customReport.endDate=o),type:"date",class:"form-control",required:""},null,512),[[z,s.customReport.endDate]])])])):F("",!0),t[67]||(t[67]=e("div",{class:"mb-3"},[e("label",{class:"form-label"},"Export Format"),e("div",{class:"alert alert-info"},[e("i",{class:"fas fa-info-circle me-2"}),v(" All exports are generated in CSV format for better data compatibility. ")])],-1)),e("div",Na,[t[65]||(t[65]=e("label",{class:"form-label"},"Include",-1)),e("div",La,[e("div",Ia,[y(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[12]||(t[12]=o=>s.customReport.includeCharts=o),id:"charts"},null,512),[[X,s.customReport.includeCharts]]),t[63]||(t[63]=e("label",{class:"form-check-label",for:"charts"},"Charts & Graphs",-1))]),e("div",Va,[y(e("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":t[13]||(t[13]=o=>s.customReport.includeComments=o),id:"comments"},null,512),[[X,s.customReport.includeComments]]),t[64]||(t[64]=e("label",{class:"form-check-label",for:"comments"},"Analysis & Comments",-1))])])]),e("div",Oa,[e("button",{type:"button",onClick:t[14]||(t[14]=(...o)=>s.closeCustomReportModal&&s.closeCustomReportModal(...o)),class:"btn btn-secondary"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary",disabled:s.generatingReport},[t[66]||(t[66]=e("i",{class:"fas fa-download"},null,-1)),v(" "+i(s.generatingReport?"Generating...":"Export Data"),1)],8,Ga)])],32)])])])):F("",!0)])])])],64)}const Ha=fe(he,[["render",qa],["__scopeId","data-v-f6740a64"]]);export{Ha as default};

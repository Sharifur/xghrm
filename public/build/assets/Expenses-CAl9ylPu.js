import{A as N}from"./AdminMaster-Bqad8AbG.js";import{H as V,r as q,c as u,o as v,a as F,b as e,h as x,d as T,f as p,F as B,p as P,t as i,n as L,w as M,e as d,i as f,A as S,l as y,B as O,x as A}from"./app-BvSwc0_b.js";import{S as b}from"./sweetalert2.esm.all-acGi8jXx.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";const R={layout:N,name:"Expenses",components:{Head:V},props:{expenses:Array},setup(h){const t=y(!1),r=y(null),o=y(!1),c=y([...h.expenses]),s=O({name:"",description:"",amount:0,currency:"BDT",expense_date:new Date().toISOString().split("T")[0],category:"",icon:"fas fa-receipt",notes:""}),E=n=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(n||0),a=n=>new Date(n).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),w=()=>{s.name="",s.description="",s.amount=0,s.currency="BDT",s.expense_date=new Date().toISOString().split("T")[0],s.category="",s.icon="fas fa-receipt",s.notes=""},U=n=>{r.value=n,s.name=n.name,s.description=n.description,s.amount=n.amount,s.currency=n.currency||"BDT",s.expense_date=n.expense_date,s.category=n.category,s.icon=n.icon,s.notes=n.notes},k=()=>{t.value=!1,r.value=null,w()};return{expenses:c,showAddModal:t,editingExpense:r,saving:o,form:s,formatNumber:E,formatDate:a,editExpense:U,closeModal:k,saveExpense:async()=>{var n,D;o.value=!0;try{const m=r.value?route("admin.finance.expenses.update",r.value.id):route("admin.finance.expenses.store"),g=r.value?"put":"post",l=await A[g](m,s);if(l.data.success){if(r.value){const C=c.value.findIndex(_=>_.id===r.value.id);c.value[C]=l.data.expense}else c.value.unshift(l.data.expense);k(),b.fire({title:"Success!",text:l.data.message,icon:"success",confirmButtonColor:"#f6c23e",timer:3e3,timerProgressBar:!0})}}catch(m){console.error("Save failed:",m),b.fire({title:"Error!",text:((D=(n=m.response)==null?void 0:n.data)==null?void 0:D.message)||"Failed to save expense",icon:"error",confirmButtonColor:"#e74a3b"})}finally{o.value=!1}},deleteExpense:async n=>{var m,g;if((await b.fire({title:"Are you sure?",text:"You want to delete this expense? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#e74a3b",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{const l=await A.delete(route("admin.finance.expenses.delete",n));l.data.success&&(c.value=c.value.filter(C=>C.id!==n),b.fire({title:"Deleted!",text:l.data.message,icon:"success",confirmButtonColor:"#f6c23e",timer:3e3,timerProgressBar:!0}))}catch(l){console.error("Delete failed:",l),b.fire({title:"Error!",text:((g=(m=l.response)==null?void 0:m.data)==null?void 0:g.message)||"Failed to delete expense",icon:"error",confirmButtonColor:"#e74a3b"})}}}}},H={class:"row"},j={class:"col-lg-12"},z={class:"dashboard-settings margin-top-40"},G={class:"card mb-4"},W={class:"card-header d-flex justify-content-between align-items-center"},Y={class:"card"},K={class:"card-body"},J={class:"table-responsive"},Q={class:"table table-striped"},X={class:"badge bg-light text-dark"},Z={class:"badge bg-secondary"},$={class:"badge bg-warning text-dark"},ee={key:0,class:"d-block mt-1 text-muted"},te={class:"btn-group",role:"group"},oe=["onClick"],ae=["onClick"],se={key:0},ne={class:"modal-header"},le={class:"modal-body"},ie={class:"row"},re={class:"col-md-6 mb-3"},de={class:"col-md-6 mb-3"},ce={class:"row"},me={class:"col-md-6 mb-3"},ue={class:"input-group"},ve={key:0,class:"form-text text-info"},pe={class:"col-md-6 mb-3"},fe={class:"row"},be={class:"col-md-6 mb-3"},ge={class:"mb-3"},xe={class:"mb-3"},ye={class:"d-flex justify-content-end gap-2"},Ee=["disabled"];function we(h,t,r,o,c,s){const E=q("Head");return v(),u(B,null,[F(E,{title:"One-time Expenses"}),e("div",H,[e("div",j,[e("div",z,[e("div",G,[e("div",W,[t[15]||(t[15]=e("h4",{class:"mb-0"},[e("i",{class:"fas fa-receipt me-2"}),p(" One-time Expenses ")],-1)),e("button",{onClick:t[0]||(t[0]=a=>o.showAddModal=!0),class:"btn btn-warning"},t[14]||(t[14]=[e("i",{class:"fas fa-plus"},null,-1),p(" Add Expense ")]))]),t[16]||(t[16]=T('<div class="card-body" data-v-7b2dc12c><div class="entrepreneur-guide mb-4" data-v-7b2dc12c><h6 class="text-primary mb-3" data-v-7b2dc12c><i class="fas fa-lightbulb me-2" data-v-7b2dc12c></i> Solo Entrepreneur Expense Management Guide </h6><div class="row" data-v-7b2dc12c><div class="col-md-6" data-v-7b2dc12c><div class="guide-section" data-v-7b2dc12c><h6 class="text-success" data-v-7b2dc12c>What are One-time Expenses?</h6><ul class="small text-muted" data-v-7b2dc12c><li data-v-7b2dc12c><strong data-v-7b2dc12c>Equipment:</strong> Laptop, monitor, desk, chair</li><li data-v-7b2dc12c><strong data-v-7b2dc12c>Software:</strong> Adobe CC, design tools, development licenses</li><li data-v-7b2dc12c><strong data-v-7b2dc12c>Training:</strong> Courses, certifications, conferences</li><li data-v-7b2dc12c><strong data-v-7b2dc12c>Marketing:</strong> Ad campaigns, branding materials</li><li data-v-7b2dc12c><strong data-v-7b2dc12c>Legal/Professional:</strong> Lawyer fees, accountant consultations</li><li data-v-7b2dc12c><strong data-v-7b2dc12c>Emergency:</strong> Urgent repairs, unexpected costs</li></ul></div></div><div class="col-md-6" data-v-7b2dc12c><div class="guide-section" data-v-7b2dc12c><h6 class="text-warning" data-v-7b2dc12c>Why Track One-time Expenses?</h6><ul class="small text-muted" data-v-7b2dc12c><li data-v-7b2dc12c>ðŸ“Š <strong data-v-7b2dc12c>Tax Deductions:</strong> Most business expenses are tax-deductible</li><li data-v-7b2dc12c>ðŸ’¡ <strong data-v-7b2dc12c>Cash Flow:</strong> Know exactly where your money goes</li><li data-v-7b2dc12c>ðŸ“ˆ <strong data-v-7b2dc12c>Business Growth:</strong> Track investments in your business</li><li data-v-7b2dc12c>ðŸŽ¯ <strong data-v-7b2dc12c>Budget Planning:</strong> Plan for similar expenses next year</li><li data-v-7b2dc12c>ðŸ’° <strong data-v-7b2dc12c>Profit Analysis:</strong> Understand true business profitability</li></ul></div></div></div><div class="alert alert-info mt-3" data-v-7b2dc12c><i class="fas fa-info-circle me-2" data-v-7b2dc12c></i><strong data-v-7b2dc12c>Pro Tip:</strong> Set aside 20-30% of your revenue for business expenses. Track everything - even small purchases add up! </div></div><p class="text-muted" data-v-7b2dc12c> Record all your one-time business expenses here. Use different currencies (USD for software, BDT for local expenses) and categorize properly for better financial insights. </p></div>',1))]),e("div",Y,[t[21]||(t[21]=e("div",{class:"card-header"},[e("h5",{class:"mb-0"},"Expense Records")],-1)),e("div",K,[e("div",J,[e("table",Q,[t[20]||(t[20]=e("thead",null,[e("tr",null,[e("th",null,"Date"),e("th",null,"Name"),e("th",null,"Category"),e("th",null,"Amount & Currency"),e("th",null,"Description"),e("th",null,"Icon"),e("th",null,"Actions")])],-1)),e("tbody",null,[(v(!0),u(B,null,P(o.expenses,a=>(v(),u("tr",{key:a.id},[e("td",null,[e("span",X,i(o.formatDate(a.expense_date)),1)]),e("td",null,[e("strong",null,i(a.name),1)]),e("td",null,[e("span",Z,i(a.category),1)]),e("td",null,[e("span",$,[p(i(a.currency==="USD"?"$":"à§³")+i(o.formatNumber(a.amount))+" ",1),a.currency==="USD"?(v(),u("small",ee," (à§³"+i(o.formatNumber(a.amount*120))+" BDT) ",1)):x("",!0)])]),e("td",null,i(a.description||"-"),1),e("td",null,[e("i",{class:L([a.icon||"fas fa-receipt","text-primary"])},null,2)]),e("td",null,[e("div",te,[e("button",{onClick:w=>o.editExpense(a),class:"btn btn-sm btn-outline-primary"},t[17]||(t[17]=[e("i",{class:"fas fa-edit"},null,-1)]),8,oe),e("button",{onClick:w=>o.deleteExpense(a.id),class:"btn btn-sm btn-outline-danger"},t[18]||(t[18]=[e("i",{class:"fas fa-trash"},null,-1)]),8,ae)])])]))),128)),o.expenses.length===0?(v(),u("tr",se,t[19]||(t[19]=[e("td",{colspan:"7",class:"text-center text-muted"},' No expenses found. Click "Add Expense" to record your first expense. ',-1)]))):x("",!0)])])])])]),o.showAddModal||o.editingExpense?(v(),u("div",{key:0,class:"modal-overlay",onClick:t[13]||(t[13]=(...a)=>o.closeModal&&o.closeModal(...a))},[e("div",{class:"modal-content",onClick:t[12]||(t[12]=M(()=>{},["stop"]))},[e("div",ne,[e("h5",null,i(o.editingExpense?"Edit":"Add")+" Expense",1),e("button",{onClick:t[1]||(t[1]=(...a)=>o.closeModal&&o.closeModal(...a)),class:"btn-close"},"Ã—")]),e("div",le,[e("form",{onSubmit:t[11]||(t[11]=M((...a)=>o.saveExpense&&o.saveExpense(...a),["prevent"]))},[e("div",ie,[e("div",re,[t[22]||(t[22]=e("label",{class:"form-label"},"Expense Name *",-1)),d(e("input",{"onUpdate:modelValue":t[2]||(t[2]=a=>o.form.name=a),type:"text",class:"form-control",required:"",placeholder:"e.g., Office Equipment, Training Course"},null,512),[[f,o.form.name]])]),e("div",de,[t[23]||(t[23]=e("label",{class:"form-label"},"Expense Date *",-1)),d(e("input",{"onUpdate:modelValue":t[3]||(t[3]=a=>o.form.expense_date=a),type:"date",class:"form-control",required:""},null,512),[[f,o.form.expense_date]]),t[24]||(t[24]=e("small",{class:"form-text text-muted"},"Date when the expense occurred",-1))])]),e("div",ce,[e("div",me,[t[27]||(t[27]=e("label",{class:"form-label"},"Amount *",-1)),e("div",ue,[d(e("select",{"onUpdate:modelValue":t[4]||(t[4]=a=>o.form.currency=a),class:"input-group-text",style:{"border-right":"0",background:"#e9ecef"}},t[25]||(t[25]=[e("option",{value:"BDT"},"à§³",-1),e("option",{value:"USD"},"$",-1)]),512),[[S,o.form.currency]]),d(e("input",{"onUpdate:modelValue":t[5]||(t[5]=a=>o.form.amount=a),type:"number",class:"form-control",step:"0.01",min:"0",required:"",placeholder:"0.00"},null,512),[[f,o.form.amount,void 0,{number:!0}]])]),o.form.currency==="USD"?(v(),u("div",ve,[e("small",null,[t[26]||(t[26]=e("i",{class:"fas fa-exchange-alt me-1"},null,-1)),p(" Converted: à§³"+i(o.formatNumber(o.form.amount*120))+" BDT (1 USD = 120 BDT) ",1)])])):x("",!0)]),e("div",pe,[t[29]||(t[29]=e("label",{class:"form-label"},"Category *",-1)),d(e("select",{"onUpdate:modelValue":t[6]||(t[6]=a=>o.form.category=a),class:"form-select",required:""},t[28]||(t[28]=[T('<option value="" data-v-7b2dc12c>Select Category</option><option value="Equipment" data-v-7b2dc12c>Equipment</option><option value="Repairs" data-v-7b2dc12c>Repairs &amp; Maintenance</option><option value="Training" data-v-7b2dc12c>Training &amp; Development</option><option value="Travel" data-v-7b2dc12c>Travel &amp; Transportation</option><option value="Marketing" data-v-7b2dc12c>Marketing &amp; Advertising</option><option value="Legal" data-v-7b2dc12c>Legal &amp; Professional</option><option value="Supplies" data-v-7b2dc12c>Office Supplies</option><option value="Technology" data-v-7b2dc12c>Technology &amp; Software</option><option value="Miscellaneous" data-v-7b2dc12c>Miscellaneous</option><option value="Emergency" data-v-7b2dc12c>Emergency Expenses</option>',11)]),512),[[S,o.form.category]])])]),e("div",fe,[e("div",be,[t[31]||(t[31]=e("label",{class:"form-label"},"Icon",-1)),d(e("select",{"onUpdate:modelValue":t[7]||(t[7]=a=>o.form.icon=a),class:"form-select"},t[30]||(t[30]=[T('<option value="fas fa-receipt" data-v-7b2dc12c>Receipt (Default)</option><option value="fas fa-laptop" data-v-7b2dc12c>Equipment/Technology</option><option value="fas fa-wrench" data-v-7b2dc12c>Repairs &amp; Tools</option><option value="fas fa-graduation-cap" data-v-7b2dc12c>Training &amp; Education</option><option value="fas fa-plane" data-v-7b2dc12c>Travel</option><option value="fas fa-bullhorn" data-v-7b2dc12c>Marketing</option><option value="fas fa-gavel" data-v-7b2dc12c>Legal</option><option value="fas fa-boxes" data-v-7b2dc12c>Supplies</option><option value="fas fa-exclamation-triangle" data-v-7b2dc12c>Emergency</option><option value="fas fa-shopping-cart" data-v-7b2dc12c>Purchase</option>',10)]),512),[[S,o.form.icon]])])]),e("div",ge,[t[32]||(t[32]=e("label",{class:"form-label"},"Description",-1)),d(e("textarea",{"onUpdate:modelValue":t[8]||(t[8]=a=>o.form.description=a),class:"form-control",rows:"3",placeholder:"Brief description of the expense"},null,512),[[f,o.form.description]])]),e("div",xe,[t[33]||(t[33]=e("label",{class:"form-label"},"Additional Notes",-1)),d(e("textarea",{"onUpdate:modelValue":t[9]||(t[9]=a=>o.form.notes=a),class:"form-control",rows:"2",placeholder:"Any additional notes or details"},null,512),[[f,o.form.notes]])]),e("div",ye,[e("button",{type:"button",onClick:t[10]||(t[10]=(...a)=>o.closeModal&&o.closeModal(...a)),class:"btn btn-secondary"}," Cancel "),e("button",{type:"submit",class:"btn btn-warning",disabled:o.saving},[t[34]||(t[34]=e("i",{class:"fas fa-save"},null,-1)),p(" "+i(o.saving?"Saving...":"Save Expense"),1)],8,Ee)])],32)])])])):x("",!0)])])])],64)}const Be=I(R,[["render",we],["__scopeId","data-v-7b2dc12c"]]);export{Be as default};

import{A as V}from"./AdminMaster-C9ex_D1k.js";import{P as y}from"./Pagination-C_QrDR0q.js";import{L as x,r as i,c,o as b,b as e,a as s,F as v,p as F,t as o,g as m,w as L,m as d}from"./app-KzMLV04Q.js";import{a as U,B as A}from"./BsModalButton-B9w04M9h.js";import{V as I}from"./ValidationErrors-CObLw6Pd.js";import{F as P}from"./FlashMsg-pscXAAxt.js";import{I as T}from"./Input-XxvpslOF.js";import{S as z}from"./Select-WnU9SLq-.js";import{B as N}from"./Button-uPRoiIB5.js";import{s as Y}from"./vue3-datepicker.esm-BdHPZ0-f.js";import{M as O}from"./MediaUploader-DS_DFsW_.js";import{S as D}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{_ as j}from"./_plugin-vue_export-helper-DlAUqK2U.js";const X=[{label:"Personal",value:0},{label:"Codecanyon",value:1},{label:"Themeforest",value:2},{label:"Clients",value:3}],q=[{label:"Xgenious",value:"xgenious"},{label:"bytesed",value:"bytesed"}],G={name:"Statements",layout:V,components:{Pagination:y,Link:x,BsModalButton:A,BsModal:U,BreezeValidationErrors:I,FlashMsg:P,BsSelect:z,BsButton:N,BsInput:T,Datepicker:Y,MediaUploader:O},data(){return{statementsData:d({title:"",from:0,month:new Date,personal_earning:"",office_earning:"",statement:"",en_username:"xgenious",percentage:null}),viewEarningData:{office_earning:0,personal_earning:0,total_earning:0},options:X,enUser:q,caldata:d({id:null})}},methods:{earningLists(){return this.$page.props.statements.data},earningListsLinks(){return this.$page.props.statements.links},getEarningMonth(n){const t=new Date(n).toLocaleDateString("en-US",{month:"long"}),u=new Date(n).getFullYear();return t+" "+u},viewEarning(n){axios.get(route("admin.earning.calculate",n.id)).then(t=>{Object.keys(t.data).length>1?(this.viewEarningData.office_earning=t.data.office_earning.toFixed(2),this.viewEarningData.personal_earning=t.data.personal_earning.toFixed(2),this.viewEarningData.total_earning=t.data.total_earning.toFixed(2)):D.fire("Error!","no data found","warning")}).catch(t=>{D.fire("Error!",t.message,"warning")})},deleteItem(n){this.$swal.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!"}).then(t=>{const u=d({id:n.id});t.isConfirmed&&u.post(route("admin.earning.delete"),{onFinish:()=>{this.$swal.fire("Deleted!","Statement deleted.","success")}})})},editStatement(n){this.statementsData=d({title:n.title,from:n.from,month:new Date(n.month),personal_earning:n.personal_earning,office_earning:n.office_earning,statement:n.statement,en_username:n.en_username,percentage:n.percentage,id:n.id}),this.$page.props.flashMsg.type=void 0,this.$page.props.flashMsg.msg=void 0,this.$page.props.errors={}},viewStatement(n){this.statementsData=d({title:n.title,from:n.from,month:new Date(n.month),personal_earning:n.personal_earning,office_earning:n.office_earning,statement:n.statement,en_username:n.en_username,percentage:n.percentage,id:n.id}),this.$page.props.flashMsg.type=void 0,this.$page.props.flashMsg.msg=void 0,this.$page.props.errors={}},isPersonalOrClients(){return[0,3].includes(parseInt(this.statementsData.from))},updateStatement(){this.statementsData.post(route("admin.earning.update"))},getFormName(n){let t="Clients";return n===0?t="Personal":n===1?t="Codecanyon":n===2&&(t="Themeforest"),t}}},H={class:"row"},J={class:"col-lg-12"},K={class:"dashboard-settings margin-top-40"},Q={class:"table-responsive"},R={class:"table table-stripped"},W={class:"table-responsive"},Z={class:"table table-striped"},$={class:"table-responsive"},tt={class:"table table-striped"},et={class:"form-group"},nt={class:"single-info-input margin-top-30"};function at(n,t,u,lt,a,r){const w=i("Link"),p=i("BsModalButton"),B=i("Pagination"),g=i("BsModal"),h=i("BreezeValidationErrors"),S=i("FlashMsg"),M=i("BsInput"),_=i("BsSelect"),E=i("datepicker"),k=i("MediaUploader"),C=i("BsButton");return b(),c(v,null,[e("div",H,[e("div",J,[e("div",K,[t[11]||(t[11]=e("div",{class:"header-wrap d-flex justify-content-between"},[e("h2",{class:"dashboards-title margin-bottom-40"},"All Monthly Statements")],-1)),e("div",Q,[e("table",R,[t[10]||(t[10]=e("thead",null,[e("th",null,"Id"),e("th",null,"Title"),e("th",null,"Account"),e("th",null,"Month"),e("th",null,"Action")],-1)),e("tbody",null,[(b(!0),c(v,null,F(r.earningLists(),l=>(b(),c("tr",null,[e("td",null,o(l.id),1),e("td",null,o(l.title),1),e("td",null,o(l.en_username),1),e("td",null,o(r.getEarningMonth(l.month)),1),e("td",null,[s(w,{as:"button",class:"btn btn-danger m-1",onClick:f=>r.deleteItem(l)},{default:m(()=>[...t[6]||(t[6]=[e("i",{class:"fas fa-trash"},null,-1)])]),_:2},1032,["onClick"]),s(p,{target:"viewEarning","button-class":"btn btn-secondary m-1",onClick:f=>r.viewEarning(l)},{default:m(()=>[...t[7]||(t[7]=[e("i",{class:"fas fa-calculator"},null,-1)])]),_:2},1032,["onClick"]),s(p,{target:"editStatement","button-class":"btn btn-info m-1",onClick:f=>r.editStatement(l)},{default:m(()=>[...t[8]||(t[8]=[e("i",{class:"fas fa-pencil-alt"},null,-1)])]),_:2},1032,["onClick"]),s(p,{target:"viewStatement","button-class":"btn btn-primary m-1",onClick:f=>r.viewStatement(l)},{default:m(()=>[...t[9]||(t[9]=[e("i",{class:"fas fa-eye"},null,-1)])]),_:2},1032,["onClick"])])]))),256))])])]),s(B,{links:r.earningListsLinks()},null,8,["links"])])])]),s(g,{"modal-title":"Statement Details","modal-id":"viewStatement","modal-size":"modal-md"},{default:m(()=>[e("div",W,[e("table",Z,[e("tbody",null,[e("tr",null,[t[12]||(t[12]=e("td",null,"Title",-1)),e("td",null,o(a.statementsData.title),1)]),e("tr",null,[t[13]||(t[13]=e("td",null,"Account",-1)),e("td",null,o(a.statementsData.en_username),1)]),e("tr",null,[t[14]||(t[14]=e("td",null,"Month",-1)),e("td",null,o(r.getEarningMonth(a.statementsData.month)),1)]),e("tr",null,[t[15]||(t[15]=e("td",null,"Percentage",-1)),e("td",null,o(a.statementsData.percentage)+"%",1)]),e("tr",null,[t[16]||(t[16]=e("td",null,"From",-1)),e("td",null,o(r.getFormName(a.statementsData.from)),1)])])])])]),_:1}),s(g,{"modal-title":"Earning Details","modal-id":"viewEarning","modal-size":"modal-md"},{default:m(()=>[e("div",$,[e("table",tt,[e("tbody",null,[e("tr",null,[t[17]||(t[17]=e("td",null,"Office Earning (Approx)",-1)),e("td",null,o(a.viewEarningData.office_earning),1)]),e("tr",null,[t[18]||(t[18]=e("td",null,"Personal Earning (Approx)",-1)),e("td",null,o(a.viewEarningData.personal_earning),1)]),e("tr",null,[t[19]||(t[19]=e("td",null,"Total Earning (Approx)",-1)),e("td",null,o(a.viewEarningData.total_earning),1)])])])])]),_:1}),s(g,{"modal-title":"Update Statement","modal-id":"editStatement","modal-size":"modal-md"},{default:m(()=>[s(h,{class:"mb-4"}),s(S,{class:"mb-4"}),e("form",{onSubmit:t[5]||(t[5]=L(()=>{},["prevent"]))},[s(M,{title:"Title",modelValue:a.statementsData.title,"onUpdate:modelValue":t[0]||(t[0]=l=>a.statementsData.title=l)},null,8,["modelValue"]),s(_,{title:"From",options:a.options,modelValue:a.statementsData.from,"onUpdate:modelValue":t[1]||(t[1]=l=>a.statementsData.from=l)},null,8,["options","modelValue"]),s(_,{title:"Envato Username",options:a.enUser,modelValue:a.statementsData.en_username,"onUpdate:modelValue":t[2]||(t[2]=l=>a.statementsData.en_username=l)},null,8,["options","modelValue"]),e("div",et,[t[20]||(t[20]=e("label",null,"Month",-1)),s(E,{modelValue:a.statementsData.month,"onUpdate:modelValue":t[3]||(t[3]=l=>a.statementsData.month=l)},null,8,["modelValue"])]),e("div",nt,[s(k,{"button-text":"Upload File",modelValue:a.statementsData.statement,"onUpdate:modelValue":t[4]||(t[4]=l=>a.statementsData.statement=l)},null,8,["modelValue"]),t[21]||(t[21]=e("small",null,"select only csv file",-1))]),s(C,{"button-text":"Save Changes","button-type":"submit",onClick:r.updateStatement},null,8,["onClick"])],32)]),_:1})],64)}const vt=j(G,[["render",at]]);export{vt as default};

import{A}from"./AdminMaster-PRCD0Qwx.js";import{H as P,L as W,u as y,l as u,m as U,c as d,a as m,b as s,g as O,w as T,F as S,p as C,e as n,t as o,r as f,o as c,h as b}from"./app-epR7_ZJT.js";import{B as H}from"./Button-gCH1OFSl.js";import{B as J}from"./Input-K_weuUQS.js";import{B as R}from"./Select-Z6Gvsj9q.js";import{B as G}from"./Textarea-9h8N1eA1.js";import{s as j}from"./vue3-datepicker.esm-2T0pJYf6.js";import"./sweetalert2.all-Ocq-q7Tl.js";import{h as X}from"./html2pdf--ndNnfsF.js";import{_ as Y}from"./_plugin-vue_export-helper-x3n3nnut.js";const q={layout:A,components:{Button:H,Input:J,Select:R,Textarea:G,Head:P,Datepicker:j,Link:W},setup(){const x=y().props.value.all_employee,a=y().props.value.salarySlipData,v=u({name:a.employee.name,salary:a.salary,category:a.designation}),e=u(y().props.value.attenadnceCount),k=u(y().props.value.holidayCount),V=u(y().props.value.leaveCount),F=u(y().props.value.sickLeaveCount),E=u(y().props.value.paidLeaveCount),g=u(0),D=u(0),h=u(0),l=U({salarySlipID:a.id,employee_id:a.employee.id,month:new Date(a.month),extraEarningFields:JSON.parse(a.extraEarningFields),extraDeductionFields:JSON.parse(a.extraDeductionFields)});function t(){l.extraEarningFields.push({description:null,amount:0})}function i(){l.extraDeductionFields.push({description:null,amount:0})}function w(r){l.extraEarningFields.length>1&&l.extraEarningFields.splice(l.extraEarningFields.indexOf(r),1)}function L(r){l.extraDeductionFields.length>1&&l.extraDeductionFields.splice(l.extraDeductionFields.indexOf(r),1)}function M(){let r=v.value.name+"-"+B(l.month)+"-salary-slip.pdf";X(document.getElementById("element-to-convert"),{margin:1,filename:r}),axios.post(route("admin.employee.salary.slip.update"),l)}function I(){axios.post(route("admin.employee.details",l.employee_id),{month:l.month}).then(r=>{let p=r.data,_=r.data.details;v.value={name:_.name,salary:_.salary,category:_.designation},e.value=p.attenadnceCount,k.value=p.holidayCount,V.value=p.leaveCount,F.value=p.sickLeaveCount,E.value=p.paidLeaveCount,N()})}function B(r){let p=["January","February","March","April","May","June","July","August","September","October","November","December"];return r!=null?p[new Date(r).getMonth()]:""}function N(){let r=0;l.extraEarningFields.map(_=>{_.amount>0&&(r+=parseFloat(_.amount))});let p=0;l.extraDeductionFields.map(_=>{_.amount>0&&(p+=parseFloat(_.amount))}),g.value=r>0?parseFloat(r):0,D.value=p>0?parseFloat(p):0,v.salary!=="undefined"&&(g.value+=parseFloat(v.value.salary)),h.value=parseFloat(g.value)-parseFloat(D.value)}return{employeeList:x,salarySlipData:l,addMoreEarningField:t,addMoreDeductionField:i,removeEarningField:w,removeDeductionField:L,exportToPDF:M,selectedEmployee:v,changeEmployeeSelect:I,holidayCount:k,leaveCount:V,sickLeaveCount:F,paidLeaveCount:E,attenadnceCount:e,getSelectedMonthName:B,grossEarning:g,grossDeduction:D,payableAmount:h,calculateSalary:N}},mounted(){this.calculateSalary()}},z={class:"row"},K={class:"col-lg-12"},Q={class:"header-wrap d-flex justify-content-between"},Z=s("h2",{class:"dashboards-title margin-bottom-40"},"Edit Salary Slip",-1),$={class:"btn-wrp"},ss={class:"row"},es={class:"col-lg-4"},ts={class:"single-info-input margin-top-30"},as=s("label",{class:"info-title"},"Salary Month",-1),os=s("span",{class:"info-text"},"Select Month First",-1),ls={class:"repeaterFieldWarp"},ns=s("h4",{class:"repeater-title"},"Extra Earning Fields",-1),is={class:"repeater-inner-wrap"},rs={class:"actionButtonWrap"},ds=s("i",{class:"fas fa-plus"},null,-1),cs=[ds],ps=["onClick"],_s=s("i",{class:"fas fa-times"},null,-1),us=[_s],ms={class:"repeaterFieldWarp"},hs=s("h4",{class:"repeater-title"},"Extra Deduction Fields",-1),ys={class:"repeater-inner-wrap"},vs={class:"actionButtonWrap"},gs=s("i",{class:"fas fa-plus"},null,-1),fs=[gs],Ds=["onClick"],Ss=s("i",{class:"fas fa-times"},null,-1),xs=[Ss],Fs={class:"col-lg-8"},Es={class:"head-raw margin-top-40 margin-left-60"},Cs=s("h4",null,"Color Explanation",-1),bs={class:"color-explanation"},ks={class:"bg-success"},Vs={class:"badge"},Bs={class:"holiday"},Ns={class:"badge"},ws={class:"leave"},Ls={class:"badge"},Ms={class:"sick-leave"},Is={class:"badge"},As={class:"paid-leave"},Ps={class:"badge"},Ws={id:"element-to-convert"},Us={class:"salarySlipPdfOuterWrapper"},Os={class:"headerPart"},Ts={class:"subjectWarp"},Hs={class:"period"},Js={class:"employeeInfoWrap"},Rs=s("strong",null,"Name: ",-1),Gs=s("strong",null,"Department:",-1),js={class:"tableWithCalculation table-responsive"},Xs={class:"salary-sheet"},Ys={class:"salary-sheet-flex"},qs={class:"salary-sheet-item"},zs={class:"salary-sheet-contents"},Ks={class:"salary-sheet-contents-list"},Qs=s("li",{class:"salary-sheet-list salary-sheet-head"},[s("span",{class:"list-title left"},"EARNINGS"),n(),s("span",{class:"list-title list-para right"}," PER MONTH ")],-1),Zs={class:"salary-sheet-list"},$s=s("span",{class:"list-para left"},"Basic Salary",-1),se={class:"list-para right"},ee={key:0,class:"list-para left"},te={key:1,class:"list-para right"},ae={class:"salary-sheet-item"},oe={class:"salary-sheet-contents"},le={class:"salary-sheet-contents-list"},ne=s("li",{class:"salary-sheet-list salary-sheet-head"},[s("span",{class:"list-title left"},"DEDUCTIONS"),n(),s("span",{class:"list-title list-para right"}," PER MONTH ")],-1),ie={key:0,class:"list-para left"},re={key:1,class:"list-para right"},de={class:"salary-sheet-gross"},ce={class:"salary-sheet-gross-item"},pe={class:"gross-list"},_e=s("span",{class:"gross-para left"},"Gross Earnings(A)",-1),ue={class:"gross-para right"},me={class:"salary-sheet-gross-item"},he={class:"gross-list"},ye=s("span",{class:"gross-para left"},"Gross Deductions(B)",-1),ve={class:"gross-para right"},ge={class:"salary-sheet-gross"},fe={class:"salary-sheet-gross-item"},De={class:"gross-list"},Se=s("span",{class:"gross-para left"},"Net Salary Payable(A-B)",-1),xe={class:"gross-para right"},Fe={class:"salary-sheet-gross"},Ee={class:"salary-sheet-gross-item"},Ce={class:"gross-list"},be=s("span",{class:"gross-para left"},"Net Salary Payable(in words)",-1),ke={class:"gross-para right"},Ve={class:"footerPartWrapper"},Be=s("div",{class:"signature"},[s("span",{class:"signature"},"Signature"),s("h2",null,"Sharifur Rahman"),s("span",{class:"designation"},"Ceo - Xgenious")],-1),Ne={class:"signature"},we=s("span",{class:"signature"},"Signature",-1),Le={class:"btn-wrapper margin-left-60"};function Me(x,a,v,e,k,V){const F=f("Head"),E=f("Link"),g=f("Datepicker"),D=f("Select"),h=f("Input"),l=f("Button");return c(),d(S,null,[m(F,{title:"Edit Salary Slip"}),s("div",z,[s("div",K,[s("div",Q,[Z,s("div",$,[m(E,{class:"btn btn-info m-1",href:x.route("admin.employee.salary.slip")},{default:O(()=>[n("All Salary Slip")]),_:1},8,["href"])])])]),s("div",ss,[s("div",es,[s("form",{onSubmit:a[7]||(a[7]=T(()=>{},["prevent"]))},[s("div",ts,[as,m(g,{modelValue:e.salarySlipData.month,"onUpdate:modelValue":a[0]||(a[0]=t=>e.salarySlipData.month=t)},null,8,["modelValue"]),os]),m(D,{title:"Employee",onChange:a[1]||(a[1]=t=>e.changeEmployeeSelect()),modelValue:e.salarySlipData.employee_id,"onUpdate:modelValue":a[2]||(a[2]=t=>e.salarySlipData.employee_id=t),options:e.employeeList},null,8,["modelValue","options"]),s("div",ls,[ns,s("div",is,[(c(!0),d(S,null,C(e.salarySlipData.extraEarningFields,t=>(c(),d("div",{class:"individualItemWrapper",key:t.index},[m(h,{type:"text",title:"Description",modelValue:t.description,"onUpdate:modelValue":i=>t.description=i},null,8,["modelValue","onUpdate:modelValue"]),m(h,{type:"number",min:"0",onInput:a[3]||(a[3]=i=>e.calculateSalary()),title:"Amount",modelValue:t.amount,"onUpdate:modelValue":i=>t.amount=i},null,8,["modelValue","onUpdate:modelValue"]),s("div",rs,[s("span",{class:"addMore",onClick:a[4]||(a[4]=i=>e.addMoreEarningField())},cs),s("span",{class:"removeItem",onClick:i=>e.removeEarningField(t)},us,8,ps)])]))),128))])]),s("div",ms,[hs,s("div",ys,[(c(!0),d(S,null,C(e.salarySlipData.extraDeductionFields,t=>(c(),d("div",{class:"individualItemWrapper",key:t.index},[m(h,{type:"text",title:"Description",modelValue:t.description,"onUpdate:modelValue":i=>t.description=i},null,8,["modelValue","onUpdate:modelValue"]),m(h,{type:"number",min:"0",onInput:a[5]||(a[5]=i=>e.calculateSalary()),title:"Amount",modelValue:t.amount,"onUpdate:modelValue":i=>t.amount=i},null,8,["modelValue","onUpdate:modelValue"]),s("div",vs,[s("span",{class:"addMore",onClick:a[6]||(a[6]=i=>e.addMoreDeductionField())},fs),s("span",{class:"removeItem",onClick:i=>e.removeDeductionField(t)},xs,8,Ds)])]))),128))])])],32)]),s("div",Fs,[s("div",Es,[Cs,s("ul",bs,[s("li",ks,[n("Attendance "),s("span",Vs,o(e.attenadnceCount),1)]),s("li",Bs,[n("Holiday "),s("span",Ns,o(e.holidayCount),1)]),s("li",ws,[n("leave "),s("span",Ls,o(e.leaveCount),1)]),s("li",Ms,[n("Sick Leave "),s("span",Is,o(e.sickLeaveCount),1)]),s("li",As,[n("Paid Leave "),s("span",Ps,o(e.paidLeaveCount),1)])])]),s("div",Ws,[s("div",Us,[s("div",Os,[s("div",Ts,[s("p",null,[n("Payslip for the month of "),s("span",Hs,o(e.getSelectedMonthName(e.salarySlipData.month)),1),n(" "+o(new Date().getFullYear()),1)])])]),s("div",Js,[s("h3",null,[Rs,n(" "+o(e.selectedEmployee.name),1)]),s("h4",null,[Gs,n(" "+o(e.selectedEmployee.category),1)])]),s("div",js,[s("div",Xs,[s("div",Ys,[s("div",qs,[s("div",zs,[s("ul",Ks,[Qs,s("li",Zs,[$s,n(),s("span",se,o(parseFloat(e.selectedEmployee.salary).toFixed(2)),1)]),(c(!0),d(S,null,C(e.salarySlipData.extraEarningFields,t=>(c(),d("li",{class:"salary-sheet-list",key:t.index},[t.description!==null?(c(),d("span",ee,o(t.description),1)):b("",!0),t.description!==null?(c(),d("span",te,o(t.amount>0?parseFloat(t.amount).toFixed(2):0),1)):b("",!0)]))),128))])])]),s("div",ae,[s("div",oe,[s("ul",le,[ne,(c(!0),d(S,null,C(e.salarySlipData.extraDeductionFields,t=>(c(),d("li",{class:"salary-sheet-list",key:t.index},[t.description!==null?(c(),d("span",ie,o(t.description),1)):b("",!0),t.description!==null?(c(),d("span",re,o(t.amount>0?parseFloat(t.amount).toFixed(2):0),1)):b("",!0)]))),128))])])])]),s("div",de,[s("div",ce,[s("div",pe,[_e,n(),s("span",ue,o(parseFloat(e.grossEarning).toFixed(2)),1)])]),s("div",me,[s("div",he,[ye,n(),s("span",ve,o(parseFloat(e.grossDeduction).toFixed(2)),1)])])]),s("div",ge,[s("div",fe,[s("div",De,[Se,n(),s("span",xe,o(parseFloat(e.payableAmount).toFixed(2)),1)])])]),s("div",Fe,[s("div",Ee,[s("div",Ce,[be,n(),s("span",ke,o(x.numberToWord(e.payableAmount))+" Tk Only",1)])])])])]),s("div",Ve,[Be,s("div",Ne,[we,s("h2",null,o(e.selectedEmployee.name),1)])])])]),s("div",Le,[m(l,{type:"button",onClick:e.exportToPDF,"button-text":"Save and Download PDF"},null,8,["onClick"])])])])])],64)}const Ge=Y(q,[["render",Me]]);export{Ge as default};

import{A as ie}from"./AdminMaster-BGMkPzmn.js";import{H as de,r as ce,c as u,o as m,a as fe,b as e,h as b,d as Y,f as g,t as c,n as k,e as x,i as S,F as V,p as j,j as W,w as K,A as O,l as w,B as ue,C as J,y as T,x as N}from"./app-CkHFsNZZ.js";import{S as h}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{_ as me}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ve={layout:ie,name:"Expenses",components:{Head:de},props:{expenses:Array},setup(L){const t=w(!1),E=w(null),s=w(!1),p=w([...L.expenses]),B=w(""),M=w(!1),n=w(L.expenses.length);let _=null;const y=w([]),D=w(1),Q=w(10),d=ue({name:"",description:"",amount:0,currency:"BDT",expense_date:new Date().toISOString().split("T")[0],category:"",icon:"fas fa-receipt",notes:"",payment_status:"pending",paid_date:null,payment_notes:""}),U=120,I=w("BDT");J(()=>d.currency,a=>{const o=I.value;o&&d.amount>0&&o!==a&&(o==="BDT"&&a==="USD"?d.amount=Number((d.amount/U).toFixed(2)):o==="USD"&&a==="BDT"&&(d.amount=Number((d.amount*U).toFixed(2)))),I.value=a}),J(()=>d.payment_status,(a,o)=>{a==="paid"&&o!=="paid"?d.paid_date||(d.paid_date=new Date().toISOString().split("T")[0]):a!=="paid"&&(d.paid_date=null,d.payment_notes="")});const P=T(()=>Math.ceil(n.value/Q.value)),X=T(()=>{const a=P.value,o=D.value,l=[];if(a<=7)for(let r=1;r<=a;r++)l.push(r);else if(o<=4){for(let r=1;r<=5;r++)l.push(r);l.push("..."),l.push(a)}else if(o>=a-3){l.push(1),l.push("...");for(let r=a-4;r<=a;r++)l.push(r)}else{l.push(1),l.push("...");for(let r=o-1;r<=o+1;r++)l.push(r);l.push("..."),l.push(a)}return l.filter(r=>r!=="..."||l.indexOf(r)!==l.lastIndexOf(r))}),G=T(()=>p.value.length>0&&p.value.every(a=>y.value.includes(a.id))),R=T(()=>{const a=new Date,o=a.getFullYear(),l=a.getMonth()+1,r=p.value.filter(f=>{if(!f.expense_date)return!1;const i=new Date(f.expense_date);return!isNaN(i.getTime())&&i.getFullYear()===o&&i.getMonth()+1===l}).reduce((f,i)=>{const v=parseFloat(i.amount)||0;return f+v},0);return isNaN(r)?0:r}),q=T(()=>{const a=new Date,o=new Date(a.getFullYear(),a.getMonth()-1),l=o.getFullYear(),r=o.getMonth()+1,f=p.value.filter(i=>{if(!i.expense_date)return!1;const v=new Date(i.expense_date);return!isNaN(v.getTime())&&v.getFullYear()===l&&v.getMonth()+1===r}).reduce((i,v)=>{const C=parseFloat(v.amount)||0;return i+C},0);return isNaN(f)?0:f}),Z=T(()=>{const a=R.value||0,o=q.value||0,l=a-o;return isNaN(l)?0:l}),$=T(()=>{const a=R.value||0,o=q.value||0;if(o===0)return a>0?100:0;const l=(a-o)/o*100;return isNaN(l)?0:l}),A=a=>{if(a==null||isNaN(a))return"0.00";const o=parseFloat(a);return isNaN(o)?"0.00":new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o)},ee=()=>new Date().toLocaleDateString("en-US",{month:"long",year:"numeric"}),te=()=>{const a=new Date;return new Date(a.getFullYear(),a.getMonth()-1).toLocaleDateString("en-US",{month:"long",year:"numeric"})},se=a=>new Date(a).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}),H=()=>{d.name="",d.description="",d.amount=0,d.currency="BDT",d.expense_date=new Date().toISOString().split("T")[0],d.category="",d.icon="fas fa-receipt",d.notes="",d.payment_status="pending",d.paid_date=null,d.payment_notes="",I.value="BDT"},ne=()=>{H(),t.value=!0},ae=a=>{E.value=a,d.name=a.name,d.description=a.description,d.amount=a.amount,d.currency=a.currency||"BDT",d.expense_date=a.expense_date?new Date(a.expense_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],d.category=a.category,d.icon=a.icon,d.notes=a.notes,d.payment_status=a.payment_status||"paid",d.paid_date=a.paid_date,d.payment_notes=a.payment_notes||"",I.value=a.currency||"BDT",t.value=!0},z=()=>{t.value=!1,E.value=null,H()},oe=async()=>{var a,o;s.value=!0;try{const l=E.value?route("admin.finance.expenses.update",E.value.id):route("admin.finance.expenses.store"),r=E.value?"put":"post",f={...d};d.currency==="USD"&&(f.amount=d.amount*U,f.currency="BDT");const i=await N[r](l,f);if(i.data.success){if(E.value){const v=p.value.findIndex(C=>C.id===E.value.id);p.value[v]=i.data.expense}else p.value.unshift(i.data.expense);z(),h.fire({title:"Success!",text:i.data.message,icon:"success",confirmButtonColor:"#f6c23e",timer:3e3,timerProgressBar:!0})}}catch(l){console.error("Save failed:",l),h.fire({title:"Error!",text:((o=(a=l.response)==null?void 0:a.data)==null?void 0:o.message)||"Failed to save expense",icon:"error",confirmButtonColor:"#e74a3b"})}finally{s.value=!1}},le=async a=>{var l,r;if((await h.fire({title:"Are you sure?",text:"You want to delete this expense? This action cannot be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#e74a3b",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{const f=await N.delete(route("admin.finance.expenses.delete",a));f.data.success&&(p.value=p.value.filter(i=>i.id!==a),h.fire({title:"Deleted!",text:f.data.message,icon:"success",confirmButtonColor:"#f6c23e",timer:3e3,timerProgressBar:!0}))}catch(f){console.error("Delete failed:",f),h.fire({title:"Error!",text:((r=(l=f.response)==null?void 0:l.data)==null?void 0:r.message)||"Failed to delete expense",icon:"error",confirmButtonColor:"#e74a3b"})}},F=async(a=!1)=>{var o,l;a&&(D.value=1),M.value=!0;try{const r={page:D.value,per_page:Q.value};B.value.trim()&&(r.search=B.value.trim());const f=await N.get(route("admin.finance.expenses.with-search"),{params:r});if(f.data.success)p.value=f.data.expenses,n.value=f.data.pagination.total;else throw new Error(f.data.message||"Failed to fetch expenses")}catch(r){console.error("Error fetching expenses:",r),h.fire({title:"Error!",text:((l=(o=r.response)==null?void 0:o.data)==null?void 0:l.message)||"Failed to load expenses. Please try again.",icon:"error",confirmButtonColor:"#f6c23e"})}finally{M.value=!1}};return{expenses:p,showAddModal:t,editingExpense:E,saving:s,form:d,USD_TO_BDT_RATE:U,formatNumber:A,formatDate:se,openAddModal:ne,editExpense:ae,closeModal:z,saveExpense:oe,deleteExpense:le,clearAllExpenses:async()=>{const a=p.value.length,o=p.value.reduce((i,v)=>{const C=v.amount;return i+C},0),l=p.value.slice(0,5).map(i=>`â€¢ ${i.name} (${i.category}): à§³${A(i.amount)}`).join("<br>"),r=p.value.length>5?`<br>...and ${p.value.length-5} more expenses`:"";if((await h.fire({title:"Clear All One-Time Expenses?",html:`<div class="text-left">
                    <p>This will permanently remove <strong>${a}</strong> one-time expenses:</p>
                    <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin: 10px 0; font-size: 14px;">
                        ${l}
                        ${r}
                    </div>
                    <p><strong>Total Value:</strong> à§³${A(o)}</p>
                    <p class="text-danger mb-0"><i class="fas fa-exclamation-triangle"></i> This action cannot be undone!</p>
                </div>`,icon:"error",showCancelButton:!0,confirmButtonColor:"#e74a3b",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, clear all expenses!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{const i=p.value.map(v=>N.delete(route("admin.finance.expenses.delete",v.id)));await Promise.all(i),p.value.splice(0),h.fire({title:"All Expenses Cleared!",text:`Successfully removed ${a} one-time expenses.`,icon:"success",confirmButtonColor:"#f6c23e",timer:3e3,timerProgressBar:!0})}catch(i){console.error("Bulk delete failed:",i),h.fire({title:"Error!",text:"Failed to clear some expenses. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},exportExpenses:async()=>{const a=`Date,Name,Category,Amount,Currency,BDT Equivalent,Description,Notes
`,o=p.value.map(i=>{const v=i.amount;return[i.expense_date,`"${i.name}"`,`"${i.category}"`,i.amount,i.currency,v.toFixed(2),`"${i.description||""}"`,`"${i.notes||""}"`].join(",")}).join(`
`),l=a+o,r=new Blob([l],{type:"text/csv;charset=utf-8;"}),f=document.createElement("a");if(f.download!==void 0){const i=URL.createObjectURL(r);f.setAttribute("href",i),f.setAttribute("download",`One-Time-Expenses-${new Date().toISOString().split("T")[0]}.csv`),f.style.visibility="hidden",document.body.appendChild(f),f.click(),document.body.removeChild(f),h.fire({title:"Export Complete!",text:"One-time expenses have been exported to CSV.",icon:"success",confirmButtonColor:"#f6c23e",timer:2e3,timerProgressBar:!0})}},searchQuery:B,isLoading:M,totalItems:n,handleSearch:()=>{_&&clearTimeout(_),_=setTimeout(()=>{F(!0)},500)},clearSearch:()=>{B.value="",F(!0)},fetchExpenses:F,selectedExpenses:y,currentPage:D,itemsPerPage:Q,totalPages:P,visiblePages:X,changePage:a=>{a>=1&&a<=P.value&&a!=="..."&&(D.value=a,y.value=[],F())},isAllSelected:G,toggleSelectAll:()=>{if(G.value){const a=p.value.map(o=>o.id);y.value=y.value.filter(o=>!a.includes(o))}else{const o=p.value.map(l=>l.id).filter(l=>!y.value.includes(l));y.value.push(...o)}},deleteSelectedExpenses:async()=>{if(y.value.length===0)return;const a=y.value.length,o=p.value.filter(v=>y.value.includes(v.id)),l=o.reduce((v,C)=>{const re=C.amount;return v+re},0),r=o.slice(0,5).map(v=>`â€¢ ${v.name} (${v.category}): à§³${A(v.amount)}`).join("<br>"),f=o.length>5?`<br>...and ${o.length-5} more expenses`:"";if((await h.fire({title:`Delete ${a} Selected Expenses?`,html:`<div class="text-left">
                    <p>This will permanently remove <strong>${a}</strong> selected expenses:</p>
                    <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin: 10px 0; font-size: 14px;">
                        ${r}
                        ${f}
                    </div>
                    <p><strong>Total Value:</strong> à§³${A(l)}</p>
                    <p class="text-danger mb-0"><i class="fas fa-exclamation-triangle"></i> This action cannot be undone!</p>
                </div>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#e74a3b",cancelButtonColor:"#6c757d",confirmButtonText:`Yes, delete ${a} expenses!`,cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{const v=y.value.map(C=>N.delete(route("admin.finance.expenses.delete",C)));await Promise.all(v),p.value=p.value.filter(C=>!y.value.includes(C.id)),y.value=[],D.value>P.value&&P.value>0&&(D.value=P.value),h.fire({title:"Expenses Deleted!",text:`Successfully removed ${a} expenses.`,icon:"success",confirmButtonColor:"#f6c23e",timer:3e3,timerProgressBar:!0})}catch(v){console.error("Bulk delete failed:",v),h.fire({title:"Error!",text:"Failed to delete some expenses. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},currentMonthTotal:R,previousMonthTotal:q,expenseChangeAmount:Z,expenseChangePercentage:$,getCurrentMonthName:ee,getPreviousMonthName:te}}},pe={class:"row"},ge={class:"col-lg-12"},be={class:"dashboard-settings margin-top-40"},xe={class:"card mb-4"},ye={class:"card-header d-flex justify-content-between align-items-center"},he={class:"btn-group"},_e={class:"row mb-4"},ke={class:"col-lg-4 col-md-4 mb-3"},Ce={class:"metric-card current-month-card"},we={class:"metric-content"},Ee={class:"metric-value"},Se={class:"metric-subtitle"},De={class:"col-lg-4 col-md-4 mb-3"},Te={class:"metric-card previous-month-card"},Pe={class:"metric-content"},Be={class:"metric-value"},Me={class:"metric-subtitle"},Ae={class:"col-lg-4 col-md-4 mb-3"},Ne={class:"metric-card comparison-card"},Ue={class:"metric-content"},Ie={class:"card"},Fe={class:"card-header d-flex justify-content-between align-items-center"},Ve={class:"d-flex align-items-center gap-3 flex-wrap"},Oe={class:"search-container"},Le={class:"input-group",style:{"min-width":"250px"}},Qe={class:"input-group-text"},Re={key:0,class:"fas fa-spinner fa-spin"},qe={key:1,class:"fas fa-search"},Ye={key:0,class:"form-check"},je=["checked"],Ge={class:"results-info"},He={class:"text-muted"},ze={key:0},We={key:0,class:"text-info"},Ke={key:1,class:"text-muted"},Je={key:0},Xe={key:1},Ze={class:"card-body"},$e={class:"table-responsive d-none d-md-block"},et={class:"table table-striped"},tt={class:"form-check"},st=["value","id"],nt={class:"badge bg-light text-dark"},at={class:"badge bg-secondary"},ot={class:"badge bg-warning text-dark"},lt={class:"btn-group",role:"group"},rt=["onClick"],it=["onClick"],dt={key:0},ct={key:1},ft={colspan:"9",class:"text-center text-muted py-4"},ut={class:"d-flex flex-column align-items-center"},mt={class:"mb-2"},vt={class:"d-flex gap-2"},pt={class:"d-md-none"},gt={key:0,class:"text-center text-muted py-5"},bt={key:1,class:"text-center text-muted py-5"},xt={class:"d-flex flex-column align-items-center"},yt={class:"mb-2"},ht={class:"d-flex gap-2"},_t={class:"card border-start border-warning border-3"},kt={class:"card-body p-3"},Ct={class:"d-flex align-items-start gap-3"},wt={class:"form-check"},Et=["value","id"],St={class:"expense-info flex-grow-1"},Dt={class:"d-flex align-items-center justify-content-between mb-2"},Tt={class:"d-flex align-items-center"},Pt={class:"mb-0 expense-name fw-bold"},Bt={class:"badge bg-light text-dark"},Mt={class:"expense-details"},At={class:"mb-2"},Nt={class:"badge bg-secondary me-2"},Ut={key:0,class:"text-muted mb-2 small"},It={class:"expense-amount"},Ft={class:"badge bg-warning text-dark fs-6"},Vt={key:1,class:"mt-2"},Ot={class:"text-muted"},Lt={class:"expense-actions d-flex flex-column gap-2"},Qt=["onClick"],Rt=["onClick"],qt={key:0,class:"d-flex justify-content-between align-items-center mt-4"},Yt={class:"text-muted"},jt={key:0},Gt={key:0,class:"text-info"},Ht={"aria-label":"Expenses pagination"},zt={class:"pagination pagination-sm mb-0"},Wt=["disabled"],Kt=["onClick"],Jt={key:1,class:"page-link"},Xt=["disabled"],Zt={class:"modal-header"},$t={class:"modal-body"},es={class:"row"},ts={class:"col-md-6 mb-3"},ss={class:"col-md-6 mb-3"},ns={class:"row"},as={class:"col-md-6 mb-3"},os={class:"input-group"},ls={key:0,class:"form-text text-info"},rs={class:"col-md-6 mb-3"},is={class:"row"},ds={class:"col-md-6 mb-3"},cs={class:"col-md-6 mb-3"},fs={key:0,class:"row"},us={class:"col-md-6 mb-3"},ms=["max"],vs={class:"col-md-6 mb-3"},ps={class:"mb-3"},gs={class:"mb-3"},bs={class:"d-flex justify-content-end gap-2"},xs=["disabled"];function ys(L,t,E,s,p,B){const M=ce("Head");return m(),u(V,null,[fe(M,{title:"One-time Expenses"}),e("div",pe,[e("div",ge,[e("div",be,[e("div",xe,[e("div",ye,[t[36]||(t[36]=e("h4",{class:"mb-0"},[e("i",{class:"fas fa-receipt me-2"}),g(" One-time Expenses ")],-1)),e("div",he,[e("button",{onClick:t[0]||(t[0]=(...n)=>s.openAddModal&&s.openAddModal(...n)),class:"btn btn-warning"},[...t[32]||(t[32]=[e("i",{class:"fas fa-plus"},null,-1),g(" Add Expense ",-1)])]),s.selectedExpenses.length>0?(m(),u("button",{key:0,onClick:t[1]||(t[1]=(...n)=>s.deleteSelectedExpenses&&s.deleteSelectedExpenses(...n)),class:"btn btn-danger"},[t[33]||(t[33]=e("i",{class:"fas fa-trash"},null,-1)),g(" Delete Selected ("+c(s.selectedExpenses.length)+") ",1)])):b("",!0),s.expenses.length>0?(m(),u("button",{key:1,onClick:t[2]||(t[2]=(...n)=>s.exportExpenses&&s.exportExpenses(...n)),class:"btn btn-outline-success"},[...t[34]||(t[34]=[e("i",{class:"fas fa-download"},null,-1),g(" Export CSV ",-1)])])):b("",!0),s.expenses.length>0?(m(),u("button",{key:2,onClick:t[3]||(t[3]=(...n)=>s.clearAllExpenses&&s.clearAllExpenses(...n)),class:"btn btn-outline-danger"},[...t[35]||(t[35]=[e("i",{class:"fas fa-trash-alt"},null,-1),g(" Clear All ",-1)])])):b("",!0)])]),t[37]||(t[37]=Y('<div class="card-body" data-v-bcff98f1><div class="entrepreneur-guide mb-4" data-v-bcff98f1><h6 class="text-primary mb-0" data-v-bcff98f1><button class="btn btn-link text-primary p-0 text-decoration-none w-100 text-start" type="button" data-bs-toggle="collapse" data-bs-target="#expenseGuide" aria-expanded="false" aria-controls="expenseGuide" data-v-bcff98f1><i class="fas fa-lightbulb me-2" data-v-bcff98f1></i> Solo Entrepreneur Expense Management Guide <i class="fas fa-chevron-down float-end mt-1" data-v-bcff98f1></i></button></h6><div id="expenseGuide" class="collapse mt-3" data-v-bcff98f1><div class="row" data-v-bcff98f1><div class="col-md-6" data-v-bcff98f1><div class="guide-section" data-v-bcff98f1><h6 class="text-success" data-v-bcff98f1>What are One-time Expenses?</h6><ul class="small text-muted" data-v-bcff98f1><li data-v-bcff98f1><strong data-v-bcff98f1>Equipment:</strong> Laptop, monitor, desk, chair</li><li data-v-bcff98f1><strong data-v-bcff98f1>Software:</strong> Adobe CC, design tools, development licenses</li><li data-v-bcff98f1><strong data-v-bcff98f1>Training:</strong> Courses, certifications, conferences</li><li data-v-bcff98f1><strong data-v-bcff98f1>Marketing:</strong> Ad campaigns, branding materials</li><li data-v-bcff98f1><strong data-v-bcff98f1>Legal/Professional:</strong> Lawyer fees, accountant consultations</li><li data-v-bcff98f1><strong data-v-bcff98f1>Emergency:</strong> Urgent repairs, unexpected costs</li></ul></div></div><div class="col-md-6" data-v-bcff98f1><div class="guide-section" data-v-bcff98f1><h6 class="text-warning" data-v-bcff98f1>Why Track One-time Expenses?</h6><ul class="small text-muted" data-v-bcff98f1><li data-v-bcff98f1>ðŸ“Š <strong data-v-bcff98f1>Tax Deductions:</strong> Most business expenses are tax-deductible</li><li data-v-bcff98f1>ðŸ’¡ <strong data-v-bcff98f1>Cash Flow:</strong> Know exactly where your money goes</li><li data-v-bcff98f1>ðŸ“ˆ <strong data-v-bcff98f1>Business Growth:</strong> Track investments in your business</li><li data-v-bcff98f1>ðŸŽ¯ <strong data-v-bcff98f1>Budget Planning:</strong> Plan for similar expenses next year</li><li data-v-bcff98f1>ðŸ’° <strong data-v-bcff98f1>Profit Analysis:</strong> Understand true business profitability</li></ul></div></div></div><div class="alert alert-info mt-3" data-v-bcff98f1><i class="fas fa-info-circle me-2" data-v-bcff98f1></i><strong data-v-bcff98f1>Pro Tip:</strong> Set aside 20-30% of your revenue for business expenses. Track everything - even small purchases add up! </div></div></div><p class="text-muted" data-v-bcff98f1> Record all your one-time business expenses here. Use different currencies (USD for software, BDT for local expenses) and categorize properly for better financial insights. </p></div>',1))]),e("div",_e,[e("div",ke,[e("div",Ce,[e("div",we,[e("div",Ee,"à§³"+c(s.formatNumber(s.currentMonthTotal)),1),t[38]||(t[38]=e("div",{class:"metric-label"},"Current Month Expenses",-1)),e("div",Se,c(s.getCurrentMonthName()),1)]),t[39]||(t[39]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-calendar-day"})],-1))])]),e("div",De,[e("div",Te,[e("div",Pe,[e("div",Be,"à§³"+c(s.formatNumber(s.previousMonthTotal)),1),t[40]||(t[40]=e("div",{class:"metric-label"},"Previous Month Expenses",-1)),e("div",Me,c(s.getPreviousMonthName()),1)]),t[41]||(t[41]=e("div",{class:"metric-icon"},[e("i",{class:"fas fa-calendar-alt"})],-1))])]),e("div",Ae,[e("div",Ne,[e("div",Ue,[e("div",{class:k(["metric-value",s.expenseChangePercentage>=0?"text-danger":"text-success"])},c(s.expenseChangePercentage>=0?"+":"")+c(s.expenseChangePercentage.toFixed(1))+"% ",3),t[42]||(t[42]=e("div",{class:"metric-label"},"Month-over-Month Change",-1)),e("div",{class:k(["metric-subtitle",s.expenseChangePercentage>=0?"text-danger":"text-success"])},[e("i",{class:k(s.expenseChangePercentage>=0?"fas fa-arrow-up":"fas fa-arrow-down")},null,2),g(" "+c(s.expenseChangePercentage>=0?"Increased":"Decreased")+" by à§³"+c(s.formatNumber(Math.abs(s.expenseChangeAmount))),1)],2)]),e("div",{class:k(["metric-icon",s.expenseChangePercentage>=0?"text-danger":"text-success"])},[e("i",{class:k(s.expenseChangePercentage>=0?"fas fa-trending-up":"fas fa-trending-down")},null,2)],2)])])]),e("div",Ie,[e("div",Fe,[t[45]||(t[45]=e("h5",{class:"mb-0"},"Expense Records",-1)),e("div",Ve,[e("div",Oe,[e("div",Le,[e("span",Qe,[s.isLoading?(m(),u("i",Re)):(m(),u("i",qe))]),x(e("input",{"onUpdate:modelValue":t[4]||(t[4]=n=>s.searchQuery=n),type:"text",class:"form-control",placeholder:"Search by expense name, category, or description...",onInput:t[5]||(t[5]=(...n)=>s.handleSearch&&s.handleSearch(...n))},null,544),[[S,s.searchQuery]]),s.searchQuery?(m(),u("button",{key:0,onClick:t[6]||(t[6]=(...n)=>s.clearSearch&&s.clearSearch(...n)),class:"btn btn-outline-secondary",type:"button",title:"Reset search"},[...t[43]||(t[43]=[e("i",{class:"fas fa-times"},null,-1)])])):b("",!0)])]),s.expenses.length>0?(m(),u("div",Ye,[e("input",{class:"form-check-input",type:"checkbox",checked:s.isAllSelected,onChange:t[7]||(t[7]=(...n)=>s.toggleSelectAll&&s.toggleSelectAll(...n)),id:"selectAll"},null,40,je),t[44]||(t[44]=e("label",{class:"form-check-label",for:"selectAll"}," Select All ",-1))])):b("",!0),e("div",Ge,[e("span",He,[s.totalItems>0?(m(),u("span",ze,[g(c((s.currentPage-1)*s.itemsPerPage+1)+" to "+c(Math.min(s.currentPage*s.itemsPerPage,s.totalItems))+" of "+c(s.totalItems)+" items ",1),s.searchQuery?(m(),u("span",We,' (search results for "'+c(s.searchQuery)+'") ',1)):b("",!0)])):(m(),u("span",Ke,[s.searchQuery?(m(),u("span",Xe,'No results found for "'+c(s.searchQuery)+'"',1)):(m(),u("span",Je,"No expenses found"))]))])])])]),e("div",Ze,[e("div",$e,[e("table",et,[t[53]||(t[53]=e("thead",null,[e("tr",null,[e("th",{width:"40"},[e("i",{class:"fas fa-check-square text-muted"})]),e("th",null,"Date"),e("th",null,"Name"),e("th",null,"Category"),e("th",null,"Amount & Currency"),e("th",null,"Payment Status"),e("th",null,"Description"),e("th",null,"Icon"),e("th",null,"Actions")])],-1)),e("tbody",null,[(m(!0),u(V,null,j(s.expenses,n=>(m(),u("tr",{key:n.id},[e("td",null,[e("div",tt,[x(e("input",{class:"form-check-input",type:"checkbox",value:n.id,"onUpdate:modelValue":t[8]||(t[8]=_=>s.selectedExpenses=_),id:`expense-${n.id}`},null,8,st),[[W,s.selectedExpenses]])])]),e("td",null,[e("span",nt,c(s.formatDate(n.expense_date)),1)]),e("td",null,[e("strong",null,c(n.name),1)]),e("td",null,[e("span",at,c(n.category),1)]),e("td",null,[e("span",ot," à§³"+c(s.formatNumber(n.amount)),1)]),e("td",null,[e("span",{class:k(["badge",{"bg-success":n.payment_status==="paid","bg-danger":n.payment_status==="unpaid","bg-warning":n.payment_status==="pending"}])},[e("i",{class:k(["fas",{"fa-check-circle":n.payment_status==="paid","fa-times-circle":n.payment_status==="unpaid","fa-clock":n.payment_status==="pending"}])},null,2),g(" "+c(n.payment_status?n.payment_status.charAt(0).toUpperCase()+n.payment_status.slice(1):"Paid"),1)],2)]),e("td",null,c(n.description||"-"),1),e("td",null,[e("i",{class:k([n.icon||"fas fa-receipt","text-primary"])},null,2)]),e("td",null,[e("div",lt,[e("button",{onClick:_=>s.editExpense(n),class:"btn btn-sm btn-outline-primary"},[...t[46]||(t[46]=[e("i",{class:"fas fa-edit"},null,-1)])],8,rt),e("button",{onClick:_=>s.deleteExpense(n.id),class:"btn btn-sm btn-outline-danger"},[...t[47]||(t[47]=[e("i",{class:"fas fa-trash"},null,-1)])],8,it)])])]))),128)),s.totalItems===0&&!s.searchQuery?(m(),u("tr",dt,[...t[48]||(t[48]=[e("td",{colspan:"9",class:"text-center text-muted py-4"},[e("i",{class:"fas fa-receipt fa-2x mb-3 d-block text-secondary"}),e("p",{class:"mb-0"},[g("No expenses found."),e("br"),g('Click "Add Expense" to record your first expense.')])],-1)])])):s.totalItems===0&&s.searchQuery?(m(),u("tr",ct,[e("td",ft,[e("div",ut,[t[52]||(t[52]=e("i",{class:"fas fa-search fa-2x mb-3 text-secondary"},null,-1)),e("p",mt,[t[49]||(t[49]=g("No expenses found for ",-1)),e("strong",null,'"'+c(s.searchQuery)+'"',1)]),e("div",vt,[e("button",{onClick:t[9]||(t[9]=(...n)=>s.clearSearch&&s.clearSearch(...n)),class:"btn btn-sm btn-outline-primary"},[...t[50]||(t[50]=[e("i",{class:"fas fa-times"},null,-1),g(" Clear Search ",-1)])]),e("button",{onClick:t[10]||(t[10]=(...n)=>s.openAddModal&&s.openAddModal(...n)),class:"btn btn-sm btn-warning"},[...t[51]||(t[51]=[e("i",{class:"fas fa-plus"},null,-1),g(" Add Expense ",-1)])])])])])])):b("",!0)])])]),e("div",pt,[s.totalItems===0&&!s.searchQuery?(m(),u("div",gt,[...t[54]||(t[54]=[e("i",{class:"fas fa-receipt fa-3x mb-3"},null,-1),e("p",null,[g("No expenses found."),e("br"),g('Click "Add Expense" to record your first expense.')],-1)])])):s.totalItems===0&&s.searchQuery?(m(),u("div",bt,[e("div",xt,[t[58]||(t[58]=e("i",{class:"fas fa-search fa-3x mb-3 text-secondary"},null,-1)),e("p",yt,[t[55]||(t[55]=g("No expenses found for ",-1)),e("strong",null,'"'+c(s.searchQuery)+'"',1)]),e("div",ht,[e("button",{onClick:t[11]||(t[11]=(...n)=>s.clearSearch&&s.clearSearch(...n)),class:"btn btn-sm btn-outline-primary"},[...t[56]||(t[56]=[e("i",{class:"fas fa-times"},null,-1),g(" Clear Search ",-1)])]),e("button",{onClick:t[12]||(t[12]=(...n)=>s.openAddModal&&s.openAddModal(...n)),class:"btn btn-sm btn-warning"},[...t[57]||(t[57]=[e("i",{class:"fas fa-plus"},null,-1),g(" Add Expense ",-1)])])])])])):b("",!0),(m(!0),u(V,null,j(s.expenses,n=>(m(),u("div",{key:n.id,class:"mobile-expense-card mb-3"},[e("div",_t,[e("div",kt,[e("div",Ct,[e("div",wt,[x(e("input",{class:"form-check-input mobile-checkbox",type:"checkbox",value:n.id,"onUpdate:modelValue":t[13]||(t[13]=_=>s.selectedExpenses=_),id:`mobile-expense-${n.id}`},null,8,Et),[[W,s.selectedExpenses]])]),e("div",St,[e("div",Dt,[e("div",Tt,[e("i",{class:k([n.icon||"fas fa-receipt","text-primary me-2 fs-5"])},null,2),e("h6",Pt,c(n.name),1)]),e("span",Bt,c(s.formatDate(n.expense_date)),1)]),e("div",Mt,[e("div",At,[e("span",Nt,c(n.category),1)]),n.description?(m(),u("p",Ut,[t[59]||(t[59]=e("i",{class:"fas fa-info-circle me-1"},null,-1)),g(" "+c(n.description),1)])):b("",!0),e("div",It,[e("span",Ft," à§³"+c(s.formatNumber(n.amount)),1)]),n.notes?(m(),u("div",Vt,[e("small",Ot,[t[60]||(t[60]=e("i",{class:"fas fa-sticky-note me-1"},null,-1)),g(" "+c(n.notes),1)])])):b("",!0)])]),e("div",Lt,[e("button",{onClick:_=>s.editExpense(n),class:"btn btn-outline-primary btn-sm mobile-btn"},[...t[61]||(t[61]=[e("i",{class:"fas fa-edit"},null,-1)])],8,Qt),e("button",{onClick:_=>s.deleteExpense(n.id),class:"btn btn-outline-danger btn-sm mobile-btn"},[...t[62]||(t[62]=[e("i",{class:"fas fa-trash"},null,-1)])],8,Rt)])])])])]))),128))]),s.totalItems>s.itemsPerPage?(m(),u("div",qt,[e("div",Yt,[s.totalItems>0?(m(),u("span",jt,[g(" Showing "+c((s.currentPage-1)*s.itemsPerPage+1)+" to "+c(Math.min(s.currentPage*s.itemsPerPage,s.totalItems))+" of "+c(s.totalItems)+" entries ",1),s.searchQuery?(m(),u("span",Gt," (search results) ")):b("",!0)])):b("",!0)]),e("nav",Ht,[e("ul",zt,[e("li",{class:k(["page-item",{disabled:s.currentPage===1}])},[e("button",{class:"page-link",onClick:t[14]||(t[14]=n=>s.changePage(s.currentPage-1)),disabled:s.currentPage===1},[...t[63]||(t[63]=[e("i",{class:"fas fa-chevron-left"},null,-1)])],8,Wt)],2),(m(!0),u(V,null,j(s.visiblePages,n=>(m(),u("li",{key:n,class:k(["page-item",{active:n===s.currentPage}])},[n!=="..."?(m(),u("button",{key:0,class:"page-link",onClick:_=>s.changePage(n)},c(n),9,Kt)):(m(),u("span",Jt,c(n),1))],2))),128)),e("li",{class:k(["page-item",{disabled:s.currentPage===s.totalPages}])},[e("button",{class:"page-link",onClick:t[15]||(t[15]=n=>s.changePage(s.currentPage+1)),disabled:s.currentPage===s.totalPages},[...t[64]||(t[64]=[e("i",{class:"fas fa-chevron-right"},null,-1)])],8,Xt)],2)])])])):b("",!0)])]),s.showAddModal||s.editingExpense?(m(),u("div",{key:0,class:"modal-overlay",onClick:t[31]||(t[31]=(...n)=>s.closeModal&&s.closeModal(...n))},[e("div",{class:"modal-content",onClick:t[30]||(t[30]=K(()=>{},["stop"]))},[e("div",Zt,[e("h5",null,c(s.editingExpense?"Edit":"Add")+" Expense",1),e("button",{onClick:t[16]||(t[16]=(...n)=>s.closeModal&&s.closeModal(...n)),class:"btn-close"},"Ã—")]),e("div",$t,[e("form",{onSubmit:t[29]||(t[29]=K((...n)=>s.saveExpense&&s.saveExpense(...n),["prevent"]))},[e("div",es,[e("div",ts,[t[65]||(t[65]=e("label",{class:"form-label"},"Expense Name *",-1)),x(e("input",{"onUpdate:modelValue":t[17]||(t[17]=n=>s.form.name=n),type:"text",class:"form-control",required:"",placeholder:"e.g., Office Equipment, Training Course"},null,512),[[S,s.form.name]])]),e("div",ss,[t[66]||(t[66]=e("label",{class:"form-label"},"Expense Date *",-1)),x(e("input",{"onUpdate:modelValue":t[18]||(t[18]=n=>s.form.expense_date=n),type:"date",class:"form-control",required:""},null,512),[[S,s.form.expense_date]]),t[67]||(t[67]=e("small",{class:"form-text text-muted"},"Date when the expense occurred",-1))])]),e("div",ns,[e("div",as,[t[70]||(t[70]=e("label",{class:"form-label"},"Amount *",-1)),e("div",os,[x(e("select",{"onUpdate:modelValue":t[19]||(t[19]=n=>s.form.currency=n),class:"input-group-text",style:{"border-right":"0",background:"#e9ecef"}},[...t[68]||(t[68]=[e("option",{value:"BDT"},"à§³",-1),e("option",{value:"USD"},"$",-1)])],512),[[O,s.form.currency]]),x(e("input",{"onUpdate:modelValue":t[20]||(t[20]=n=>s.form.amount=n),type:"number",class:"form-control",step:"0.01",min:"0",required:"",placeholder:"0.00"},null,512),[[S,s.form.amount,void 0,{number:!0}]])]),s.form.currency==="USD"?(m(),u("div",ls,[e("small",null,[t[69]||(t[69]=e("i",{class:"fas fa-exchange-alt me-1"},null,-1)),g(" Converted: à§³"+c(s.formatNumber(s.form.amount*s.USD_TO_BDT_RATE))+" BDT (1 USD = "+c(s.USD_TO_BDT_RATE)+" BDT) ",1)])])):b("",!0)]),e("div",rs,[t[72]||(t[72]=e("label",{class:"form-label"},"Category *",-1)),x(e("select",{"onUpdate:modelValue":t[21]||(t[21]=n=>s.form.category=n),class:"form-select",required:""},[...t[71]||(t[71]=[Y('<option value="" data-v-bcff98f1>Select Category</option><option value="Equipment" data-v-bcff98f1>Equipment</option><option value="Repairs" data-v-bcff98f1>Repairs &amp; Maintenance</option><option value="Training" data-v-bcff98f1>Training &amp; Development</option><option value="Travel" data-v-bcff98f1>Travel &amp; Transportation</option><option value="Marketing" data-v-bcff98f1>Marketing &amp; Advertising</option><option value="Legal" data-v-bcff98f1>Legal &amp; Professional</option><option value="Supplies" data-v-bcff98f1>Office Supplies</option><option value="Technology" data-v-bcff98f1>Technology &amp; Software</option><option value="Miscellaneous" data-v-bcff98f1>Miscellaneous</option><option value="Emergency" data-v-bcff98f1>Emergency Expenses</option>',11)])],512),[[O,s.form.category]])])]),e("div",is,[e("div",ds,[t[74]||(t[74]=e("label",{class:"form-label"},"Icon",-1)),x(e("select",{"onUpdate:modelValue":t[22]||(t[22]=n=>s.form.icon=n),class:"form-select"},[...t[73]||(t[73]=[Y('<option value="fas fa-receipt" data-v-bcff98f1>Receipt (Default)</option><option value="fas fa-laptop" data-v-bcff98f1>Equipment/Technology</option><option value="fas fa-wrench" data-v-bcff98f1>Repairs &amp; Tools</option><option value="fas fa-graduation-cap" data-v-bcff98f1>Training &amp; Education</option><option value="fas fa-plane" data-v-bcff98f1>Travel</option><option value="fas fa-bullhorn" data-v-bcff98f1>Marketing</option><option value="fas fa-gavel" data-v-bcff98f1>Legal</option><option value="fas fa-boxes" data-v-bcff98f1>Supplies</option><option value="fas fa-exclamation-triangle" data-v-bcff98f1>Emergency</option><option value="fas fa-shopping-cart" data-v-bcff98f1>Purchase</option>',10)])],512),[[O,s.form.icon]])]),e("div",cs,[t[76]||(t[76]=e("label",{class:"form-label"},"Payment Status *",-1)),x(e("select",{"onUpdate:modelValue":t[23]||(t[23]=n=>s.form.payment_status=n),class:"form-select",required:""},[...t[75]||(t[75]=[e("option",{value:"paid"},"âœ… Paid",-1),e("option",{value:"unpaid"},"â³ Unpaid",-1),e("option",{value:"pending"},"ðŸ”„ Pending",-1)])],512),[[O,s.form.payment_status]]),t[77]||(t[77]=e("small",{class:"form-text text-muted"},"Current payment status of this expense",-1))])]),s.form.payment_status==="paid"?(m(),u("div",fs,[e("div",us,[t[78]||(t[78]=e("label",{class:"form-label"},"Paid Date",-1)),x(e("input",{"onUpdate:modelValue":t[24]||(t[24]=n=>s.form.paid_date=n),type:"date",class:"form-control",max:new Date().toISOString().split("T")[0]},null,8,ms),[[S,s.form.paid_date]]),t[79]||(t[79]=e("small",{class:"form-text text-muted"},"Date when payment was made (optional)",-1))]),e("div",vs,[t[80]||(t[80]=e("label",{class:"form-label"},"Payment Notes",-1)),x(e("textarea",{"onUpdate:modelValue":t[25]||(t[25]=n=>s.form.payment_notes=n),class:"form-control",rows:"2",placeholder:"Payment method, reference number, etc."},null,512),[[S,s.form.payment_notes]])])])):b("",!0),e("div",ps,[t[81]||(t[81]=e("label",{class:"form-label"},"Description",-1)),x(e("textarea",{"onUpdate:modelValue":t[26]||(t[26]=n=>s.form.description=n),class:"form-control",rows:"3",placeholder:"Brief description of the expense"},null,512),[[S,s.form.description]])]),e("div",gs,[t[82]||(t[82]=e("label",{class:"form-label"},"Additional Notes",-1)),x(e("textarea",{"onUpdate:modelValue":t[27]||(t[27]=n=>s.form.notes=n),class:"form-control",rows:"2",placeholder:"Any additional notes or details"},null,512),[[S,s.form.notes]])]),e("div",bs,[e("button",{type:"button",onClick:t[28]||(t[28]=(...n)=>s.closeModal&&s.closeModal(...n)),class:"btn btn-secondary"}," Cancel "),e("button",{type:"submit",class:"btn btn-warning",disabled:s.saving},[t[83]||(t[83]=e("i",{class:"fas fa-save"},null,-1)),g(" "+c(s.saving?"Saving...":"Save Expense"),1)],8,xs)])],32)])])])):b("",!0)])])])],64)}const Ms=me(ve,[["render",ys],["__scopeId","data-v-bcff98f1"]]);export{Ms as default};

import{H as M,K as D,u as c,L as x,r,c as f,o as _,a as i,b as n,g as w,f as N,F as y,p as A,t as u,n as B,w as F,m as I}from"./app-D-NtkN6p.js";import{P}from"./Pagination-DI_GvDMZ.js";import{S as z}from"./sweetalert2.esm.all-acGi8jXx.js";import{B as j,a as T}from"./BsModalButton-D-ITvZ6y.js";import{I as C}from"./Input-BGJSQ9n_.js";import{S as E}from"./Select-BpV6nHuv.js";import{B as H}from"./Button-BIhpkzd_.js";import{V as U}from"./ValidationErrors-hOEnAWst.js";import{U as Y}from"./UserMaster-BmVTtieQ.js";import{I as q}from"./Input-C9mTVneT.js";import{_ as O}from"./_plugin-vue_export-helper-DlAUqK2U.js";function b(t){const e=Object.prototype.toString.call(t);return t instanceof Date||typeof t=="object"&&e==="[object Date]"?new t.constructor(+t):typeof t=="number"||e==="[object Number]"||typeof t=="string"||e==="[object String]"?new Date(t):new Date(NaN)}function v(t,e){return t instanceof Date?new t.constructor(e):new Date(e)}function R(t,e){const s=b(t);if(isNaN(e))return v(t,NaN);const o=s.getDate(),l=v(t,s.getTime());l.setMonth(s.getMonth()+e+1,0);const d=l.getDate();return o>=d?l:(s.setFullYear(l.getFullYear(),l.getMonth(),o),s)}function K(t){return b(t).getMonth()}function W(t){return b(t).getFullYear()}const G={name:"Index",layout:Y,components:{Input:q,Pagination:P,Link:x,usePage:c,BsModal:T,BsModalButton:j,BsInput:C,BsSelect:E,BsButton:H,BreezeValidationErrors:U,VueDatePicker:D,Head:M},setup(){const t=[{label:"Leave",value:"leave"},{label:"Sick Leave",value:"sick-leave"},{label:"Work From Home",value:"work-from-home"}],e=I({employee_id:null,type:null,date_time:null}),s=new Date,o=R(new Date(W(new Date),K(new Date)),1);function l(){return c().props.value.attendance_logs.data}function d(){return c().props.value.attendance_logs.links}function m(){e.post(route("user.leaves.new"),{onSuccess:g=>{z.fire("Success","new attendance log added","success"),e.reset("employee_id","type","date_time","name")}})}function p(){return c().props.value.employees}return{attendancesData:l,attendancesLink:d,addAttendanceLogFormSubmit:m,attendanceTypes:t,newLogData:e,employeesList:p,VueDatePicker:D,minDate:s,maxDate:o}}},J={class:"row"},Q={class:"col-lg-12"},X={class:"dashboard-settings margin-top-40 margin-bottom-30"},Z={class:"header-wrap d-flex justify-content-between"},$={class:"btn-wrapper"},ee={class:"table-wrap table-responsive"},te={class:"table table-light table-secondary"},ne={class:"single-info-input margin-top-30"};function oe(t,e,s,o,l,d){const m=r("Head"),p=r("BsModalButton"),g=r("Pagination"),k=r("BreezeValidationErrors"),S=r("BsSelect"),h=r("VueDatePicker"),V=r("BsButton"),L=r("BsModal");return _(),f(y,null,[i(m,{title:"All Attendance Request"}),n("div",J,[n("div",Q,[n("div",X,[n("div",Z,[e[4]||(e[4]=n("h2",{class:"dashboards-title margin-bottom-40"},"All Attendance Request",-1)),n("div",$,[i(p,{target:"addnewcategory","button-class":"btn btn-info m-1"},{default:w(()=>e[3]||(e[3]=[N("Add New Request")])),_:1,__:[3]})])]),n("div",ee,[n("table",te,[e[5]||(e[5]=n("thead",null,[n("th",null,"ID"),n("th",null,"Type"),n("th",null,"Status"),n("th",null,"Date")],-1)),n("tbody",null,[(_(!0),f(y,null,A(o.attendancesData(),a=>(_(),f("tr",{key:a.id},[n("td",null,u(a.id),1),n("td",null,[n("span",{class:B(["alert text-capitalize",a.type])},u(a.type.replaceAll("-"," ")),3)]),n("td",null,[n("span",{class:B(["alert text-capitalize",a.status===1?"alert-success":"alert-danger"])},u(a.status===1?"Approved":"pending"),3)]),n("td",null,u(t.readableDateFormat(a.date_time)),1)]))),128))])])]),i(g,{links:o.attendancesLink()},null,8,["links"])])])]),i(L,{"modal-title":"Add New Attendance Log","modal-id":"addnewcategory","modal-size":"modal-md"},{default:w(()=>[i(k,{class:"mb-4"}),n("form",{onSubmit:e[2]||(e[2]=F(()=>{},["prevent"]))},[i(S,{title:"Status",options:o.attendanceTypes,modelValue:o.newLogData.type,"onUpdate:modelValue":e[0]||(e[0]=a=>o.newLogData.type=a)},null,8,["options","modelValue"]),n("div",ne,[e[6]||(e[6]=n("label",{class:"info-title"},"Date Time",-1)),i(h,{"start-date":new Date,"disabled-week-days":[5],modelValue:o.newLogData.date_time,"onUpdate:modelValue":e[1]||(e[1]=a=>o.newLogData.date_time=a),"min-date":o.minDate,"max-date":o.maxDate},null,8,["start-date","modelValue","min-date","max-date"])]),i(V,{"button-text":"Submit","button-type":"submit",onClick:o.addAttendanceLogFormSubmit,disabled:o.newLogData.processing},null,8,["onClick","disabled"])],32)]),_:1})],64)}const _e=O(G,[["render",oe]]);export{_e as default};

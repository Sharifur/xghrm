import{L,H as S,l as o,u as E,m as A,r,o as v,c as C,a as c,b as t,w as H,e as l,t as n,g as F,h as N,F as x,x as U,p as O,n as W}from"./app-i-P7TbwR.js";import{B as M}from"./Select-QK1i74w-.js";import{B as j}from"./Button-EdfEcMu6.js";import{s as I}from"./vue3-datepicker.esm-_z1PbtWX.js";import{V as P}from"./ValidationErrors-ge_0yJkI.js";import{S as V}from"./sweetalert2.all-icJphP2-.js";import{U as T}from"./UserMaster-F01FejNc.js";import{_ as z}from"./_plugin-vue_export-helper-x3n3nnut.js";const G={name:"AttendanceCheck",layout:T,components:{BsSelect:M,BsButton:j,Datepicker:I,ValidationErrors:P,Link:L,Head:S},setup(){const f=o(0),s=o(0),g=o(0),a=o(0),D=o(0),b=o(0),k=o(0),_=o(!1),d=o([]),m=E().props.value.allEmployees,u=A({employee_id:m.id,startDate:new Date,endDate:new Date});function i(){U.post(route("user.attendance.index"),{...u}).then(e=>{if(Object.keys(e.data.logs).length>1){let p=e.data.logs,y=[];p.forEach((h,B)=>{y.push({key:B,customData:{title:`${h.type}: ${new Date(h.date_time).toLocaleTimeString("en-US",{timeZone:"Asia/Dhaka"})} `,class:h.type},dates:new Date(h.date_time)})}),d.value=y,_.value=!0,f.value=e.data.holidayCount,s.value=e.data.leaveCount,g.value=e.data.inCount,a.value=e.data.outCount,D.value=e.data.sickLeaveCount,b.value=e.data.paidLeaveCount}else V.fire("Error!","NO data found in selected Dates","warning")}).catch(e=>{V.fire("Error!",e.message,"warning")})}new Date().getMonth(),new Date().getFullYear();function w(){return{masks:{weekdays:"WWW"},attributes:d.value}}return{employeeData:u,getAttendanceDetails:i,employeeDetails:m,CalendarData:w,attendanceShow:_,CalendarAttributes:d,holidayCount:f,leaveCount:s,inCount:g,outCount:a,sickLeaveCount:D,paidLeaveCount:b,workFromHomeCount:k}}},Y={class:"row"},Z={class:"col-lg-12"},q={class:"dashboard-settings margin-top-40"},J=t("div",{class:"header-wrap d-flex justify-content-between"},[t("h2",{class:"dashboards-title"},"Attendance Check")],-1),K={class:"edit-profile"},Q={class:"profile-info-dashboard"},R={class:"dashboard-profile-flex"},X={class:"dashboard-address-details"},$={class:"single-dashboard-input"},tt={class:"single-info-input margin-top-30"},at=t("label",{class:"info-title"}," Start Date ",-1),et={class:"single-dashboard-input"},st={class:"single-info-input margin-top-30"},ot=t("label",{class:"info-title"}," End Date",-1),nt={class:"btn-wrapper margin-top-35"},it={key:0,class:"cleardar-wrapper"},lt={class:"head-rapw margin-top-40"},dt=t("h4",null,"Color Explanation",-1),ct={class:"color-explanation"},rt={class:"holiday"},_t={class:"badge"},mt={class:"leave"},ut={class:"badge"},pt={class:"C/In"},ht={class:"badge"},vt={class:"C/Out"},Ct={class:"badge"},ft={class:"sick-leave"},gt={class:"badge"},Dt={class:"paid-leave"},bt={class:"badge"},kt={class:"work-from-home"},wt={class:"badge"},yt={class:"date-box-wrapper"},xt={class:"day-label"},Vt={class:"custom-data-wrapper"};function Bt(f,s,g,a,D,b){const k=r("Head"),_=r("ValidationErrors"),d=r("Datepicker"),m=r("BsButton"),u=r("Calendar");return v(),C(x,null,[c(k,{title:"Attendance Check "}),t("div",Y,[t("div",Z,[t("div",q,[J,t("div",K,[t("div",Q,[c(_),t("div",R,[t("div",X,[t("form",{onSubmit:s[2]||(s[2]=H(()=>{},["prevent"]))},[t("div",$,[t("div",tt,[at,c(d,{modelValue:a.employeeData.startDate,"onUpdate:modelValue":s[0]||(s[0]=i=>a.employeeData.startDate=i)},null,8,["modelValue"])])]),t("div",et,[t("div",st,[ot,c(d,{modelValue:a.employeeData.endDate,"onUpdate:modelValue":s[1]||(s[1]=i=>a.employeeData.endDate=i)},null,8,["modelValue"])])]),t("div",nt,[c(m,{"button-text":"Get Details",onClick:a.getAttendanceDetails,classes:"cmn-btn btn-bg-1"},null,8,["onClick"])])],32)])])])]),a.attendanceShow?(v(),C("div",it,[t("div",lt,[dt,t("ul",ct,[t("li",rt,[l("Holiday "),t("span",_t,n(a.holidayCount),1)]),t("li",mt,[l("leave "),t("span",ut,n(a.leaveCount),1)]),t("li",pt,[l("C/In "),t("span",ht,n(a.inCount),1)]),t("li",vt,[l("C/Out "),t("span",Ct,n(a.outCount),1)]),t("li",ft,[l("Sick Leave "),t("span",gt,n(a.sickLeaveCount),1)]),t("li",Dt,[l("Paid Leave "),t("span",bt,n(a.paidLeaveCount),1)]),t("li",kt,[l("Work From Home "),t("span",wt,n(a.workFromHomeCount),1)])])]),c(u,{class:"custom-calendar-outer-wrap",masks:a.CalendarData().masks,attributes:a.CalendarData().attributes,"disable-page-swipe":"","is-expanded":""},{"day-content":F(({day:i,attributes:w})=>[t("div",yt,[t("span",xt,n(i.day),1),t("div",Vt,[(v(!0),C(x,null,O(w,({key:e,customData:p})=>(v(),C("p",{key:e,class:W(["data-item",p.class])},n(p.title),3))),128))])])]),_:1},8,["masks","attributes"])])):N("",!0)])])])],64)}const Ot=z(G,[["render",Bt]]);export{Ot as default};

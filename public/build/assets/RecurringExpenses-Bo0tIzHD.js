import{A as ue}from"./AdminMaster-CtvJ4jwP.js";import{H as me,r as fe,c as f,o as v,a as ve,b as e,h as x,f as y,t as m,F as q,p as N,e as C,j as Y,n as _,w as L,i as F,A as R,d as be,l as B,B as ge,C as pe,y as E,x as T,a0 as ye}from"./app-ClN5IJtO.js";import{S as g}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{_ as xe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const _e={layout:ue,name:"RecurringExpenses",components:{Head:me},props:{expenses:Array},setup(U){const t=B(!1),h=B(null),n=B(!1),c=B([]),p=B([]),w=B(1),a=B(10),r=ge({name:"",description:"",default_amount:0,frequency:"monthly",icon:"fas fa-receipt",tooltip:"",type:"liability",currency:"BDT"}),M=120,D=B("BDT");pe(()=>r.currency,s=>{const o=D.value;o&&r.default_amount>0&&o!==s&&(o==="BDT"&&s==="USD"?r.default_amount=Number((r.default_amount/M).toFixed(2)):o==="USD"&&s==="BDT"&&(r.default_amount=Number((r.default_amount*M).toFixed(2)))),D.value=s});const P=E(()=>Math.ceil(c.value.length/a.value)),S=E(()=>{const s=c.value.sort((i,u)=>u.id-i.id),o=(w.value-1)*a.value,l=o+a.value;return s.slice(o,l)}),W=E(()=>{const s=P.value,o=w.value,l=[];if(s<=7)for(let i=1;i<=s;i++)l.push(i);else if(o<=4){for(let i=1;i<=5;i++)l.push(i);l.push("..."),l.push(s)}else if(o>=s-3){l.push(1),l.push("...");for(let i=s-4;i<=s;i++)l.push(i)}else{l.push(1),l.push("...");for(let i=o-1;i<=o+1;i++)l.push(i);l.push("..."),l.push(s)}return l.filter(i=>i!=="..."||l.indexOf(i)!==l.lastIndexOf(i))}),I=E(()=>S.value.length>0&&S.value.every(s=>p.value.includes(s.id))),z=E(()=>c.value.reduce((s,o)=>{const l=parseFloat(o.bdt_amount||o.amount||o.default_amount)||0;return o.frequency==="yearly"?s+l/12:o.frequency==="weekly"?s+l*4.33:s+l},0)),G=E(()=>c.value.filter(s=>s.frequency==="weekly").reduce((s,o)=>{const l=parseFloat(o.bdt_amount||o.amount||o.default_amount)||0;return s+l},0)),J=E(()=>c.value.filter(s=>s.frequency==="yearly").reduce((s,o)=>{const l=parseFloat(o.bdt_amount||o.amount||o.default_amount)||0;return s+l},0)),A=s=>{const o=parseFloat(s)||0;return isNaN(o)?"0.00":new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o)},V=s=>{console.log("Formatting frequency:",s);const l={monthly:"Monthly",yearly:"Yearly",weekly:"Weekly",daily:"Daily"}[s]||"Monthly";return console.log("Formatted result:",l),l},K=s=>s==="monthly"?"bg-primary":s==="weekly"?"bg-success":s==="yearly"?"bg-danger":"bg-info",j=()=>{r.name="",r.description="",r.default_amount=0,r.frequency="monthly",r.icon="fas fa-receipt",r.tooltip="",r.type="liability",r.currency="BDT",D.value="BDT"},Q=async()=>{j(),t.value=!0,await ye(),D.value="BDT"},X=s=>{h.value=s,r.name=s.name,r.description=s.description,r.default_amount=s.amount||s.default_amount,r.frequency=s.frequency||"monthly",r.icon=s.icon,r.tooltip=s.tooltip,r.currency=s.currency||"BDT",D.value=s.currency||"BDT"},O=()=>{t.value=!1,h.value=null,j()},Z=async()=>{var s,o;n.value=!0;try{const l=h.value?route("admin.finance.recurring.expenses.update",h.value.id):route("admin.finance.recurring.expenses.store"),i=h.value?"put":"post",u={...r};r.currency==="USD"&&(u.default_amount=r.default_amount*M,u.currency="BDT"),console.log("Saving expense with data:",{original:{currency:r.currency,amount:r.default_amount,frequency:r.frequency},saving:{currency:u.currency,amount:u.default_amount,frequency:u.frequency}});const d=await T[i](l,u);if(d.data.success){if(console.log("Server returned expense:",d.data.expense),h.value){const b=c.value.findIndex(k=>k.id===h.value.id);c.value[b]=d.data.expense}else c.value.push(d.data.expense);O(),g.fire({title:"Success!",text:d.data.message,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0})}}catch(l){console.error("Save failed:",l),g.fire({title:"Error!",text:((o=(s=l.response)==null?void 0:s.data)==null?void 0:o.message)||"Failed to save expense",icon:"error",confirmButtonColor:"#e74a3b"})}finally{n.value=!1}},$=async s=>{var l,i;if((await g.fire({title:"Are you sure?",text:"You want to delete this recurring expense?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#e74a3b",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{const u=await T.delete(route("admin.finance.recurring.expenses.delete",s));u.data.success&&(c.value=c.value.filter(d=>d.id!==s),g.fire({title:"Deleted!",text:u.data.message,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0}))}catch(u){console.error("Delete failed:",u),g.fire({title:"Error!",text:((i=(l=u.response)==null?void 0:l.data)==null?void 0:i.message)||"Failed to delete expense",icon:"error",confirmButtonColor:"#e74a3b"})}},ee=()=>{},te=s=>{s>=1&&s<=P.value&&s!=="..."&&(w.value=s,p.value=[])},ne=()=>{if(I.value){const s=S.value.map(o=>o.id);p.value=p.value.filter(o=>!s.includes(o))}else{const o=S.value.map(l=>l.id).filter(l=>!p.value.includes(l));p.value.push(...o)}},se=async()=>{if(p.value.length===0)return;const s=p.value.length,o=c.value.filter(b=>p.value.includes(b.id)),l=o.reduce((b,k)=>b+(k.bdt_amount||k.amount||k.default_amount),0),i=o.slice(0,5).map(b=>`• ${b.name}: ৳${A(b.bdt_amount||b.amount||b.default_amount)}`).join("<br>"),u=o.length>5?`<br>...and ${o.length-5} more expenses`:"";if((await g.fire({title:`Delete ${s} Selected Expenses?`,html:`<div class="text-left">
                    <p>This will permanently remove <strong>${s}</strong> recurring expenses:</p>
                    <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin: 10px 0; font-size: 14px;">
                        ${i}
                        ${u}
                    </div>
                    <p><strong>Total Monthly Value:</strong> ৳${A(l)}</p>
                    <p class="text-danger mb-0"><i class="fas fa-exclamation-triangle"></i> This action cannot be undone!</p>
                </div>`,icon:"warning",showCancelButton:!0,confirmButtonColor:"#e74a3b",cancelButtonColor:"#6c757d",confirmButtonText:`Yes, delete ${s} expenses!`,cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{const b=p.value.map(k=>T.delete(route("admin.finance.recurring.expenses.delete",k)));await Promise.all(b),c.value=c.value.filter(k=>!p.value.includes(k.id)),p.value=[],w.value>P.value&&P.value>0&&(w.value=P.value),g.fire({title:"Expenses Deleted!",text:`Successfully removed ${s} recurring expenses.`,icon:"success",confirmButtonColor:"#007bff",timer:3e3,timerProgressBar:!0})}catch(b){console.error("Bulk delete failed:",b),g.fire({title:"Error!",text:"Failed to delete some expenses. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},ae=async()=>{const s=c.value.length,o=c.value.reduce((d,b)=>d+(b.bdt_amount||b.amount||b.default_amount),0),l=c.value.slice(0,5).map(d=>`• ${d.name}: ৳${A(d.bdt_amount||d.amount||d.default_amount)}`).join("<br>"),i=c.value.length>5?`<br>...and ${c.value.length-5} more expenses`:"";if((await g.fire({title:"Clear All Recurring Expenses?",html:`<div class="text-left">
                    <p>This will permanently remove <strong>${s}</strong> recurring expenses:</p>
                    <div style="background: #f8f9fa; padding: 10px; border-radius: 5px; margin: 10px 0; font-size: 14px;">
                        ${l}
                        ${i}
                    </div>
                    <p><strong>Total Monthly Value:</strong> ৳${A(o)}</p>
                    <p class="text-danger mb-0"><i class="fas fa-exclamation-triangle"></i> This action cannot be undone!</p>
                </div>`,icon:"error",showCancelButton:!0,confirmButtonColor:"#e74a3b",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, clear all expenses!",cancelButtonText:"Cancel",reverseButtons:!0})).isConfirmed)try{const d=c.value.map(b=>T.delete(route("admin.finance.recurring.expenses.delete",b.id)));await Promise.all(d),c.value.splice(0),g.fire({title:"All Expenses Cleared!",text:`Successfully removed ${s} recurring expenses.`,icon:"success",confirmButtonColor:"#28a745",timer:3e3,timerProgressBar:!0})}catch(d){console.error("Bulk delete failed:",d),g.fire({title:"Error!",text:"Failed to clear some expenses. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},oe=async()=>{const s=`Name,Description,Amount,Currency,BDT Equivalent,Frequency,Icon
`,o=c.value.map(d=>[`"${d.name}"`,`"${d.description||""}"`,(d.bdt_amount||d.amount||d.default_amount).toFixed(2),"BDT",(d.bdt_amount||d.amount||d.default_amount).toFixed(2),V(d.frequency),`"${d.icon||"fas fa-receipt"}"`].join(",")).join(`
`),l=s+o,i=new Blob([l],{type:"text/csv;charset=utf-8;"}),u=document.createElement("a");if(u.download!==void 0){const d=URL.createObjectURL(i);u.setAttribute("href",d),u.setAttribute("download",`Recurring-Expenses-${new Date().toISOString().split("T")[0]}.csv`),u.style.visibility="hidden",document.body.appendChild(u),u.click(),document.body.removeChild(u),g.fire({title:"Export Complete!",text:"Recurring expenses have been exported to CSV.",icon:"success",confirmButtonColor:"#28a745",timer:2e3,timerProgressBar:!0})}},le=s=>({paid:"bg-success text-white",unpaid:"bg-warning text-dark",pending:"bg-info text-white",overdue:"bg-danger text-white",due:"bg-warning text-dark"})[s]||"bg-secondary text-white",re=s=>({paid:"fas fa-check-circle",unpaid:"fas fa-exclamation-circle",pending:"fas fa-clock",overdue:"fas fa-exclamation-triangle",due:"fas fa-calendar-exclamation"})[s]||"fas fa-question-circle",ie=s=>({paid:"Paid",unpaid:"Unpaid",pending:"Pending",overdue:"Overdue",due:"Due"})[s]||s,de=s=>s?new Date(s).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}):"-",ce=async s=>{const o=await g.fire({title:"Mark as Paid",html:`
                    <div class="text-left">
                        <p>Mark <strong>${s.name}</strong> as paid?</p>
                        <div class="form-group mt-3">
                            <label for="paid_date">Payment Date:</label>
                            <input type="date" id="paid_date" class="form-control" value="${new Date().toISOString().split("T")[0]}">
                        </div>
                        <div class="form-group mt-3">
                            <label for="payment_notes">Payment Notes (optional):</label>
                            <textarea id="payment_notes" class="form-control" rows="3" placeholder="Add any payment notes..."></textarea>
                        </div>
                    </div>
                `,icon:"question",showCancelButton:!0,confirmButtonColor:"#28a745",confirmButtonText:"Mark as Paid",cancelButtonText:"Cancel",preConfirm:()=>{const l=document.getElementById("paid_date").value,i=document.getElementById("payment_notes").value;return l?{paidDate:l,paymentNotes:i}:(g.showValidationMessage("Please select a payment date"),!1)}});if(o.isConfirmed)try{if((await T.post(route("admin.finance.recurring.expenses.mark-paid",s.id),{paid_date:o.value.paidDate,payment_notes:o.value.paymentNotes})).data.success){const i=c.value.findIndex(u=>u.id===s.id);i!==-1&&(c.value[i]={...c.value[i],payment_status:"paid",last_paid_date:o.value.paidDate,payment_notes:o.value.paymentNotes}),await g.fire({title:"Success!",text:"Expense marked as paid successfully.",icon:"success",confirmButtonColor:"#28a745",timer:2e3,timerProgressBar:!0})}}catch(l){console.error("Error marking expense as paid:",l),await g.fire({title:"Error!",text:"Failed to mark expense as paid. Please try again.",icon:"error",confirmButtonColor:"#e74a3b"})}},H=async()=>{try{const s=await T.get(route("admin.finance.recurring.expenses.with-status"));s.data.success&&(c.value=s.data.expenses)}catch(s){console.error("Error loading expenses with status:",s),c.value=[...U.expenses||[]]}};return H(),{expenses:c,showAddModal:t,editingExpense:h,saving:n,form:r,USD_TO_BDT_RATE:M,formatNumber:A,formatFrequency:V,getFrequencyColor:K,openAddModal:Q,editExpense:X,closeModal:O,saveExpense:Z,deleteExpense:$,updateConvertedAmount:ee,clearAllExpenses:ae,exportExpenses:oe,selectedExpenses:p,currentPage:w,itemsPerPage:a,totalPages:P,paginatedExpenses:S,visiblePages:W,changePage:te,isAllSelected:I,toggleSelectAll:ne,deleteSelectedExpenses:se,monthlyTotal:z,weeklyTotal:G,yearlyTotal:J,getPaymentStatusColor:le,getPaymentStatusIcon:re,formatPaymentStatus:ie,formatDate:de,markAsPaid:ce,loadExpensesWithStatus:H}}},he={class:"row"},ke={class:"col-lg-12"},Ce={class:"dashboard-settings margin-top-40"},we={class:"card mb-4"},Be={class:"card-header d-flex justify-content-between align-items-center"},Ee={class:"btn-group"},Pe={class:"row mb-4"},Te={class:"col-md-4"},De={class:"card border-primary"},Se={class:"card-body text-center"},Ae={class:"d-flex align-items-center justify-content-center mb-2"},Me={class:"text-primary mb-0"},qe={class:"col-md-4"},Fe={class:"card border-success"},Ne={class:"card-body text-center"},Re={class:"d-flex align-items-center justify-content-center mb-2"},Ue={class:"text-success mb-0"},Ie={class:"col-md-4"},Ve={class:"card border-danger"},je={class:"card-body text-center"},Oe={class:"d-flex align-items-center justify-content-center mb-2"},He={class:"text-danger mb-0"},Ye={class:"card"},Le={class:"card-header d-flex justify-content-between align-items-center"},We={class:"d-flex align-items-center gap-3"},ze={key:0,class:"form-check"},Ge=["checked"],Je={class:"text-muted"},Ke={class:"card-body"},Qe={class:"table-responsive d-none d-md-block"},Xe={class:"table table-striped"},Ze={class:"form-check"},$e=["value","id"],et={class:"badge bg-warning text-dark"},tt={key:0,class:"text-muted"},nt={key:1,class:"text-muted"},st={class:"btn-group",role:"group"},at=["onClick"],ot=["onClick"],lt=["onClick"],rt={key:0},it={class:"d-md-none"},dt={key:0,class:"text-center text-muted py-5"},ct={class:"card border-start border-warning border-3"},ut={class:"card-body p-3"},mt={class:"d-flex align-items-start gap-3"},ft={class:"form-check"},vt=["value","id"],bt={class:"expense-info flex-grow-1"},gt={class:"d-flex align-items-center mb-2"},pt={class:"mb-0 expense-name fw-bold"},yt={class:"expense-details"},xt={key:0,class:"text-muted mb-2 small"},_t={class:"d-flex justify-content-between align-items-center mb-2"},ht={class:"expense-amount"},kt={class:"badge bg-warning text-dark fs-6"},Ct={class:"d-flex justify-content-between align-items-center flex-wrap gap-2"},wt={class:"payment-status-mobile"},Bt={key:0,class:"next-due-mobile"},Et={class:"text-muted"},Pt={class:"expense-actions"},Tt=["onClick"],Dt={class:"d-flex gap-2"},St=["onClick"],At=["onClick"],Mt={key:0,class:"d-flex justify-content-between align-items-center mt-4"},qt={class:"text-muted"},Ft={"aria-label":"Recurring expenses pagination"},Nt={class:"pagination pagination-sm mb-0"},Rt=["disabled"],Ut=["onClick"],It=["disabled"],Vt={class:"modal-header"},jt={class:"modal-body"},Ot={class:"row"},Ht={class:"col-md-6 mb-3"},Yt={class:"col-md-6 mb-3"},Lt={class:"input-group"},Wt={key:0,class:"form-text text-info"},zt={key:1,class:"form-text text-muted"},Gt={class:"row"},Jt={class:"col-md-6 mb-3"},Kt={class:"col-md-6 mb-3"},Qt={class:"mb-3"},Xt={class:"mb-3"},Zt={class:"d-flex justify-content-end gap-2"},$t=["disabled"];function en(U,t,h,n,c,p){const w=fe("Head");return v(),f(q,null,[ve(w,{title:"Recurring Expenses Management"}),e("div",he,[e("div",ke,[e("div",Ce,[e("div",we,[e("div",Be,[t[26]||(t[26]=e("h4",{class:"mb-0"},[e("i",{class:"fas fa-repeat me-2"}),y(" Recurring Expenses Management ")],-1)),e("div",Ee,[e("button",{onClick:t[0]||(t[0]=(...a)=>n.openAddModal&&n.openAddModal(...a)),class:"btn btn-primary"},[...t[22]||(t[22]=[e("i",{class:"fas fa-plus"},null,-1),y(" Add Recurring Expense ",-1)])]),n.selectedExpenses.length>0?(v(),f("button",{key:0,onClick:t[1]||(t[1]=(...a)=>n.deleteSelectedExpenses&&n.deleteSelectedExpenses(...a)),class:"btn btn-danger"},[t[23]||(t[23]=e("i",{class:"fas fa-trash"},null,-1)),y(" Delete Selected ("+m(n.selectedExpenses.length)+") ",1)])):x("",!0),n.expenses.length>0?(v(),f("button",{key:1,onClick:t[2]||(t[2]=(...a)=>n.exportExpenses&&n.exportExpenses(...a)),class:"btn btn-outline-success"},[...t[24]||(t[24]=[e("i",{class:"fas fa-download"},null,-1),y(" Export CSV ",-1)])])):x("",!0),n.expenses.length>0?(v(),f("button",{key:2,onClick:t[3]||(t[3]=(...a)=>n.clearAllExpenses&&n.clearAllExpenses(...a)),class:"btn btn-outline-danger"},[...t[25]||(t[25]=[e("i",{class:"fas fa-trash-alt"},null,-1),y(" Clear All ",-1)])])):x("",!0)])]),t[27]||(t[27]=e("div",{class:"card-body"},[e("p",{class:"text-muted"}," Manage monthly recurring expenses like server bills, office rent, subscriptions, etc. These will automatically appear in your balance sheet each month. ")],-1))]),e("div",Pe,[e("div",Te,[e("div",De,[e("div",Se,[e("div",Ae,[t[29]||(t[29]=e("i",{class:"fas fa-calendar-day text-primary fs-3 me-2"},null,-1)),e("div",null,[t[28]||(t[28]=e("h6",{class:"text-muted mb-0"},"Monthly Total",-1)),e("h4",Me,"৳"+m(n.formatNumber(n.monthlyTotal)),1)])]),t[30]||(t[30]=e("small",{class:"text-muted"},"All expenses converted to monthly basis",-1))])])]),e("div",qe,[e("div",Fe,[e("div",Ne,[e("div",Re,[t[32]||(t[32]=e("i",{class:"fas fa-calendar-week text-success fs-3 me-2"},null,-1)),e("div",null,[t[31]||(t[31]=e("h6",{class:"text-muted mb-0"},"Weekly Total",-1)),e("h4",Ue,"৳"+m(n.formatNumber(n.weeklyTotal)),1)])]),t[33]||(t[33]=e("small",{class:"text-muted"},"Total weekly recurring costs",-1))])])]),e("div",Ie,[e("div",Ve,[e("div",je,[e("div",Oe,[t[35]||(t[35]=e("i",{class:"fas fa-calendar-alt text-danger fs-3 me-2"},null,-1)),e("div",null,[t[34]||(t[34]=e("h6",{class:"text-muted mb-0"},"Yearly Total",-1)),e("h4",He,"৳"+m(n.formatNumber(n.yearlyTotal)),1)])]),t[36]||(t[36]=e("small",{class:"text-muted"},"Total yearly recurring costs",-1))])])])]),e("div",Ye,[e("div",Le,[t[38]||(t[38]=e("h5",{class:"mb-0"},"Current Recurring Expenses",-1)),e("div",We,[n.expenses.length>0?(v(),f("div",ze,[e("input",{class:"form-check-input",type:"checkbox",checked:n.isAllSelected,onChange:t[4]||(t[4]=(...a)=>n.toggleSelectAll&&n.toggleSelectAll(...a)),id:"selectAllRecurring"},null,40,Ge),t[37]||(t[37]=e("label",{class:"form-check-label",for:"selectAllRecurring"}," Select All ",-1))])):x("",!0),e("span",Je,m(n.paginatedExpenses.length)+" of "+m(n.expenses.length)+" items",1)])]),e("div",Ke,[e("div",Qe,[e("table",Xe,[t[43]||(t[43]=e("thead",null,[e("tr",null,[e("th",{width:"40"},[e("i",{class:"fas fa-check-square text-muted"})]),e("th",null,"Name"),e("th",null,"Description"),e("th",null,"Amount & Currency"),e("th",null,"Frequency"),e("th",null,"Payment Status"),e("th",null,"Next Due"),e("th",null,"Actions")])],-1)),e("tbody",null,[(v(!0),f(q,null,N(n.paginatedExpenses,a=>(v(),f("tr",{key:a.id},[e("td",null,[e("div",Ze,[C(e("input",{class:"form-check-input",type:"checkbox",value:a.id,"onUpdate:modelValue":t[5]||(t[5]=r=>n.selectedExpenses=r),id:`recurring-expense-${a.id}`},null,8,$e),[[Y,n.selectedExpenses]])])]),e("td",null,[e("strong",null,m(a.name),1)]),e("td",null,m(a.description||"-"),1),e("td",null,[e("span",et," ৳"+m(n.formatNumber(a.bdt_amount||a.amount||a.default_amount)),1)]),e("td",null,[e("span",{class:_(["badge",n.getFrequencyColor(a.frequency)])},m(n.formatFrequency(a.frequency)),3)]),e("td",null,[e("span",{class:_(["badge",n.getPaymentStatusColor(a.payment_status)])},[e("i",{class:_(n.getPaymentStatusIcon(a.payment_status))},null,2),y(" "+m(n.formatPaymentStatus(a.payment_status)),1)],2)]),e("td",null,[a.next_due_date?(v(),f("small",tt,m(n.formatDate(a.next_due_date)),1)):(v(),f("small",nt,"-"))]),e("td",null,[e("div",st,[a.payment_status!=="paid"?(v(),f("button",{key:0,onClick:r=>n.markAsPaid(a),class:"btn btn-sm btn-success",title:"Mark as Paid"},[...t[39]||(t[39]=[e("i",{class:"fas fa-check"},null,-1)])],8,at)):x("",!0),e("button",{onClick:r=>n.editExpense(a),class:"btn btn-sm btn-outline-primary"},[...t[40]||(t[40]=[e("i",{class:"fas fa-edit"},null,-1)])],8,ot),e("button",{onClick:r=>n.deleteExpense(a.id),class:"btn btn-sm btn-outline-danger"},[...t[41]||(t[41]=[e("i",{class:"fas fa-trash"},null,-1)])],8,lt)])])]))),128)),n.expenses.length===0?(v(),f("tr",rt,[...t[42]||(t[42]=[e("td",{colspan:"8",class:"text-center text-muted"},' No recurring expenses found. Click "Add Recurring Expense" to get started. ',-1)])])):x("",!0)])])]),e("div",it,[n.expenses.length===0?(v(),f("div",dt,[...t[44]||(t[44]=[e("i",{class:"fas fa-receipt fa-3x mb-3"},null,-1),e("p",null,[y("No recurring expenses found."),e("br"),y('Click "Add Recurring Expense" to get started.')],-1)])])):x("",!0),(v(!0),f(q,null,N(n.paginatedExpenses,a=>(v(),f("div",{key:a.id,class:"mobile-expense-card mb-3"},[e("div",ct,[e("div",ut,[e("div",mt,[e("div",ft,[C(e("input",{class:"form-check-input mobile-checkbox",type:"checkbox",value:a.id,"onUpdate:modelValue":t[6]||(t[6]=r=>n.selectedExpenses=r),id:`mobile-expense-${a.id}`},null,8,vt),[[Y,n.selectedExpenses]])]),e("div",bt,[e("div",gt,[e("i",{class:_([a.icon||"fas fa-receipt","text-primary me-2 fs-5"])},null,2),e("h6",pt,m(a.name),1)]),e("div",yt,[a.description?(v(),f("p",xt,[t[45]||(t[45]=e("i",{class:"fas fa-info-circle me-1"},null,-1)),y(" "+m(a.description),1)])):x("",!0),e("div",_t,[e("div",ht,[e("span",kt," ৳"+m(n.formatNumber(a.bdt_amount||a.amount||a.default_amount)),1)]),e("span",{class:_(["badge",n.getFrequencyColor(a.frequency)])},m(n.formatFrequency(a.frequency)),3)]),e("div",Ct,[e("div",wt,[e("span",{class:_(["badge",n.getPaymentStatusColor(a.payment_status)])},[e("i",{class:_([n.getPaymentStatusIcon(a.payment_status),"me-1"])},null,2),y(" "+m(n.formatPaymentStatus(a.payment_status)),1)],2)]),a.next_due_date?(v(),f("div",Bt,[e("small",Et,[t[46]||(t[46]=e("i",{class:"fas fa-calendar-alt me-1"},null,-1)),y(" Due: "+m(n.formatDate(a.next_due_date)),1)])])):x("",!0)])])]),e("div",Pt,[a.payment_status!=="paid"?(v(),f("button",{key:0,onClick:r=>n.markAsPaid(a),class:"btn btn-success btn-sm w-100 mb-2 mobile-btn-paid",title:"Mark as Paid"},[...t[47]||(t[47]=[e("i",{class:"fas fa-check me-1"},null,-1),e("span",{class:"d-none d-sm-inline"},"Mark Paid",-1),e("span",{class:"d-sm-none"},"Paid",-1)])],8,Tt)):x("",!0),e("div",Dt,[e("button",{onClick:r=>n.editExpense(a),class:"btn btn-outline-primary btn-sm mobile-btn flex-fill"},[...t[48]||(t[48]=[e("i",{class:"fas fa-edit"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Edit",-1)])],8,St),e("button",{onClick:r=>n.deleteExpense(a.id),class:"btn btn-outline-danger btn-sm mobile-btn flex-fill"},[...t[49]||(t[49]=[e("i",{class:"fas fa-trash"},null,-1),e("span",{class:"d-none d-sm-inline ms-1"},"Delete",-1)])],8,At)])])])])])]))),128))]),n.expenses.length>n.itemsPerPage?(v(),f("div",Mt,[e("div",qt," Showing "+m((n.currentPage-1)*n.itemsPerPage+1)+" to "+m(Math.min(n.currentPage*n.itemsPerPage,n.expenses.length))+" of "+m(n.expenses.length)+" entries ",1),e("nav",Ft,[e("ul",Nt,[e("li",{class:_(["page-item",{disabled:n.currentPage===1}])},[e("button",{class:"page-link",onClick:t[7]||(t[7]=a=>n.changePage(n.currentPage-1)),disabled:n.currentPage===1},[...t[50]||(t[50]=[e("i",{class:"fas fa-chevron-left"},null,-1)])],8,Rt)],2),(v(!0),f(q,null,N(n.visiblePages,a=>(v(),f("li",{key:a,class:_(["page-item",{active:a===n.currentPage}])},[e("button",{class:"page-link",onClick:r=>n.changePage(a)},m(a),9,Ut)],2))),128)),e("li",{class:_(["page-item",{disabled:n.currentPage===n.totalPages}])},[e("button",{class:"page-link",onClick:t[8]||(t[8]=a=>n.changePage(n.currentPage+1)),disabled:n.currentPage===n.totalPages},[...t[51]||(t[51]=[e("i",{class:"fas fa-chevron-right"},null,-1)])],8,It)],2)])])])):x("",!0)])]),n.showAddModal||n.editingExpense?(v(),f("div",{key:0,class:"modal-overlay",onClick:t[21]||(t[21]=(...a)=>n.closeModal&&n.closeModal(...a))},[e("div",{class:"modal-content",onClick:t[20]||(t[20]=L(()=>{},["stop"]))},[e("div",Vt,[e("h5",null,m(n.editingExpense?"Edit":"Add")+" Recurring Expense",1),e("button",{onClick:t[9]||(t[9]=(...a)=>n.closeModal&&n.closeModal(...a)),class:"btn-close"},"×")]),e("div",jt,[e("form",{onSubmit:t[19]||(t[19]=L((...a)=>n.saveExpense&&n.saveExpense(...a),["prevent"]))},[e("div",Ot,[e("div",Ht,[t[52]||(t[52]=e("label",{class:"form-label"},"Name *",-1)),C(e("input",{"onUpdate:modelValue":t[10]||(t[10]=a=>n.form.name=a),type:"text",class:"form-control",required:"",placeholder:"e.g., Office Rent, Server Bills"},null,512),[[F,n.form.name]])]),e("div",Yt,[t[56]||(t[56]=e("label",{class:"form-label"},"Default Amount *",-1)),e("div",Lt,[C(e("select",{"onUpdate:modelValue":t[11]||(t[11]=a=>n.form.currency=a),class:"input-group-text",style:{"border-right":"0",background:"#e9ecef"}},[...t[53]||(t[53]=[e("option",{value:"BDT"},"৳",-1),e("option",{value:"USD"},"$",-1)])],512),[[R,n.form.currency]]),C(e("input",{"onUpdate:modelValue":t[12]||(t[12]=a=>n.form.default_amount=a),type:"number",class:"form-control",step:"0.01",min:"0",required:"",placeholder:"0.00",onInput:t[13]||(t[13]=(...a)=>n.updateConvertedAmount&&n.updateConvertedAmount(...a))},null,544),[[F,n.form.default_amount,void 0,{number:!0}]])]),n.form.currency==="USD"?(v(),f("div",Wt,[e("small",null,[t[54]||(t[54]=e("i",{class:"fas fa-exchange-alt me-1"},null,-1)),y(" Converted: ৳"+m(n.formatNumber(n.form.default_amount*n.USD_TO_BDT_RATE))+" BDT (1 USD = "+m(n.USD_TO_BDT_RATE)+" BDT) ",1)])])):(v(),f("div",zt,[...t[55]||(t[55]=[e("small",null,"Amount in Bangladeshi Taka (BDT)",-1)])]))])]),e("div",Gt,[e("div",Jt,[t[58]||(t[58]=e("label",{class:"form-label"},"Icon",-1)),C(e("select",{"onUpdate:modelValue":t[14]||(t[14]=a=>n.form.icon=a),class:"form-select"},[...t[57]||(t[57]=[be('<option value="fas fa-receipt" data-v-a26b9f00>Receipt (Default)</option><option value="fas fa-server" data-v-a26b9f00>Server</option><option value="fas fa-building" data-v-a26b9f00>Building/Rent</option><option value="fas fa-bolt" data-v-a26b9f00>Electricity</option><option value="fas fa-wifi" data-v-a26b9f00>Internet/WiFi</option><option value="fas fa-tools" data-v-a26b9f00>Tools/Software</option><option value="fas fa-broom" data-v-a26b9f00>Cleaning</option><option value="fas fa-shopping-cart" data-v-a26b9f00>Supplies</option><option value="fas fa-shield-alt" data-v-a26b9f00>Insurance</option><option value="fas fa-bullhorn" data-v-a26b9f00>Marketing</option><option value="fas fa-credit-card" data-v-a26b9f00>Payment/Subscription</option>',11)])],512),[[R,n.form.icon]])]),e("div",Kt,[t[60]||(t[60]=e("label",{class:"form-label"},"Frequency",-1)),C(e("select",{"onUpdate:modelValue":t[15]||(t[15]=a=>n.form.frequency=a),class:"form-select",required:""},[...t[59]||(t[59]=[e("option",{value:"monthly"},"Monthly",-1),e("option",{value:"yearly"},"Yearly",-1),e("option",{value:"weekly"},"Weekly",-1)])],512),[[R,n.form.frequency]])])]),e("div",Qt,[t[61]||(t[61]=e("label",{class:"form-label"},"Description",-1)),C(e("textarea",{"onUpdate:modelValue":t[16]||(t[16]=a=>n.form.description=a),class:"form-control",rows:"3",placeholder:"Brief description of this expense"},null,512),[[F,n.form.description]])]),e("div",Xt,[t[62]||(t[62]=e("label",{class:"form-label"},"Tooltip (Help Text)",-1)),C(e("input",{"onUpdate:modelValue":t[17]||(t[17]=a=>n.form.tooltip=a),type:"text",class:"form-control",placeholder:"Help text shown to users"},null,512),[[F,n.form.tooltip]])]),e("div",Zt,[e("button",{type:"button",onClick:t[18]||(t[18]=(...a)=>n.closeModal&&n.closeModal(...a)),class:"btn btn-secondary"}," Cancel "),e("button",{type:"submit",class:"btn btn-primary",disabled:n.saving},[t[63]||(t[63]=e("i",{class:"fas fa-save"},null,-1)),y(" "+m(n.saving?"Saving...":"Save"),1)],8,$t)])],32)])])])):x("",!0)])])])],64)}const on=xe(_e,[["render",en],["__scopeId","data-v-a26b9f00"]]);export{on as default};

import{A as P}from"./AdminMaster-VqxiT326.js";import{H as I,L as B,K as W,u as U,l as _,m as T,c as d,a as m,b as e,g as O,w as H,F as g,p as S,e as i,t as l,r as y,o as p,h as F}from"./app-UUZCODpM.js";import{B as R}from"./Button-UPJdeFFj.js";import{I as G}from"./Input-G5JjSfuq.js";import{S as J}from"./Select-T8bYViea.js";import{T as j}from"./Textarea-zufIF7dK.js";import{s as K}from"./vue3-datepicker.esm-60H0LGBZ.js";import"./sweetalert2.all-slebRwNb.js";import{h as X}from"./html2pdf-IO_Ki8Vt.js";import{_ as Y}from"./_plugin-vue_export-helper-x3n3nnut.js";const q={layout:P,components:{Button:R,Input:G,Select:J,Textarea:j,Head:I,Datepicker:K,Link:B,VueDatePicker:W},setup(){const f=U().props.value.all_employee,o=_({name:"Name",salary:0,category:"Designation",designation:"Designation"}),C=_(0),s=_(0),E=_(0),b=_(0),D=_(0),h=_(0),v=_(0),x=_(0),a=T({employee_id:null,month:null,extraEarningFields:[{description:null,amount:0}],extraDeductionFields:[{description:null,amount:0}]});function k(){a.extraEarningFields.push({description:null,amount:0})}function t(){a.extraDeductionFields.push({description:null,amount:0})}function r(c){a.extraEarningFields.length>1&&a.extraEarningFields.splice(a.extraEarningFields.indexOf(c),1)}function A(c){a.extraDeductionFields.length>1&&a.extraDeductionFields.splice(a.extraDeductionFields.indexOf(c),1)}function M(){let c=o.value.name+"-"+V(a.month)+"-salary-slip.pdf";X(document.getElementById("element-to-convert"),{margin:1,filename:c}),axios.post(route("admin.employee.salary.slip.create"),a)}function N(){axios.post(route("admin.employee.details",a.employee_id),{month:a.month}).then(c=>{a.extraEarningFields=[{description:null,amount:0}],a.extraDeductionFields=[{description:null,amount:0}];let n=c.data,u=c.data.details;o.value={name:u.name,salary:u.salary,category:u.designation,designation:u.designation},C.value=n.attenadnceCount,s.value=n.holidayCount,E.value=n.leaveCount,b.value=n.sickLeaveCount,D.value=n.paidLeaveCount,a.extraEarningFields.push({description:`${n.attenadnceCount} Days Lunch`,amount:parseInt(n.attenadnceCount)*35});const w=n.leaveCount>2?2:n.leaveCount;a.extraDeductionFields.push({description:`${w} Days Sick Leave`,amount:0}),n.leaveCount>2&&a.extraDeductionFields.push({description:`${n.leaveCount-2} Days Leave`,amount:u.salary/24*(n.leaveCount-2)}),n.AdvanceSalary>0&&a.extraDeductionFields.push({description:"Advance Salary",amount:n.AdvanceSalary}),L()})}function V(c){let n=["January","February","March","April","May","June","July","August","September","October","November","December"];return c!=null?n[new Date(c).getMonth()]:""}function L(){let c=0;a.extraEarningFields.map(u=>{u.amount>0&&(c+=parseFloat(u.amount))});let n=0;a.extraDeductionFields.map(u=>{u.amount>0&&(n+=parseFloat(u.amount))}),h.value=c>0?parseFloat(c):0,v.value=n>0?parseFloat(n):0,o.salary!=="undefined"&&(h.value+=parseFloat(o.value.salary)),x.value=parseFloat(h.value)-parseFloat(v.value)}return{employeeList:f,salarySlipData:a,addMoreEarningField:k,addMoreDeductionField:t,removeEarningField:r,removeDeductionField:A,exportToPDF:M,selectedEmployee:o,changeEmployeeSelect:N,holidayCount:s,leaveCount:E,sickLeaveCount:b,paidLeaveCount:D,attenadnceCount:C,getSelectedMonthName:V,grossEarning:h,grossDeduction:v,payableAmount:x,calculateSalary:L}}},z={class:"row"},Q={class:"col-lg-12"},Z={class:"header-wrap d-flex justify-content-between"},$=e("h2",{class:"dashboards-title margin-bottom-40"},"Create Salary Slip",-1),ee={class:"btn-wrp"},se={class:"row"},te={class:"col-lg-4"},ae={class:"single-info-input margin-top-30"},oe=e("label",{class:"info-title"},"Salary Month",-1),ne=e("span",{class:"info-text"},"Select Month First",-1),le={class:"repeaterFieldWarp"},ie=e("h4",{class:"repeater-title"},"Extra Earning Fields",-1),re={class:"repeater-inner-wrap"},ce={class:"actionButtonWrap"},de=e("i",{class:"fas fa-plus"},null,-1),pe=[de],ue=["onClick"],_e=e("i",{class:"fas fa-times"},null,-1),me=[_e],he={class:"repeaterFieldWarp"},ye=e("h4",{class:"repeater-title"},"Extra Deduction Fields",-1),ve={class:"repeater-inner-wrap"},ge={class:"actionButtonWrap"},fe=e("i",{class:"fas fa-plus"},null,-1),De=[fe],xe=["onClick"],Se=e("i",{class:"fas fa-times"},null,-1),Fe=[Se],Ce={class:"col-lg-8"},Ee={class:"head-raw margin-top-40 margin-left-60"},be=e("h4",null,"Color Explanation",-1),ke={class:"color-explanation"},Ve={class:"bg-success"},Le={class:"badge"},Ae={class:"holiday"},Me={class:"badge"},Ne={class:"leave"},we={class:"badge"},Pe={class:"sick-leave"},Ie={class:"badge"},Be={class:"paid-leave"},We={class:"badge"},Ue={id:"element-to-convert"},Te={class:"salarySlipPdfOuterWrapper"},Oe={class:"headerPart"},He={class:"subjectWarp"},Re={class:"period"},Ge={class:"employeeInfoWrap"},Je=e("strong",null,"Name: ",-1),je=e("strong",null,"Department:",-1),Ke={class:"tableWithCalculation table-responsive"},Xe={class:"salary-sheet"},Ye={class:"salary-sheet-flex"},qe={class:"salary-sheet-item"},ze={class:"salary-sheet-contents"},Qe={class:"salary-sheet-contents-list"},Ze=e("li",{class:"salary-sheet-list salary-sheet-head"},[e("span",{class:"list-title left"},"EARNINGS"),i(),e("span",{class:"list-title list-para right"}," PER MONTH ")],-1),$e={class:"salary-sheet-list"},es=e("span",{class:"list-para left"},"Basic Salary",-1),ss={class:"list-para right"},ts={key:0,class:"list-para left"},as={key:1,class:"list-para right"},os={class:"salary-sheet-item"},ns={class:"salary-sheet-contents"},ls={class:"salary-sheet-contents-list"},is=e("li",{class:"salary-sheet-list salary-sheet-head"},[e("span",{class:"list-title left"},"DEDUCTIONS"),i(),e("span",{class:"list-title list-para right"}," PER MONTH ")],-1),rs={key:0,class:"list-para left"},cs={key:1,class:"list-para right"},ds={class:"salary-sheet-gross"},ps={class:"salary-sheet-gross-item"},us={class:"gross-list"},_s=e("span",{class:"gross-para left"},"Gross Earnings(A)",-1),ms={class:"gross-para right"},hs={class:"salary-sheet-gross-item"},ys={class:"gross-list"},vs=e("span",{class:"gross-para left"},"Gross Deductions(B)",-1),gs={class:"gross-para right"},fs={class:"salary-sheet-gross"},Ds={class:"salary-sheet-gross-item"},xs={class:"gross-list"},Ss=e("span",{class:"gross-para left"},"Net Salary Payable(A-B)",-1),Fs={class:"gross-para right"},Cs={class:"salary-sheet-gross"},Es={class:"salary-sheet-gross-item"},bs={class:"gross-list"},ks=e("span",{class:"gross-para left"},"Net Salary Payable(in words)",-1),Vs={class:"gross-para right"},Ls={class:"footerPartWrapper"},As=e("div",{class:"signature"},[e("span",{class:"signature"},"Signature"),e("h2",null,"Sharifur Rahman"),e("span",{class:"designation"},"Ceo - Xgenious")],-1),Ms={class:"signature"},Ns=e("span",{class:"signature"},"Signature",-1),ws={class:"designation"},Ps={class:"btn-wrapper margin-left-60"};function Is(f,o,C,s,E,b){const D=y("Head"),h=y("Link"),v=y("VueDatePicker"),x=y("Select"),a=y("Input"),k=y("Button");return p(),d(g,null,[m(D,{title:"Create Salary Slip"}),e("div",z,[e("div",Q,[e("div",Z,[$,e("div",ee,[m(h,{class:"btn btn-info m-1",href:f.route("admin.employee.salary.slip")},{default:O(()=>[i("All Salary Slip")]),_:1},8,["href"])])])]),e("div",se,[e("div",te,[e("form",{onSubmit:o[7]||(o[7]=H(()=>{},["prevent"]))},[e("div",ae,[oe,m(v,{modelValue:s.salarySlipData.month,"onUpdate:modelValue":o[0]||(o[0]=t=>s.salarySlipData.month=t)},null,8,["modelValue"]),ne]),m(x,{title:"Employee",onChange:o[1]||(o[1]=t=>s.changeEmployeeSelect()),modelValue:s.salarySlipData.employee_id,"onUpdate:modelValue":o[2]||(o[2]=t=>s.salarySlipData.employee_id=t),options:s.employeeList},null,8,["modelValue","options"]),e("div",le,[ie,e("div",re,[(p(!0),d(g,null,S(s.salarySlipData.extraEarningFields,t=>(p(),d("div",{class:"individualItemWrapper",key:t.index},[m(a,{type:"text",title:"Description",modelValue:t.description,"onUpdate:modelValue":r=>t.description=r},null,8,["modelValue","onUpdate:modelValue"]),m(a,{type:"number",min:"0",onInput:o[3]||(o[3]=r=>s.calculateSalary()),title:"Amount",modelValue:t.amount,"onUpdate:modelValue":r=>t.amount=r},null,8,["modelValue","onUpdate:modelValue"]),e("div",ce,[e("span",{class:"addMore",onClick:o[4]||(o[4]=r=>s.addMoreEarningField())},pe),e("span",{class:"removeItem",onClick:r=>s.removeEarningField(t)},me,8,ue)])]))),128))])]),e("div",he,[ye,e("div",ve,[(p(!0),d(g,null,S(s.salarySlipData.extraDeductionFields,t=>(p(),d("div",{class:"individualItemWrapper",key:t.index},[m(a,{type:"text",title:"Description",modelValue:t.description,"onUpdate:modelValue":r=>t.description=r},null,8,["modelValue","onUpdate:modelValue"]),m(a,{type:"number",min:"0",onInput:o[5]||(o[5]=r=>s.calculateSalary()),title:"Amount",modelValue:t.amount,"onUpdate:modelValue":r=>t.amount=r},null,8,["modelValue","onUpdate:modelValue"]),e("div",ge,[e("span",{class:"addMore",onClick:o[6]||(o[6]=r=>s.addMoreDeductionField())},De),e("span",{class:"removeItem",onClick:r=>s.removeDeductionField(t)},Fe,8,xe)])]))),128))])])],32)]),e("div",Ce,[e("div",Ee,[be,e("ul",ke,[e("li",Ve,[i("Attendance "),e("span",Le,l(s.attenadnceCount),1)]),e("li",Ae,[i("Holiday "),e("span",Me,l(s.holidayCount),1)]),e("li",Ne,[i("leave"),e("span",we,l(s.leaveCount),1)]),e("li",Pe,[i("Sick Leave "),e("span",Ie,l(s.sickLeaveCount),1)]),e("li",Be,[i("Paid Leave "),e("span",We,l(s.paidLeaveCount),1)])])]),e("div",Ue,[e("div",Te,[e("div",Oe,[e("div",He,[e("p",null,[i("Payslip for the month of "),e("span",Re,l(s.getSelectedMonthName(s.salarySlipData.month)),1),i(" "+l(new Date().getFullYear()),1)])])]),e("div",Ge,[e("h3",null,[Je,i(" "+l(s.selectedEmployee.name),1)]),e("h4",null,[je,i(" "+l(s.selectedEmployee.category),1)])]),e("div",Ke,[e("div",Xe,[e("div",Ye,[e("div",qe,[e("div",ze,[e("ul",Qe,[Ze,e("li",$e,[es,i(),e("span",ss,l(parseFloat(s.selectedEmployee.salary).toFixed(2)),1)]),(p(!0),d(g,null,S(s.salarySlipData.extraEarningFields,t=>(p(),d("li",{class:"salary-sheet-list",key:t.index},[t.description!==null?(p(),d("span",ts,l(t.description),1)):F("",!0),t.description!==null?(p(),d("span",as,l(t.amount>0?parseFloat(t.amount).toFixed(2):0),1)):F("",!0)]))),128))])])]),e("div",os,[e("div",ns,[e("ul",ls,[is,(p(!0),d(g,null,S(s.salarySlipData.extraDeductionFields,t=>(p(),d("li",{class:"salary-sheet-list",key:t.index},[t.description!==null?(p(),d("span",rs,l(t.description),1)):F("",!0),t.description!==null?(p(),d("span",cs,l(t.amount>0?parseFloat(t.amount).toFixed(2):0),1)):F("",!0)]))),128))])])])]),e("div",ds,[e("div",ps,[e("div",us,[_s,i(),e("span",ms,l(parseFloat(s.grossEarning).toFixed(2)),1)])]),e("div",hs,[e("div",ys,[vs,i(),e("span",gs,l(parseFloat(s.grossDeduction).toFixed(2)),1)])])]),e("div",fs,[e("div",Ds,[e("div",xs,[Ss,i(),e("span",Fs,l(parseFloat(s.payableAmount).toFixed(2)),1)])])]),e("div",Cs,[e("div",Es,[e("div",bs,[ks,i(),e("span",Vs,l(f.numberToWord(s.payableAmount))+" Tk Only",1)])])])])]),e("div",Ls,[As,e("div",Ms,[Ns,e("h2",null,l(s.selectedEmployee.name),1),e("span",ws,l(s.selectedEmployee.designation),1)])])])]),e("div",Ps,[m(k,{type:"button",onClick:s.exportToPDF,"button-text":"Save and Download PDF"},null,8,["onClick"])])])])])],64)}const Ks=Y(q,[["render",Is]]);export{Ks as default};

import{A as D}from"./AdminMaster-DauEAptr.js";import{H as b,L as k,r as s,c as S,o as c,a as o,b as l,g as V,f as L,w as B,q as v,h as f,F as A,u as g,m as E,l as w}from"./app-msVezWLg.js";import{I as T}from"./Input-iQJ4CrlB.js";import{B as x}from"./Button-makbHBJF.js";import{S as H}from"./Select-1zH7jmkW.js";import{M as h}from"./MediaUploader-DIBy6L5S.js";import{s as I}from"./vue3-datepicker.esm-3jNex1Qu.js";import{S as i}from"./sweetalert2.esm.all-acGi8jXx.js";import{V as U}from"./ValidationErrors-DR8qI2Pb.js";import{_ as F}from"./_plugin-vue_export-helper-DlAUqK2U.js";const N={name:"ExtractByPerson",layout:D,components:{Select:H,Link:k,Input:T,MediaUploader:h,Datepicker:I,Button:x,ValidationErrors:U,Head:b},setup(){const d=g().props.value.csv_headers,t=g().props.value.employees,u=g().props.value.attendance,e=E({attendance_report_id:u.id,csv_column:null,column_value:null,attendance_column_value:null,attendance_type_column_value:null,employee_id:null,importType:"bulk"});function y(){e.post(route("admin.employee.attendance.log.from.csv"),{onSuccess:n=>{e.reset("csv_column","employee_id","column_value"),i.fire("Success","Attendance Log Insert","success")}})}const p=w([{label:"select csv Column first",value:null}]),_=[{label:"Bulk Import",value:"bulk"},{label:"Individual Import",value:"individual"}];function m(){e.csv_column===null&&i.fire("Warning","Select Csv Column First","warning"),axios.post(route("admin.employee.attendance.csv.column.value"),{attendance_report_id:e.attendance_report_id,csv_column:e.csv_column,column_value:e.column_value}).then(n=>{Object.keys(n.data).length>1?p.value=n.data:i.fire("Error!","no data found in selected column","warning")}).catch(n=>{i.fire("Error!",n.message,"warning")})}return{columnValueData:p,createAttendanceLog:y,getCsvColumnValues:m,attendanceLogData:e,csvHeader:d,attendance:u,employees:t,importTypes:_}}},P={class:"row"},M={class:"col-lg-12"},R={class:"dashboard-settings margin-top-40"},j={class:"header-wrap d-flex justify-content-between"},O={class:"btn-wrapper"};function q(d,t,u,e,y,p){const _=s("Head"),m=s("Link"),n=s("ValidationErrors"),r=s("Select"),C=s("Button");return c(),S(A,null,[o(_,{title:"Extract Attendance Report By Person"}),l("div",P,[l("div",M,[l("div",R,[l("div",j,[t[9]||(t[9]=l("h2",{class:"dashboards-title margin-bottom-40"},"Extract Attendance Report By Person",-1)),l("div",O,[o(m,{class:"btn btn-info m-2",href:d.route("admin.employee.attendance")},{default:V(()=>t[7]||(t[7]=[L("All Attendance Reports")])),_:1,__:[7]},8,["href"]),o(m,{class:"btn btn-secondary m-2",href:d.route("admin.employee.attendance.create")},{default:V(()=>t[8]||(t[8]=[L("Create Attendance Reports")])),_:1,__:[8]},8,["href"])])]),o(n),l("form",{onSubmit:t[6]||(t[6]=B(()=>{},["prevent"]))},[o(r,{title:"Employee",modelValue:e.attendanceLogData.importType,"onUpdate:modelValue":t[0]||(t[0]=a=>e.attendanceLogData.importType=a),options:e.importTypes},null,8,["modelValue","options"]),e.attendanceLogData.importType==="individual"?(c(),v(r,{key:0,title:"Employee",modelValue:e.attendanceLogData.employee_id,"onUpdate:modelValue":t[1]||(t[1]=a=>e.attendanceLogData.employee_id=a),options:e.employees},null,8,["modelValue","options"])):f("",!0),e.attendanceLogData.importType==="individual"?(c(),v(r,{key:1,title:"CSV Column For Search Name",onChange:e.getCsvColumnValues,modelValue:e.attendanceLogData.csv_column,"onUpdate:modelValue":t[2]||(t[2]=a=>e.attendanceLogData.csv_column=a),options:e.csvHeader},null,8,["onChange","modelValue","options"])):f("",!0),e.attendanceLogData.importType==="individual"?(c(),v(r,{key:2,title:"Column Value For Name",modelValue:e.attendanceLogData.column_value,"onUpdate:modelValue":t[3]||(t[3]=a=>e.attendanceLogData.column_value=a),options:e.columnValueData},null,8,["modelValue","options"])):f("",!0),o(r,{title:"CSV Attendance Column Date/Time",modelValue:e.attendanceLogData.attendance_column_value,"onUpdate:modelValue":t[4]||(t[4]=a=>e.attendanceLogData.attendance_column_value=a),options:e.csvHeader,info:"select date column"},null,8,["modelValue","options"]),o(r,{title:"CSV Attendance In/Out Type",modelValue:e.attendanceLogData.attendance_type_column_value,"onUpdate:modelValue":t[5]||(t[5]=a=>e.attendanceLogData.attendance_type_column_value=a),options:e.csvHeader,info:"select check in/ check out column"},null,8,["modelValue","options"]),o(C,{"button-text":"Submit Changes",onClick:e.createAttendanceLog},null,8,["onClick"])],32)])])])],64)}const ee=F(N,[["render",q]]);export{ee as default};

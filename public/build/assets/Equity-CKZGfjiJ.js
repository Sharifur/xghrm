import{A as X}from"./AdminMaster-B-YC6P5R.js";import{H as Z,r as I,c as b,o as y,a as $,b as t,d as O,h as P,f as p,n as w,t as d,F as L,p as tt,w as H,e as h,i as T,A as z,l as g,y as E,B as at,C as et,x as _}from"./app-B_Bg3H0j.js";import{S as q}from"./sweetalert2.esm.all-Y6IUEg8t.js";import{_ as st}from"./_plugin-vue_export-helper-DlAUqK2U.js";const ot={layout:X,name:"Equity",components:{Head:Z},props:{equity:Array},setup(R){const a=g(!1),v=g(null),e=g(!1),f=g([...R.equity]),C=g([]),D=g([]),s=g([]),M=async()=>{try{const o=await _.get("/admin/finance/expenses");C.value=o.data.expenses||[];const n=await _.get("/admin/finance/recurring-expenses");D.value=n.data.expenses||[];const l=await _.get("/admin/finance/dashboard/data");l.data.totalRevenue&&(s.value=[{amount:l.data.totalRevenue,date:new Date().toISOString().split("T")[0]}])}catch(o){console.error("Failed to fetch financial data:",o)}},W=E(()=>f.value.sort((o,n)=>n.id-o.id)),A=E(()=>{if(s.value.length>0)return s.value.reduce((n,l)=>{const c=parseFloat(l.amount)||0;return n+c},0);const o=S.value;return o>0?o/.7:0}),S=E(()=>{const o=new Date,n=o.getFullYear(),l=o.getMonth()+1,c=C.value.filter(u=>{if(!u.expense_date)return!1;const m=new Date(u.expense_date);return!isNaN(m.getTime())&&m.getFullYear()===n&&m.getMonth()+1===l}).reduce((u,m)=>{const x=parseFloat(m.amount)||0;return u+x},0),r=D.value.reduce((u,m)=>{const x=parseFloat(m.default_amount)||0,V=m.frequency||"monthly";let N=x;return V==="yearly"?N=x/12:V==="weekly"&&(N=x*4.33),u+N},0);return c+r}),F=E(()=>{const o=A.value,n=S.value;return o-n}),Y=E(()=>f.value.filter(n=>n.name.toLowerCase().includes("retained")||n.name.toLowerCase().includes("earning")||n.name.toLowerCase().includes("profit")).reduce((n,l)=>{const c=parseFloat(l.default_amount)||0;return n+c},0)+F.value),i=at({name:"",description:"",default_amount:0,icon:"fas fa-chart-line",tooltip:"",currency:"BDT"}),B=120,k=g("BDT");et(()=>i.currency,o=>{const n=k.value;n&&i.default_amount!==0&&n!==o&&(n==="BDT"&&o==="USD"?i.default_amount=Number((i.default_amount/B).toFixed(2)):n==="USD"&&o==="BDT"&&(i.default_amount=Number((i.default_amount*B).toFixed(2)))),k.value=o});const G=o=>new Intl.NumberFormat("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}).format(o||0),j=()=>{i.name="",i.description="",i.default_amount=0,i.icon="fas fa-chart-line",i.tooltip="",i.currency="BDT",k.value="BDT"},K=o=>{v.value=o,i.name=o.name,i.description=o.description,i.default_amount=o.default_amount,i.icon=o.icon,i.tooltip=o.tooltip,i.currency=o.currency||"BDT",k.value=o.currency||"BDT"},U=()=>{a.value=!1,v.value=null,j()},J=async()=>{var o,n;e.value=!0;try{const l=v.value?route("admin.finance.equity.update",v.value.id):route("admin.finance.equity.store"),c=v.value?"put":"post",r=await _[c](l,i);if(r.data.success){if(v.value){const u=f.value.findIndex(m=>m.id===v.value.id);f.value[u]=r.data.equity}else f.value.push(r.data.equity);U(),q.fire({title:"Success!",text:r.data.message,icon:"success",confirmButtonColor:"#17a2b8",timer:3e3,timerProgressBar:!0})}}catch(l){console.error("Save failed:",l),q.fire({title:"Error!",text:((n=(o=l.response)==null?void 0:o.data)==null?void 0:n.message)||"Failed to save equity item",icon:"error",confirmButtonColor:"#e74a3b"})}finally{e.value=!1}},Q=async o=>{var l,c;if((await q.fire({title:"Are you sure?",text:"You want to delete this equity item? This will remove it from all balance sheets.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#e74a3b",cancelButtonColor:"#6c757d",confirmButtonText:"Yes, delete it!",cancelButtonText:"Cancel"})).isConfirmed)try{const r=await _.delete(route("admin.finance.equity.delete",o));r.data.success&&(f.value=f.value.filter(u=>u.id!==o),q.fire({title:"Deleted!",text:r.data.message,icon:"success",confirmButtonColor:"#17a2b8",timer:3e3,timerProgressBar:!0}))}catch(r){console.error("Delete failed:",r),q.fire({title:"Error!",text:((c=(l=r.response)==null?void 0:l.data)==null?void 0:c.message)||"Failed to delete equity item",icon:"error",confirmButtonColor:"#e74a3b"})}};return(async()=>{await M()})(),{equity:f,sortedEquity:W,showAddModal:a,editingEquity:v,saving:e,form:i,USD_TO_BDT_RATE:B,formatNumber:G,editEquity:K,closeModal:U,saveEquity:J,deleteEquity:Q,currentMonthProfit:F,totalRetainedEarnings:Y,currentMonthExpenses:S,currentMonthRevenue:A}}},nt={class:"row"},it={class:"col-lg-12"},lt={class:"dashboard-settings margin-top-40"},rt={class:"card mb-4"},dt={class:"card-header d-flex justify-content-between align-items-center"},ct={class:"row mb-4"},ut={class:"col-lg-6 col-md-6 mb-3"},mt={class:"metric-card current-profit-card"},vt={class:"metric-content"},ft={class:"metric-subtitle"},pt={class:"col-lg-6 col-md-6 mb-3"},bt={class:"metric-card retained-earnings-card"},yt={class:"metric-content"},gt={class:"metric-value text-primary"},ht={class:"row"},xt={class:"equity-card"},wt={class:"equity-header"},Et={class:"equity-icon"},_t={class:"equity-actions"},qt=["onClick"],Dt=["onClick"],kt={class:"equity-content"},Tt={class:"equity-description"},Ct={class:"equity-amount"},Mt={class:"amount"},St={key:0,class:"d-block mt-1 text-muted",style:{"font-size":"0.75rem"}},Bt={key:0,class:"col-12"},Nt={class:"modal-header"},Pt={class:"modal-body"},Rt={class:"row"},At={class:"col-md-6 mb-3"},Ft={class:"col-md-6 mb-3"},Ut={class:"input-group"},Vt={key:0,class:"form-text text-info"},Ot={key:1,class:"form-text text-muted"},Lt={class:"mb-3"},Ht={class:"mb-3"},zt={class:"mb-3"},Wt={class:"d-flex justify-content-end gap-2"},Yt=["disabled"];function Gt(R,a,v,e,f,C){const D=I("Head");return y(),b(L,null,[$(D,{title:"Equity Management"}),t("div",nt,[t("div",it,[t("div",lt,[t("div",rt,[t("div",dt,[a[13]||(a[13]=t("h4",{class:"mb-0"},[t("i",{class:"fas fa-chart-line me-2"}),p(" Equity Management ")],-1)),t("button",{onClick:a[0]||(a[0]=s=>e.showAddModal=!0),class:"btn btn-info"},[...a[12]||(a[12]=[t("i",{class:"fas fa-plus"},null,-1),p(" Add Equity Item ",-1)])])]),a[14]||(a[14]=t("div",{class:"card-body"},[t("p",{class:"text-muted"}," Manage your company equity including owner investments, retained earnings, and profit distributions. These items represent the owner's stake in the company. ")],-1))]),a[35]||(a[35]=O('<div class="card mb-4 entrepreneur-guide" data-v-80d6a55e><div class="card-header bg-info-light" data-v-80d6a55e><h6 class="text-info mb-0" data-v-80d6a55e><button class="btn btn-link text-info p-0 text-decoration-none w-100 text-start" type="button" data-bs-toggle="collapse" data-bs-target="#equityGuide" aria-expanded="false" aria-controls="equityGuide" data-v-80d6a55e><i class="fas fa-lightbulb me-2" data-v-80d6a55e></i> Single Company Owner Equity Guide <i class="fas fa-chevron-down float-end mt-1" data-v-80d6a55e></i></button></h6></div><div id="equityGuide" class="collapse" data-v-80d6a55e><div class="card-body" data-v-80d6a55e><div class="row" data-v-80d6a55e><div class="col-md-6" data-v-80d6a55e><h6 class="text-primary mb-3" data-v-80d6a55e><i class="fas fa-question-circle me-2" data-v-80d6a55e></i> What is Owner&#39;s Equity? </h6><p class="mb-3 text-muted" data-v-80d6a55e> As a solo entrepreneur, equity represents <strong data-v-80d6a55e>your ownership stake</strong> in the business. It&#39;s essentially what you&#39;ve put into the business minus what you&#39;ve taken out. </p><ul class="list-unstyled mb-4" data-v-80d6a55e><li class="mb-2" data-v-80d6a55e><i class="fas fa-plus text-success me-2" data-v-80d6a55e></i><strong data-v-80d6a55e>Owner Investment:</strong> Money you&#39;ve put into the business </li><li class="mb-2" data-v-80d6a55e><i class="fas fa-plus text-success me-2" data-v-80d6a55e></i><strong data-v-80d6a55e>Retained Earnings:</strong> Profits kept in the business </li><li class="mb-2" data-v-80d6a55e><i class="fas fa-minus text-danger me-2" data-v-80d6a55e></i><strong data-v-80d6a55e>Owner Withdrawals:</strong> Money you&#39;ve taken out </li><li class="mb-2" data-v-80d6a55e><i class="fas fa-minus text-danger me-2" data-v-80d6a55e></i><strong data-v-80d6a55e>Business Losses:</strong> Reduces your equity </li></ul><div class="alert alert-info" data-v-80d6a55e><strong data-v-80d6a55e><i class="fas fa-calculator me-2" data-v-80d6a55e></i>Simple Formula: </strong><br data-v-80d6a55e><code class="text-dark" data-v-80d6a55e>Owner&#39;s Equity = Assets - Liabilities</code><br data-v-80d6a55e><small class="mt-1 d-block" data-v-80d6a55e>This shows your true ownership value in the business.</small></div></div><div class="col-md-6" data-v-80d6a55e><h6 class="text-primary mb-3" data-v-80d6a55e><i class="fas fa-user-tie me-2" data-v-80d6a55e></i> Solo Business Equity Examples </h6><div class="equity-examples" data-v-80d6a55e><div class="example-category mb-3 positive" data-v-80d6a55e><strong class="text-success d-block mb-2" data-v-80d6a55e><i class="fas fa-arrow-up me-2" data-v-80d6a55e></i>Positive Equity (Increases Value) </strong><ul class="list-unstyled small text-muted mb-0" data-v-80d6a55e><li data-v-80d6a55e>• Initial $10,000 investment to start business</li><li data-v-80d6a55e>• Purchased laptop and equipment for business</li><li data-v-80d6a55e>• Monthly profits reinvested in business growth</li><li data-v-80d6a55e>• Earnings from Webflow templates &amp; Shopify apps</li></ul></div><div class="example-category mb-3 negative" data-v-80d6a55e><strong class="text-danger d-block mb-2" data-v-80d6a55e><i class="fas fa-arrow-down me-2" data-v-80d6a55e></i>Negative Equity (Decreases Value) </strong><ul class="list-unstyled small text-muted mb-0" data-v-80d6a55e><li data-v-80d6a55e>• Owner draws/salary you pay yourself</li><li data-v-80d6a55e>• Business losses during tough months</li><li data-v-80d6a55e>• Large equipment purchases (temporary)</li><li data-v-80d6a55e>• Emergency cash withdrawals</li></ul></div></div><h6 class="text-primary mb-3 mt-4" data-v-80d6a55e><i class="fas fa-chart-line me-2" data-v-80d6a55e></i> Why Track Equity? </h6><ul class="list-unstyled" data-v-80d6a55e><li class="mb-2" data-v-80d6a55e><i class="fas fa-arrow-right text-info me-2" data-v-80d6a55e></i> See how much your business is truly worth </li><li class="mb-2" data-v-80d6a55e><i class="fas fa-arrow-right text-info me-2" data-v-80d6a55e></i> Track your return on investment </li><li class="mb-2" data-v-80d6a55e><i class="fas fa-arrow-right text-info me-2" data-v-80d6a55e></i> Plan for future investments or withdrawals </li><li class="mb-2" data-v-80d6a55e><i class="fas fa-arrow-right text-info me-2" data-v-80d6a55e></i> Prepare accurate financial statements </li></ul></div></div><div class="row mt-4" data-v-80d6a55e><div class="col-12" data-v-80d6a55e><div class="alert alert-warning" data-v-80d6a55e><strong data-v-80d6a55e><i class="fas fa-star me-2" data-v-80d6a55e></i>Pro Tips for Solo Entrepreneurs: </strong><div class="row mt-2" data-v-80d6a55e><div class="col-md-6" data-v-80d6a55e><ul class="mb-0" data-v-80d6a55e><li data-v-80d6a55e><strong data-v-80d6a55e>Keep it Simple:</strong> Track major investments and withdrawals</li><li data-v-80d6a55e><strong data-v-80d6a55e>Regular Reviews:</strong> Check equity monthly to see business growth</li></ul></div><div class="col-md-6" data-v-80d6a55e><ul class="mb-0" data-v-80d6a55e><li data-v-80d6a55e><strong data-v-80d6a55e>Separate Funds:</strong> Don&#39;t mix personal and business money</li><li data-v-80d6a55e><strong data-v-80d6a55e>Plan Withdrawals:</strong> Avoid taking out too much too quickly</li></ul></div></div></div></div></div></div></div></div>',1)),t("div",ct,[t("div",ut,[t("div",mt,[t("div",vt,[t("div",{class:w(["metric-value",e.currentMonthProfit>=0?"text-success":"text-danger"])}," ৳"+d(e.formatNumber(Math.abs(e.currentMonthProfit))),3),a[15]||(a[15]=t("div",{class:"metric-label"},"Current Month Profit",-1)),t("div",ft,[t("span",{class:w(e.currentMonthProfit>=0?"text-success":"text-danger")},[t("i",{class:w(e.currentMonthProfit>=0?"fas fa-arrow-up":"fas fa-arrow-down")},null,2),p(" "+d(e.currentMonthProfit>=0?"Profit":"Loss"),1)],2),p(" • ৳"+d(e.formatNumber(Math.abs(e.currentMonthExpenses)))+" expenses ",1)])]),t("div",{class:w(["metric-icon",e.currentMonthProfit>=0?"text-success":"text-danger"])},[...a[16]||(a[16]=[t("i",{class:"fas fa-chart-pie"},null,-1)])],2)])]),t("div",pt,[t("div",bt,[t("div",yt,[t("div",gt,"৳"+d(e.formatNumber(e.totalRetainedEarnings)),1),a[17]||(a[17]=t("div",{class:"metric-label"},"Total Retained Earnings",-1)),a[18]||(a[18]=t("div",{class:"metric-subtitle text-muted"},[t("i",{class:"fas fa-piggy-bank me-1"}),p(" Accumulated business profits ")],-1))]),a[19]||(a[19]=t("div",{class:"metric-icon text-primary"},[t("i",{class:"fas fa-piggy-bank"})],-1))])])]),t("div",ht,[(y(!0),b(L,null,tt(e.sortedEquity,s=>(y(),b("div",{key:s.id,class:"col-lg-4 col-md-6 mb-4"},[t("div",xt,[t("div",wt,[t("div",Et,[t("i",{class:w(s.icon||"fas fa-chart-line")},null,2)]),t("div",_t,[t("button",{onClick:M=>e.editEquity(s),class:"btn btn-sm btn-outline-primary"},[...a[20]||(a[20]=[t("i",{class:"fas fa-edit"},null,-1)])],8,qt),t("button",{onClick:M=>e.deleteEquity(s.id),class:"btn btn-sm btn-outline-danger"},[...a[21]||(a[21]=[t("i",{class:"fas fa-trash"},null,-1)])],8,Dt)])]),t("div",kt,[t("h5",null,d(s.name),1),t("p",Tt,d(s.description||"No description"),1),t("div",Ct,[a[22]||(a[22]=t("small",{class:"text-muted"},"Default Value",-1)),t("div",Mt,[p(" ৳"+d(e.formatNumber(s.currency==="USD"?s.default_amount*e.USD_TO_BDT_RATE:s.default_amount))+" ",1),s.currency==="USD"?(y(),b("small",St," ($"+d(e.formatNumber(s.default_amount))+" USD) ",1)):P("",!0)])])])])]))),128)),e.equity.length===0?(y(),b("div",Bt,[...a[23]||(a[23]=[t("div",{class:"text-center py-5"},[t("i",{class:"fas fa-chart-line text-muted mb-3",style:{"font-size":"4rem"}}),t("h5",{class:"text-muted"},"No Equity Items Found"),t("p",{class:"text-muted"},'Click "Add Equity Item" to create your first equity category.')],-1)])])):P("",!0)]),e.showAddModal||e.editingEquity?(y(),b("div",{key:0,class:"modal-overlay",onClick:a[11]||(a[11]=(...s)=>e.closeModal&&e.closeModal(...s))},[t("div",{class:"modal-content",onClick:a[10]||(a[10]=H(()=>{},["stop"]))},[t("div",Nt,[t("h5",null,d(e.editingEquity?"Edit":"Add")+" Equity Item",1),t("button",{onClick:a[1]||(a[1]=(...s)=>e.closeModal&&e.closeModal(...s)),class:"btn-close"},"×")]),t("div",Pt,[t("form",{onSubmit:a[9]||(a[9]=H((...s)=>e.saveEquity&&e.saveEquity(...s),["prevent"]))},[t("div",Rt,[t("div",At,[a[24]||(a[24]=t("label",{class:"form-label"},"Equity Name *",-1)),h(t("input",{"onUpdate:modelValue":a[2]||(a[2]=s=>e.form.name=s),type:"text",class:"form-control",required:"",placeholder:"e.g., Owner Investment, Retained Earnings"},null,512),[[T,e.form.name]])]),t("div",Ft,[a[28]||(a[28]=t("label",{class:"form-label"},"Default Amount",-1)),t("div",Ut,[h(t("select",{"onUpdate:modelValue":a[3]||(a[3]=s=>e.form.currency=s),class:"input-group-text",style:{"border-right":"0",background:"#e9ecef"}},[...a[25]||(a[25]=[t("option",{value:"BDT"},"৳",-1),t("option",{value:"USD"},"$",-1)])],512),[[z,e.form.currency]]),h(t("input",{"onUpdate:modelValue":a[4]||(a[4]=s=>e.form.default_amount=s),type:"number",class:"form-control",step:"0.01",placeholder:"0.00"},null,512),[[T,e.form.default_amount,void 0,{number:!0}]])]),e.form.currency==="USD"?(y(),b("div",Vt,[t("small",null,[a[26]||(a[26]=t("i",{class:"fas fa-exchange-alt me-1"},null,-1)),p(" Converted: ৳"+d(e.formatNumber(Math.abs(e.form.default_amount)*e.USD_TO_BDT_RATE))+" BDT (1 USD = "+d(e.USD_TO_BDT_RATE)+" BDT) ",1)])])):(y(),b("div",Ot,[...a[27]||(a[27]=[t("small",null,"Can be negative for distributions/losses",-1)])]))])]),t("div",Lt,[a[30]||(a[30]=t("label",{class:"form-label"},"Icon",-1)),h(t("select",{"onUpdate:modelValue":a[5]||(a[5]=s=>e.form.icon=s),class:"form-select"},[...a[29]||(a[29]=[O('<option value="fas fa-chart-line" data-v-80d6a55e>Chart Line (Default)</option><option value="fas fa-user-tie" data-v-80d6a55e>Owner Investment</option><option value="fas fa-piggy-bank" data-v-80d6a55e>Retained Earnings</option><option value="fas fa-trophy" data-v-80d6a55e>Profits</option><option value="fas fa-handshake" data-v-80d6a55e>Partnership Capital</option><option value="fas fa-coins" data-v-80d6a55e>Paid-in Capital</option><option value="fas fa-chart-pie" data-v-80d6a55e>Equity Distribution</option><option value="fas fa-balance-scale" data-v-80d6a55e>Common Stock</option><option value="fas fa-star" data-v-80d6a55e>Preferred Stock</option><option value="fas fa-minus-circle" data-v-80d6a55e>Treasury Stock</option>',10)])],512),[[z,e.form.icon]])]),t("div",Ht,[a[31]||(a[31]=t("label",{class:"form-label"},"Description",-1)),h(t("textarea",{"onUpdate:modelValue":a[6]||(a[6]=s=>e.form.description=s),class:"form-control",rows:"3",placeholder:"Describe this equity category"},null,512),[[T,e.form.description]])]),t("div",zt,[a[32]||(a[32]=t("label",{class:"form-label"},"Tooltip (Help Text)",-1)),h(t("input",{"onUpdate:modelValue":a[7]||(a[7]=s=>e.form.tooltip=s),type:"text",class:"form-control",placeholder:"Help text shown to users"},null,512),[[T,e.form.tooltip]])]),a[34]||(a[34]=t("div",{class:"alert alert-info"},[t("i",{class:"fas fa-info-circle me-2"}),t("strong",null,"Note:"),p(" Equity can be positive (owner investment, profits) or negative (distributions, losses). ")],-1)),t("div",Wt,[t("button",{type:"button",onClick:a[8]||(a[8]=(...s)=>e.closeModal&&e.closeModal(...s)),class:"btn btn-secondary"}," Cancel "),t("button",{type:"submit",class:"btn btn-info",disabled:e.saving},[a[33]||(a[33]=t("i",{class:"fas fa-save"},null,-1)),p(" "+d(e.saving?"Saving...":"Save"),1)],8,Yt)])],32)])])])):P("",!0)])])])],64)}const Zt=st(ot,[["render",Gt],["__scopeId","data-v-80d6a55e"]]);export{Zt as default};
